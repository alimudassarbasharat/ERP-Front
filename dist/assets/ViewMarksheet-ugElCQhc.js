import{_ as Z,u as ee,c as n,b as i,d as e,e as D,U as P,f as h,t as o,A as l,K as te,w,h as j,a2 as k,F as _,g as C,n as G,v as se,V as le}from"./index-z4YXot-9.js";const ae={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex flex-col items-center p-4 sm:p-6 lg:p-8"},oe={class:"w-full max-w-7xl mx-auto mt-2 mb-4 flex items-center justify-between bg-white/90 rounded-lg shadow-lg py-2 px-5 transition-all duration-500 border border-gray-200"},re={class:"text-base font-medium text-gray-600 tracking-tight flex items-center gap-2"},ne={class:"w-full max-w-7xl mx-auto rounded-lg border border-gray-200 bg-white/90 px-4 sm:px-6 py-3 shadow-lg mb-6"},ie={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},de={class:"flex flex-col w-full"},ue={class:"relative"},pe=["value"],ce={class:"flex flex-col w-full"},fe={class:"relative"},xe=["value"],me={class:"flex flex-col w-full"},ge={class:"relative"},ve=["value"],be={class:"w-full max-w-7xl mx-auto flex items-center justify-between mb-8"},he={class:"flex flex-col items-start"},ye={class:"text-base font-medium text-gray-900 tracking-tight flex items-center gap-2"},we={key:0,class:"w-full"},ke={key:1,class:"w-full"},_e={key:2,class:"w-full"},Ce={class:"bg-white rounded-xl shadow-lg overflow-hidden"},Me={class:"overflow-x-auto"},je={class:"min-w-full"},Se={class:"py-3 px-4 text-gray-900 font-normal text-sm"},Ve={class:"py-3 px-4"},Ae={class:"flex items-center gap-3"},Ne={class:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-sm font-medium"},Pe={class:"text-sm font-medium text-gray-900"},Be={class:"text-xs text-gray-500"},Fe={class:"py-3 px-4 text-gray-900 font-normal text-sm"},Ee={class:"py-3 px-4 text-center"},Ue={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Re={class:"py-3 px-4 text-center"},Te={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},$e={class:"py-3 px-4 text-center"},De={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Ge={class:"py-3 px-4 text-center"},ze={class:"py-3 px-4 text-center"},Ie={class:"py-3 px-4 text-center"},Ke={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},He={key:0,class:"w-full"},Le={class:"flex flex-row items-center justify-between mb-4"},Oe={class:"text-gray-600 text-sm font-medium px-2"},qe={class:"flex items-center gap-4"},Je={class:"text-sm text-gray-600 font-medium flex items-center gap-1"},Qe=["value"],We={class:"text-sm text-gray-600 font-medium flex items-center gap-1 mr-3"},Xe=["max"],Ye={class:"flex justify-center"},Ze={class:"flex items-center gap-2"},et=["disabled"],tt={class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-600 text-white text-base font-bold shadow-md"},st=["disabled"],lt={__name:"ViewMarksheet",setup(at){const S=ee(),M=api,z=useRoute(),p=ref([]),B=ref([]),V=ref([]),v=ref([]),m=ref(""),c=ref(""),d=ref(""),f=ref(!1),y=ref(!1),r=ref(1),g=ref(20),x=ref(0),b=ref(1),A=computed(()=>Math.ceil(x.value/g.value)),I=a=>{if(!a)return"All";const t=V.value.find(s=>String(s.id)===String(a));return t?t.name:"All"},K=a=>{if(!a)return"N/A";const t=a.first_name||"",s=a.last_name||"";return`${t.charAt(0)}${s.charAt(0)}`.toUpperCase()},H=a=>{if(!a)return"bg-white text-gray-900";const t=a.toUpperCase();return t==="A+"||t==="A"?"bg-green-100 text-green-800":t==="B+"||t==="B"?"bg-blue-100 text-blue-800":t==="C+"||t==="C"?"bg-yellow-100 text-yellow-800":t==="D"||t==="F"?"bg-red-100 text-red-800":"bg-purple-100 text-purple-800"},N=async()=>{f.value=!0;try{const[a,t,s]=await Promise.all([M.get("http://localhost:8000/api/classes"),M.get("http://localhost:8000/api/sections"),M.get("http://localhost:8000/api/exams")]);a.data.success&&(B.value=a.data.result||[]),t.data.success&&(V.value=t.data.result||[]),s.data.success&&(v.value=s.data.result||[]),v.value.length>0&&(d.value=v.value[0].id,await u()),y.value=!0}catch(a){console.error("Error loading initial data:",a),S.error("Failed to load initial data")}finally{f.value=!1}},u=async()=>{if(d.value){f.value=!0;try{const a={page:r.value,per_page:g.value};m.value&&(a.class_id=m.value),c.value&&(a.section_id=c.value),d.value&&(a.exam_id=d.value);const t=await M.get("http://localhost:8000/api/result-sheet",{params:a});t.data.success?(p.value=t.data.result.data||[],x.value=t.data.result.total||0,r.value=t.data.result.current_page||1):(p.value=[],x.value=0)}catch(a){console.error("Error fetching marksheets:",a),p.value=[],x.value=0,S.error("Failed to fetch marksheets")}finally{f.value=!1}}},L=async()=>{console.log("Class changed to:",m.value),await u()},O=async()=>{console.log("Section changed to:",c.value),await u()},q=async()=>{console.log("Exam changed to:",d.value),r.value=1,await u()},F=a=>{r.value=a,u()},J=()=>{r.value=1,u()},E=()=>{b.value>=1&&b.value<=A.value&&(r.value=b.value,u())},Q=async()=>{r.value=1,await u()},W=async()=>{console.log("Clearing all filters"),m.value="",c.value="",d.value="",p.value=[],x.value=0,r.value=1,v.value.length>0&&(d.value=v.value[0].id,await u())},X=()=>{S.info("Export functionality will be implemented soon!")};return watch(()=>z.path,async a=>{a.includes("/exams/")&&(y.value=!1,await N())},{immediate:!0}),onActivated(async()=>{y.value||await N()}),onBeforeMount(async()=>{y.value=!1}),onMounted(async()=>{y.value||await N()}),(a,t)=>(i(),n("div",ae,[e("div",oe,[e("h2",re,[t[7]||(t[7]=e("div",{class:"w-2 h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"},null,-1)),h(" View Marksheet - "+o(I(l(c))),1)]),t[8]||(t[8]=P('<nav class="flex items-center gap-2 text-base font-medium text-gray-500" data-v-e3b52f6d><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-e3b52f6d>Dashboard</span><span class="mx-2" data-v-e3b52f6d>|</span><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-e3b52f6d>Exams</span><span class="mx-2" data-v-e3b52f6d>|</span><span class="text-gray-900 font-bold" data-v-e3b52f6d>View Marksheet</span></nav>',1))]),t[33]||(t[33]=e("div",{class:"w-full max-w-7xl mx-auto mb-2"},[e("div",{class:"flex flex-col items-start"},[e("h3",{class:"text-base font-medium text-gray-900 tracking-tight"},"Filter Marksheets"),e("div",{class:"h-[2px] bg-purple-200 w-full transition-all duration-300",style:{"max-width":"140px"}})])],-1)),e("div",ne,[e("form",{class:"w-full",onSubmit:te(Q,["prevent"])},[e("div",ie,[e("div",de,[t[12]||(t[12]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Class",-1)),e("div",ue,[w(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>k(m)?m.value=s:null),onChange:L,class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[9]||(t[9]=e("option",{value:""},"All Classes",-1)),(i(!0),n(_,null,C(l(B),s=>(i(),n("option",{key:s.id,value:String(s.id)},o(s.name),9,pe))),128))],544),[[j,l(m)]]),t[10]||(t[10]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[11]||(t[11]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",ce,[t[16]||(t[16]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Section",-1)),e("div",fe,[w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>k(c)?c.value=s:null),onChange:O,class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[13]||(t[13]=e("option",{value:""},"All Sections",-1)),(i(!0),n(_,null,C(l(V),s=>(i(),n("option",{key:s.id,value:String(s.id)},o(s.name),9,xe))),128))],544),[[j,l(c)]]),t[14]||(t[14]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[15]||(t[15]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",me,[t[20]||(t[20]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Exam",-1)),e("div",ge,[w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>k(d)?d.value=s:null),onChange:q,class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[17]||(t[17]=e("option",{value:""},"Select Exam",-1)),(i(!0),n(_,null,C(l(v),s=>(i(),n("option",{key:s.id,value:s.id},o(s.name),9,ve))),128))],544),[[j,l(d)]]),t[18]||(t[18]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[19]||(t[19]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])])]),e("div",{class:"flex justify-end gap-2 mt-2"},[e("button",{type:"button",onClick:W,class:"h-9 px-8 rounded-full bg-gradient-to-r from-gray-500 to-slate-500 text-sm font-bold text-white shadow hover:from-gray-600 hover:to-slate-600 transition-all duration-300 transform hover:scale-105"},"Clear"),t[21]||(t[21]=e("button",{type:"submit",class:"h-9 px-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-sm font-bold text-white shadow hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105"},"Filter",-1))])],32)]),e("div",be,[e("div",he,[e("h3",ye,[t[22]||(t[22]=e("div",{class:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-bounce"},null,-1)),h(" Marksheet Results ("+o(l(p).length)+") ",1)]),t[23]||(t[23]=e("div",{class:"h-[2px] bg-purple-200 w-full transition-all duration-500",style:{"max-width":"160px"}},null,-1))]),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:X,class:"px-6 py-2 bg-gradient-to-r from-red-500 to-pink-500 text-white text-sm font-medium rounded-full hover:from-red-600 hover:to-pink-600 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 flex items-center gap-2"},t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),h(" Export PDF ")]))])]),t[34]||(t[34]=e("div",{class:"w-full"},[e("div",{class:"h-[2px] w-full bg-purple-200 mb-4"})],-1)),l(f)?(i(),n("div",we,t[25]||(t[25]=[P('<div class="border border-gray-200 rounded-xl p-8 bg-white/40 shadow-sm" data-v-e3b52f6d><div class="flex flex-col items-center justify-center py-12" data-v-e3b52f6d><div class="relative mb-6" data-v-e3b52f6d><div class="w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin" data-v-e3b52f6d></div><div class="absolute inset-0 w-16 h-16 border-4 border-transparent border-r-indigo-500 rounded-full animate-ping opacity-20" data-v-e3b52f6d></div></div><div class="text-center" data-v-e3b52f6d><p class="text-gray-600 font-medium text-lg mb-1" data-v-e3b52f6d>Loading Marksheets</p><p class="text-gray-500 text-sm font-normal" data-v-e3b52f6d>Please wait while we fetch the marksheet data...</p><div class="flex justify-center mt-3 space-x-1" data-v-e3b52f6d><div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" data-v-e3b52f6d></div><div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-e3b52f6d></div><div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-e3b52f6d></div></div></div></div></div>',1)]))):!l(f)&&l(p).length===0?(i(),n("div",ke,t[26]||(t[26]=[P('<div class="border border-gray-200 rounded-xl p-8 bg-white/40 shadow-sm" data-v-e3b52f6d><div class="flex flex-col items-center justify-center py-12" data-v-e3b52f6d><div class="relative mb-6" data-v-e3b52f6d><div class="w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center" data-v-e3b52f6d><svg class="w-12 h-12 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e3b52f6d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" data-v-e3b52f6d></path></svg></div><div class="absolute -top-2 -right-2 w-4 h-4 bg-purple-300 rounded-full animate-ping opacity-30" data-v-e3b52f6d></div><div class="absolute -bottom-2 -left-2 w-3 h-3 bg-indigo-300 rounded-full animate-pulse" data-v-e3b52f6d></div></div><div class="w-full" data-v-e3b52f6d><h3 class="text-gray-600 font-medium text-xl mb-2" data-v-e3b52f6d>No Marksheets Found</h3><p class="text-gray-500 text-sm font-normal leading-relaxed mb-4" data-v-e3b52f6d> No marksheets match your current filters. Try adjusting your search criteria or check if marksheets have been created for the selected exam. </p></div></div></div>',1)]))):!l(f)&&l(p).length>0?(i(),n("div",_e,[e("div",Ce,[e("div",Me,[e("table",je,[t[27]||(t[27]=e("thead",{class:"bg-gradient-to-r from-indigo-50 to-purple-50"},[e("tr",null,[e("th",{class:"text-left py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"#"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Student"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Exam"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Total Marks"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Obtained"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Percentage"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Grade"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Status"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Position")])],-1)),e("tbody",null,[(i(!0),n(_,null,C(l(p),(s,Y)=>{var U,R,T,$;return i(),n("tr",{key:s.id,class:"hover:bg-indigo-50 transition-colors border-b border-purple-200"},[e("td",Se,o(Y+1),1),e("td",Ve,[e("div",Ae,[e("div",Ne,o(K(s.student)),1),e("div",null,[e("div",Pe,o((U=s.student)==null?void 0:U.first_name)+" "+o((R=s.student)==null?void 0:R.last_name),1),e("div",Be,"Roll: "+o(((T=s.student)==null?void 0:T.roll_number)||"N/A"),1)])])]),e("td",Fe,o((($=s.exam)==null?void 0:$.name)||"N/A"),1),e("td",Ee,[e("span",Ue,o(s.total_marks),1)]),e("td",Re,[e("span",Te,o(s.total_mark_obtains),1)]),e("td",$e,[e("span",De,o(s.percentage)+o(s.percentage&&!s.percentage.includes("%")?"%":""),1)]),e("td",Ge,[e("span",{class:G(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",H(s.grade)])},o(s.grade||"N/A"),3)]),e("td",ze,[e("span",{class:G(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.status==="Pass"?"bg-green-100 text-green-800":s.status==="Fail"?"bg-red-100 text-red-800":"bg-white text-gray-900"])},o(s.status||"N/A"),3)]),e("td",Ie,[e("span",Ke,o(s.position||"N/A"),1)])])}),128))])])])]),!l(f)&&l(x)>0?(i(),n("div",He,[e("div",Le,[e("div",Oe," Showing "+o((l(r)-1)*l(g)+1)+" to "+o(Math.min(l(r)*l(g),l(x)))+" of "+o(l(x))+" entries ",1),e("div",qe,[e("label",Je,[t[28]||(t[28]=h(" Per page: ")),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>k(g)?g.value=s:null),onChange:J,class:"rounded-md border border-purple-200 bg-white px-2 py-1 text-xs font-semibold text-purple-700 focus:ring-2 focus:ring-purple-300"},[(i(),n(_,null,C([10,20,50,100],s=>e("option",{key:s,value:s},o(s),9,Qe)),64))],544),[[j,l(g)]])]),e("label",We,[t[30]||(t[30]=h(" Go to page: ")),w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>k(b)?b.value=s:null),type:"number",min:"1",max:l(A),class:"w-16 rounded-md border border-purple-200 px-2 py-1 text-xs font-semibold text-purple-700 focus:ring-2 focus:ring-purple-300",onKeyup:le(E,["enter"])},null,40,Xe),[[se,l(b),void 0,{number:!0}]]),e("button",{onClick:E,class:"ml-1 px-2 py-1 rounded-md bg-purple-500 text-white text-xs font-semibold hover:bg-purple-600 transition-all flex items-center gap-1"},t[29]||(t[29]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1),h(" Go ")]))])])]),e("div",Ye,[e("div",Ze,[e("button",{class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 text-xl font-bold shadow-sm transition-all duration-200 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:l(r)===1,onClick:t[5]||(t[5]=s=>F(l(r)-1)),"aria-label":"Previous"},t[31]||(t[31]=[e("span",null,"←",-1)]),8,et),e("span",tt,o(l(r)),1),e("button",{class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 text-xl font-bold shadow-sm transition-all duration-200 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:l(r)===l(A),onClick:t[6]||(t[6]=s=>F(l(r)+1)),"aria-label":"Next"},t[32]||(t[32]=[e("span",null,"→",-1)]),8,st)])])])):D("",!0)])):D("",!0)]))}},rt=Z(lt,[["__scopeId","data-v-e3b52f6d"]]);export{rt as default};
