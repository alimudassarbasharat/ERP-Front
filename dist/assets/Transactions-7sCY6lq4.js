import{_ as ve,u as fe,r as m,l as D,s as o,x as ge,c as Q,b as q,d as s,y as e,z as a,f as r,A as y,C as ye,a1 as N,t as u,R as be,w as he,D as Ve,E as we,n as W,H as Te,J as xe,e as Ce,T as De}from"./index-z4YXot-9.js";const Se={class:"transactions"},Ue={class:"page-header"},ke={class:"card-header"},ze={class:"card-content"},Pe={class:"card-header"},Be={class:"card-content"},Fe={class:"card-header"},Ie={class:"card-content"},Ee={class:"card-header"},Ae={class:"card-content"},$e={class:"table-operations"},Le={class:"pagination-container"},qe={class:"dialog-footer"},Ne={key:0,class:"transaction-details"},Me={__name:"Transactions",setup(Oe){const S=fe(),j=m(!1),U=m(""),k=m(""),z=m(""),V=m([]),I=m(1),E=m(10),G=m(0),T=m(!1),A=m(!1),c=m(null),X=[{text:"Last week",value:()=>{const n=new Date,t=new Date;return t.setTime(t.getTime()-3600*1e3*24*7),[t,n]}},{text:"Last month",value:()=>{const n=new Date,t=new Date;return t.setTime(t.getTime()-3600*1e3*24*30),[t,n]}},{text:"Last 3 months",value:()=>{const n=new Date,t=new Date;return t.setTime(t.getTime()-3600*1e3*24*90),[t,n]}}],d=m({type:"",description:"",amount:0,category:"",date:new Date,status:"pending"}),Y={type:[{required:!0,message:"Please select type",trigger:"change"}],description:[{required:!0,message:"Please enter description",trigger:"blur"}],amount:[{required:!0,message:"Please enter amount",trigger:"blur"}],category:[{required:!0,message:"Please select category",trigger:"change"}],date:[{required:!0,message:"Please select date",trigger:"change"}],status:[{required:!0,message:"Please select status",trigger:"change"}]},v=m([{id:1,date:"2024-03-15",description:"Tuition Payment",type:"income",amount:5e3,category:"tuition",status:"completed"},{id:2,date:"2024-03-14",description:"Utility Bill",type:"expense",amount:500,category:"utilities",status:"pending"}]),Z=D(()=>{let n=v.value;if(U.value&&(n=n.filter(t=>t.description.toLowerCase().includes(U.value.toLowerCase()))),k.value&&(n=n.filter(t=>t.type===k.value)),z.value&&(n=n.filter(t=>t.status===z.value)),V.value&&V.value.length===2){const t=V.value[0],_=V.value[1];n=n.filter(b=>{const p=new Date(b.date);return p>=t&&p<=_})}return n}),$=D(()=>v.value.filter(n=>n.type==="income"&&n.status==="completed").reduce((n,t)=>n+t.amount,0)),L=D(()=>v.value.filter(n=>n.type==="expense"&&n.status==="completed").reduce((n,t)=>n+t.amount,0)),P=D(()=>$.value-L.value),M=D(()=>v.value.filter(n=>n.status==="pending").length),f=n=>n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),O=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),R=n=>{switch(n){case"completed":return"success";case"pending":return"warning";case"cancelled":return"danger";default:return"info"}},ee=()=>{d.value={type:"",description:"",amount:0,category:"",date:new Date,status:"pending"},T.value=!0},te=n=>{c.value=n,A.value=!0},ae=async n=>{try{await De.confirm("Are you sure you want to delete this transaction?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"});const t=v.value.findIndex(_=>_.id===n.id);v.value.splice(t,1),S.success("Transaction deleted successfully")}catch(t){t!=="cancel"&&S.error("Failed to delete transaction")}},le=async()=>{try{v.value.push({id:v.value.length+1,...d.value,date:d.value.date.toISOString().split("T")[0]}),S.success("Transaction created successfully"),T.value=!1}catch{S.error("Failed to create transaction")}},ne=n=>{E.value=n},oe=n=>{I.value=n};return(n,t)=>{const _=o("el-icon"),b=o("el-button"),p=o("el-tag"),B=o("el-statistic"),x=o("el-card"),F=o("el-col"),se=o("el-row"),H=o("el-input"),i=o("el-option"),C=o("el-select"),J=o("el-date-picker"),g=o("el-table-column"),ue=o("el-button-group"),de=o("el-table"),re=o("el-pagination"),w=o("el-form-item"),ie=o("el-input-number"),ce=o("el-form"),K=o("el-dialog"),h=o("el-descriptions-item"),pe=o("el-descriptions"),me=ge("loading");return q(),Q("div",Se,[s("div",Ue,[t[16]||(t[16]=s("h2",null,"Financial Transactions",-1)),e(b,{type:"primary",onClick:ee},{default:a(()=>[e(_,null,{default:a(()=>[e(y(ye))]),_:1}),t[15]||(t[15]=r(" Add Transaction "))]),_:1,__:[15]})]),e(se,{gutter:20,class:"summary-cards"},{default:a(()=>[e(F,{span:6},{default:a(()=>[e(x,{shadow:"hover"},{header:a(()=>[s("div",ke,[t[17]||(t[17]=s("span",null,"Total Income",-1)),e(p,{type:"success"},{default:a(()=>[r("+$"+u(f($.value)),1)]),_:1})])]),default:a(()=>[s("div",ze,[e(B,{value:f($.value)},{prefix:a(()=>[e(_,null,{default:a(()=>[e(y(N))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1}),e(F,{span:6},{default:a(()=>[e(x,{shadow:"hover"},{header:a(()=>[s("div",Pe,[t[18]||(t[18]=s("span",null,"Total Expenses",-1)),e(p,{type:"danger"},{default:a(()=>[r("-$"+u(f(L.value)),1)]),_:1})])]),default:a(()=>[s("div",Be,[e(B,{value:f(L.value)},{prefix:a(()=>[e(_,null,{default:a(()=>[e(y(N))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1}),e(F,{span:6},{default:a(()=>[e(x,{shadow:"hover"},{header:a(()=>[s("div",Fe,[t[19]||(t[19]=s("span",null,"Net Balance",-1)),e(p,{type:P.value>=0?"success":"danger"},{default:a(()=>[r(u(P.value>=0?"+":"-")+"$"+u(f(Math.abs(P.value))),1)]),_:1},8,["type"])])]),default:a(()=>[s("div",Ie,[e(B,{value:f(P.value)},{prefix:a(()=>[e(_,null,{default:a(()=>[e(y(N))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1}),e(F,{span:6},{default:a(()=>[e(x,{shadow:"hover"},{header:a(()=>[s("div",Ee,[t[20]||(t[20]=s("span",null,"Pending Transactions",-1)),e(p,{type:"warning"},{default:a(()=>[r(u(M.value),1)]),_:1})])]),default:a(()=>[s("div",Ae,[e(B,{value:M.value},{prefix:a(()=>[e(_,null,{default:a(()=>[e(y(be))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1})]),_:1}),e(x,{class:"transaction-list"},{default:a(()=>[s("div",$e,[e(H,{modelValue:U.value,"onUpdate:modelValue":t[0]||(t[0]=l=>U.value=l),placeholder:"Search transactions...",class:"search-input","prefix-icon":y(Ve)},null,8,["modelValue","prefix-icon"]),e(C,{modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=l=>k.value=l),placeholder:"Type",clearable:""},{default:a(()=>[e(i,{label:"Income",value:"income"}),e(i,{label:"Expense",value:"expense"})]),_:1},8,["modelValue"]),e(C,{modelValue:z.value,"onUpdate:modelValue":t[2]||(t[2]=l=>z.value=l),placeholder:"Status",clearable:""},{default:a(()=>[e(i,{label:"Completed",value:"completed"}),e(i,{label:"Pending",value:"pending"}),e(i,{label:"Cancelled",value:"cancelled"})]),_:1},8,["modelValue"]),e(J,{modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=l=>V.value=l),type:"daterange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date",shortcuts:X},null,8,["modelValue"])]),he((q(),we(de,{data:Z.value,style:{width:"100%"}},{default:a(()=>[e(g,{prop:"id",label:"ID",width:"80"}),e(g,{prop:"date",label:"Date",width:"120"},{default:a(({row:l})=>[r(u(O(l.date)),1)]),_:1}),e(g,{prop:"description",label:"Description"}),e(g,{prop:"type",label:"Type",width:"100"},{default:a(({row:l})=>[e(p,{type:l.type==="income"?"success":"danger"},{default:a(()=>[r(u(l.type),1)]),_:2},1032,["type"])]),_:1}),e(g,{prop:"amount",label:"Amount",width:"120"},{default:a(({row:l})=>[s("span",{class:W(l.type==="income"?"income":"expense")},u(l.type==="income"?"+":"-")+"$"+u(f(l.amount)),3)]),_:1}),e(g,{prop:"category",label:"Category",width:"120"},{default:a(({row:l})=>[e(p,null,{default:a(()=>[r(u(l.category),1)]),_:2},1024)]),_:1}),e(g,{prop:"status",label:"Status",width:"100"},{default:a(({row:l})=>[e(p,{type:R(l.status)},{default:a(()=>[r(u(l.status),1)]),_:2},1032,["type"])]),_:1}),e(g,{label:"Actions",width:"200",fixed:"right"},{default:a(({row:l})=>[e(ue,null,{default:a(()=>[e(b,{type:"primary",size:"small",onClick:_e=>te(l)},{default:a(()=>[e(_,null,{default:a(()=>[e(y(Te))]),_:1})]),_:2},1032,["onClick"]),e(b,{type:"danger",size:"small",onClick:_e=>ae(l),disabled:l.status==="completed"},{default:a(()=>[e(_,null,{default:a(()=>[e(y(xe))]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[me,j.value]]),s("div",Le,[e(re,{"current-page":I.value,"onUpdate:currentPage":t[4]||(t[4]=l=>I.value=l),"page-size":E.value,"onUpdate:pageSize":t[5]||(t[5]=l=>E.value=l),"page-sizes":[10,20,50,100],total:G.value,layout:"total, sizes, prev, pager, next",onSizeChange:ne,onCurrentChange:oe},null,8,["current-page","page-size","total"])])]),_:1}),e(K,{modelValue:T.value,"onUpdate:modelValue":t[13]||(t[13]=l=>T.value=l),title:"Add Transaction",width:"500px"},{footer:a(()=>[s("span",qe,[e(b,{onClick:t[12]||(t[12]=l=>T.value=!1)},{default:a(()=>t[21]||(t[21]=[r("Cancel")])),_:1,__:[21]}),e(b,{type:"primary",onClick:le},{default:a(()=>t[22]||(t[22]=[r("Create")])),_:1,__:[22]})])]),default:a(()=>[e(ce,{ref_key:"transactionForm",ref:d,model:d.value,rules:Y,"label-position":"top"},{default:a(()=>[e(w,{label:"Type",prop:"type"},{default:a(()=>[e(C,{modelValue:d.value.type,"onUpdate:modelValue":t[6]||(t[6]=l=>d.value.type=l),placeholder:"Select type"},{default:a(()=>[e(i,{label:"Income",value:"income"}),e(i,{label:"Expense",value:"expense"})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"Description",prop:"description"},{default:a(()=>[e(H,{modelValue:d.value.description,"onUpdate:modelValue":t[7]||(t[7]=l=>d.value.description=l),placeholder:"Enter description"},null,8,["modelValue"])]),_:1}),e(w,{label:"Amount",prop:"amount"},{default:a(()=>[e(ie,{modelValue:d.value.amount,"onUpdate:modelValue":t[8]||(t[8]=l=>d.value.amount=l),min:0,precision:2,step:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(w,{label:"Category",prop:"category"},{default:a(()=>[e(C,{modelValue:d.value.category,"onUpdate:modelValue":t[9]||(t[9]=l=>d.value.category=l),placeholder:"Select category"},{default:a(()=>[e(i,{label:"Tuition",value:"tuition"}),e(i,{label:"Books",value:"books"}),e(i,{label:"Salaries",value:"salaries"}),e(i,{label:"Utilities",value:"utilities"}),e(i,{label:"Maintenance",value:"maintenance"}),e(i,{label:"Other",value:"other"})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"Date",prop:"date"},{default:a(()=>[e(J,{modelValue:d.value.date,"onUpdate:modelValue":t[10]||(t[10]=l=>d.value.date=l),type:"date",placeholder:"Select date",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(w,{label:"Status",prop:"status"},{default:a(()=>[e(C,{modelValue:d.value.status,"onUpdate:modelValue":t[11]||(t[11]=l=>d.value.status=l),placeholder:"Select status"},{default:a(()=>[e(i,{label:"Completed",value:"completed"}),e(i,{label:"Pending",value:"pending"}),e(i,{label:"Cancelled",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(K,{modelValue:A.value,"onUpdate:modelValue":t[14]||(t[14]=l=>A.value=l),title:"Transaction Details",width:"500px"},{default:a(()=>[c.value?(q(),Q("div",Ne,[e(pe,{column:1,border:""},{default:a(()=>[e(h,{label:"ID"},{default:a(()=>[r(u(c.value.id),1)]),_:1}),e(h,{label:"Date"},{default:a(()=>[r(u(O(c.value.date)),1)]),_:1}),e(h,{label:"Type"},{default:a(()=>[e(p,{type:c.value.type==="income"?"success":"danger"},{default:a(()=>[r(u(c.value.type),1)]),_:1},8,["type"])]),_:1}),e(h,{label:"Description"},{default:a(()=>[r(u(c.value.description),1)]),_:1}),e(h,{label:"Amount"},{default:a(()=>[s("span",{class:W(c.value.type==="income"?"income":"expense")},u(c.value.type==="income"?"+":"-")+"$"+u(f(c.value.amount)),3)]),_:1}),e(h,{label:"Category"},{default:a(()=>[e(p,null,{default:a(()=>[r(u(c.value.category),1)]),_:1})]),_:1}),e(h,{label:"Status"},{default:a(()=>[e(p,{type:R(c.value.status)},{default:a(()=>[r(u(c.value.status),1)]),_:1},8,["type"])]),_:1})]),_:1})])):Ce("",!0)]),_:1},8,["modelValue"])])}}},He=ve(Me,[["__scopeId","data-v-479e1449"]]);export{He as default};
