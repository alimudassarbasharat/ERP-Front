import{l as _,c as L,aB as D,R as T,_ as b,a as u,o as i,d as l,b as I,e as A,f as $,u as h,t as M,h as y,J as O,F as C,z as N,M as q,P as R,H as z,Q as G}from"./index-xvPUEXLW.js";import{c as V}from"./createVueComponent-mtWgRR3y.js";/**
 * @license @tabler/icons-vue v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H=V("outline","eye-off","EyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var U=V("outline","eye","Eye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]);function W(e){const n=_(""),a=_(""),r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,d=6,c=()=>{var t;return(t=e.email)!=null&&t.trim()?r.test(e.email)?(n.value="",!0):(n.value="Please enter a valid email address",!1):(n.value="Email is required",!1)},o=()=>{var t;return(t=e.password)!=null&&t.trim()?e.password.length<d?(a.value=`Password must be at least ${d} characters`,!1):(a.value="",!0):(a.value="Password is required",!1)},s=L(()=>{var t,m;return((t=e.email)==null?void 0:t.trim())&&((m=e.password)==null?void 0:m.trim())&&!n.value&&!a.value});return{emailError:n,passwordError:a,validateEmail:c,validatePassword:o,isFormValid:s}}function J(e,n,a){const r=D();return{login:async s=>{var t,m;try{return await T.post("/login",s)}catch(f){const k=((m=(t=f.response)==null?void 0:t.data)==null?void 0:m.message)||"Login failed. Please try again.";throw new Error(k)}},handleAuthSuccess:async s=>{if(!s.data.success)throw new Error(s.data.message||"Invalid credentials");const{access_token:t,token_type:m,expires_in:f,admin:k,user:E}=s.data;if(!t)throw new Error("Access token is required");r.token=t,localStorage.setItem("authToken",t);const S=E||k;if(S&&(r.user=S,localStorage.setItem("user",JSON.stringify(S))),f){const g=new Date(Date.now()+f*1e3);r.tokenExpiry=g.toISOString(),localStorage.setItem("tokenExpiry",g.toISOString())}else{const g=new Date(Date.now()+1296e6);r.tokenExpiry=g.toISOString(),localStorage.setItem("tokenExpiry",g.toISOString())}a.success("ðŸŽ‰ Welcome Back!",{position:"top-right",duration:4e3}),setTimeout(()=>{const g=n.query.redirect||"/dashboard";e.push(g)},2e3)},logout:async()=>{await r.logout()}}}const j="/assets/login-image-Ba6vf2W-.png",Q={class:"illustration-wrapper"},X={__name:"LoginIllustration",setup(e){return(n,a)=>(i(),u("div",Q,[...a[0]||(a[0]=[l("img",{src:j,alt:"Login Illustration",class:"login-image"},null,-1)])]))}},K=b(X,[["__scopeId","data-v-6c773220"]]),Y={class:"header-container"},Z={__name:"LoginHeader",setup(e){return(n,a)=>(i(),u("div",Y,[...a[0]||(a[0]=[l("h1",{class:"brand-title"},"Teachify",-1),l("p",{class:"brand-subtitle"},"Login your account",-1)])]))}},ee=b(Z,[["__scopeId","data-v-5f290ade"]]),se={class:"input-wrapper"},te=["value","type","placeholder"],oe={key:1,class:"error-message"},ae={__name:"FormInput",props:{modelValue:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},error:{type:String,default:""},showPasswordToggle:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1}},emits:["update:modelValue","input","toggle-password"],setup(e,{emit:n}){const a=e,r=n,d=L(()=>{const o=["w-full h-12 bg-white/15 border border-white rounded-xl px-4 text-[15px] text-white","backdrop-blur-[10px] transition-all duration-300 placeholder:text-white/70 placeholder:font-normal","focus:outline-none focus:border-white focus:bg-white focus:text-gray-900","focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)]","lg:h-11 lg:text-sm md:h-[42px] md:text-sm md:px-3.5 md:rounded-[10px]"];return a.showPasswordToggle&&o.push("pr-12 md:pr-[42px]"),a.error&&o.push("border-red-500 bg-red-500/10"),o.join(" ")}),c=o=>{r("update:modelValue",o.target.value),r("input",o)};return(o,s)=>(i(),u("div",se,[l("input",{value:e.modelValue,type:e.type,placeholder:e.placeholder,class:A(d.value),onInput:c,onBlur:s[0]||(s[0]=t=>o.$emit("input")),required:""},null,42,te),e.showPasswordToggle?(i(),u("button",{key:0,type:"button",onClick:s[1]||(s[1]=t=>o.$emit("toggle-password")),class:"password-toggle",tabindex:"-1"},[e.showPassword?(i(),$(h(H),{key:1,size:20,class:"icon",stroke:"black",fill:"none"})):(i(),$(h(U),{key:0,size:20,class:"icon",stroke:"black",fill:"none"}))])):I("",!0),e.error?(i(),u("div",oe,M(e.error),1)):I("",!0)]))}},P=b(ae,[["__scopeId","data-v-b4990f6b"]]),re=["disabled"],ne={key:0},le={key:1,class:"loading-text"},ie={__name:"LoginForm",props:{loading:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},emailError:{type:String,default:""},passwordError:{type:String,default:""},isFormValid:{type:Boolean,default:!1}},emits:["submit","toggle-password","update:email","update:password","validate-email","validate-password"],setup(e,{emit:n}){const a=n,r=_(""),d=_(""),c=()=>{a("submit")};return(o,s)=>(i(),u("form",{onSubmit:O(c,["prevent"]),class:"login-form"},[y(P,{"model-value":r.value,type:"email",placeholder:"username",error:e.emailError,"onUpdate:modelValue":s[0]||(s[0]=t=>{r.value=t,o.$emit("update:email",t)}),onInput:s[1]||(s[1]=t=>o.$emit("validate-email"))},null,8,["model-value","error"]),y(P,{"model-value":d.value,type:e.showPassword?"text":"password",placeholder:"password",error:e.passwordError,"show-password-toggle":!0,"show-password":e.showPassword,"onUpdate:modelValue":s[2]||(s[2]=t=>{d.value=t,o.$emit("update:password",t)}),onInput:s[3]||(s[3]=t=>o.$emit("validate-password")),onTogglePassword:s[4]||(s[4]=t=>o.$emit("toggle-password"))},null,8,["model-value","type","error","show-password"]),s[5]||(s[5]=l("div",{class:"forgot-password"},[l("a",{href:"#",class:"forgot-link"},"forgot password?")],-1)),l("button",{type:"submit",class:"submit-button",disabled:e.loading||!e.isFormValid},[e.loading?(i(),u("span",le,"Loading...")):(i(),u("span",ne,"Login"))],8,re),s[6]||(s[6]=l("div",{class:"create-account"},[l("a",{href:"#",class:"create-link"},"Create Account")],-1))],32))}},de=b(ie,[["__scopeId","data-v-d3fa07e4"]]),ue={class:"grid-container"},ce={class:"grid-wrapper"},pe={__name:"DecorativeGrid",setup(e){return(n,a)=>(i(),u("div",ue,[l("div",ce,[(i(),u(C,null,N(20,r=>l("div",{key:r,class:"grid-dot"})),64))])]))}},me=b(pe,[["__scopeId","data-v-ee952c1a"]]),ge={class:"login-container"},we={class:"login-card"},fe={class:"illustration-section"},ve={class:"form-section"},he={class:"form-wrapper"},ye={__name:"Login",setup(e){const n=q(),a=R(),r=z(),d=_(!1),c=_(!1),o=G({email:"",password:""}),{emailError:s,passwordError:t,validateEmail:m,validatePassword:f,isFormValid:k}=W(o),{login:E,handleAuthSuccess:S}=J(n,a,r),g=async()=>{if(B())try{d.value=!0;const w=await E(o);await S(w)}catch(w){F(w)}finally{d.value=!1}},B=()=>{const w=m(),p=f();return!w||!p?(r.error("Please fix the errors before submitting"),!1):!0},F=w=>{var v,x;console.error("Login error:",w);const p=((x=(v=w.response)==null?void 0:v.data)==null?void 0:x.message)||"Login failed. Please try again.";r.error(p)};return(w,p)=>(i(),u("div",ge,[l("div",we,[l("div",fe,[y(K)]),l("div",ve,[l("div",he,[y(ee),y(de,{loading:d.value,"show-password":c.value,"email-error":h(s),"password-error":h(t),"is-form-valid":h(k),onTogglePassword:p[0]||(p[0]=v=>c.value=!c.value),onSubmit:g,"onUpdate:email":p[1]||(p[1]=v=>o.email=v),"onUpdate:password":p[2]||(p[2]=v=>o.password=v),onValidateEmail:h(m),onValidatePassword:h(f)},null,8,["loading","show-password","email-error","password-error","is-form-valid","onValidateEmail","onValidatePassword"])])])]),y(me)]))}},ke=b(ye,[["__scopeId","data-v-7ac994af"]]);export{ke as default};
