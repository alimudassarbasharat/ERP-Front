import{_ as T,H as A,l as d,c as j,w as D,p as H,a7 as W,a as o,o as r,C as M,d as e,b as m,J as U,A as S,B as G,F as z,z as B,t as l,i as w,K as I,e as K,R}from"./index-xvPUEXLW.js";const P={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex flex-col items-center p-4 sm:p-6 lg:p-8"},Q={class:"w-full max-w-7xl mx-auto rounded-lg border border-gray-200 bg-white/90 px-4 sm:px-6 py-3 shadow-lg mb-6"},$={class:"flex flex-wrap lg:flex-nowrap items-end gap-x-4 gap-y-2"},q={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},J={class:"relative"},O=["value"],X={class:"flex justify-end mt-2"},Y=["disabled"],Z={key:0,class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-gray-200 border-t-transparent mr-2"},ee={key:0,class:"w-full max-w-7xl mx-auto mb-6"},te={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},se={class:"bg-white/90 rounded-lg shadow-lg border border-gray-200 p-4"},ae={class:"flex items-center"},le={class:"text-2xl font-bold text-gray-900"},oe={class:"bg-white/90 rounded-lg shadow-lg border border-gray-200 p-4"},re={class:"flex items-center"},ne={class:"text-2xl font-bold text-gray-900"},ie={class:"bg-white/90 rounded-lg shadow-lg border border-gray-200 p-4"},de={class:"flex items-center"},ue={class:"text-2xl font-bold text-gray-900"},ce={class:"bg-white/90 rounded-lg shadow-lg border border-gray-200 p-4"},pe={class:"flex items-center"},xe={class:"text-2xl font-bold text-gray-900"},me={key:1,class:"w-full max-w-7xl mx-auto"},ve={class:"w-full max-w-7xl mx-auto flex items-center justify-between mb-8"},fe={class:"flex flex-col items-start"},ge={class:"text-base font-medium text-gray-600 tracking-tight flex items-center gap-2"},he={class:"flex-1 flex justify-center"},we={class:"relative w-full max-w-xs flex items-center"},be={class:"bg-white/90 rounded-lg shadow-lg border border-gray-200 overflow-hidden"},ye={class:"overflow-x-auto"},_e={class:"w-full"},ke={class:"bg-white divide-y divide-gray-200"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},je={class:"px-6 py-4 whitespace-nowrap"},Me={class:"flex items-center"},Se={class:"flex-shrink-0 h-10 w-10"},ze=["src","alt"],Be={key:1,class:"h-10 w-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-medium"},Re={class:"ml-4"},Ve={class:"text-sm font-medium text-gray-900"},Le={class:"text-sm text-gray-500"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ee={class:"px-6 py-4 whitespace-nowrap"},Te={key:2,class:"w-full max-w-7xl mx-auto flex items-center justify-center py-12"},Ae={key:3,class:"w-full max-w-7xl mx-auto flex items-center justify-center py-12"},De={__name:"ClassWiseReport",setup(He){A();const n=d(null),v=d([]),u=d([]),c=d(""),i=d(!1),V=()=>{n.value||(n.value=null),v.value||(v.value=[]),u.value||(u.value=[]),c.value||(c.value=""),i.value===void 0&&(i.value=!1)},b=d(1),f=d(0),g=d(0),h=d(0),L=j(()=>new Set(u.value.map(a=>a.family_id).filter(Boolean)).size),y=j(()=>{if(!c.value)return u.value;const a=c.value.toLowerCase();return u.value.filter(t=>{var s,p,x,C;return((s=t.name)==null?void 0:s.toLowerCase().includes(a))||((p=t.roll_number)==null?void 0:p.toLowerCase().includes(a))||((x=t.family_name)==null?void 0:x.toLowerCase().includes(a))||((C=t.contact)==null?void 0:C.toLowerCase().includes(a))})}),F=d(window.innerWidth<=768),_=()=>{F.value=window.innerWidth<=768},N=async()=>{try{const a=await R.get("/classes");a.data.success&&(v.value=a.data.result||[])}catch(a){console.error("Failed to fetch classes:",a)}},k=async()=>{if(n.value){i.value=!0;try{const a=await R.get("/students",{params:{class_id:n.value,page:b.value}});if(a.data.status&&a.data.result&&a.data.result.data){const t=a.data.result.data;u.value=t.map(s=>{var p,x;return{id:s.id,name:`${s.first_name||""} ${s.last_name||""}`.trim(),roll_number:s.roll_number,gender:s.gender,profile_image:s.photo_path,father_name:((p=s.family_info)==null?void 0:p.father_name)||"",contact:((x=s.contact_info)==null?void 0:x.reporting_number)||"",status:s.status||"active"}}),f.value=a.data.result.total,g.value=a.data.total_male,h.value=a.data.total_female}else u.value=[],f.value=0,g.value=0,h.value=0}catch{u.value=[],f.value=0,g.value=0,h.value=0}finally{i.value=!1}}},E=()=>{};return D([n,b],([a,t])=>{a&&k()}),H(()=>{V(),N(),window.addEventListener("resize",_)}),W(()=>{window.removeEventListener("resize",_)}),(a,t)=>(r(),o("div",P,[t[24]||(t[24]=M('<div class="w-full max-w-7xl mx-auto mt-2 mb-4 flex items-center justify-between bg-white/90 rounded-lg shadow-lg py-2 px-5 transition-all duration-500 border border-gray-200" data-v-3b35654c><h2 class="text-base font-medium text-gray-600 tracking-tight flex items-center gap-2" data-v-3b35654c><div class="w-2 h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse" data-v-3b35654c></div> Class Wise Report </h2><nav class="flex items-center gap-2 text-base font-medium text-gray-500" data-v-3b35654c><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-3b35654c>Dashboard</span><span class="mx-2" data-v-3b35654c>|</span><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-3b35654c>Reports</span><span class="mx-2" data-v-3b35654c>|</span><span class="text-gray-900 font-bold" data-v-3b35654c>Class Reports</span></nav></div><div class="w-full max-w-7xl mx-auto mb-2" data-v-3b35654c><div class="flex flex-col items-start" data-v-3b35654c><h3 class="text-base font-medium text-gray-900 tracking-tight" data-v-3b35654c>Select Class</h3><div class="h-[1px] bg-purple-200 w-full transition-all duration-300" style="max-width:110px;" data-v-3b35654c></div></div></div>',2)),e("div",Q,[e("form",{class:"w-full",onSubmit:U(k,["prevent"])},[e("div",$,[e("div",q,[t[5]||(t[5]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Class",-1)),e("div",J,[S(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[2]||(t[2]=e("option",{value:""},"Select Class",-1)),(r(!0),o(z,null,B(v.value,s=>(r(),o("option",{key:s.id,value:s.id},l(s.name),9,O))),128))],512),[[G,n.value]]),t[3]||(t[3]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[4]||(t[4]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[1px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",X,[e("button",{type:"submit",class:"h-9 px-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-sm font-bold text-white shadow hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105",disabled:!n.value||i.value},[i.value?(r(),o("span",Z)):m("",!0),t[6]||(t[6]=w(" Generate Report ",-1))],8,Y)])])],32)]),n.value&&!i.value?(r(),o("div",ee,[e("div",te,[e("div",se,[e("div",ae,[t[8]||(t[8]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",null,[e("div",le,l(f.value),1),t[7]||(t[7]=e("div",{class:"text-sm text-gray-600"},"Total Students",-1))])])]),e("div",oe,[e("div",re,[t[10]||(t[10]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center mr-4"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("div",ne,l(g.value),1),t[9]||(t[9]=e("div",{class:"text-sm text-gray-600"},"Male Students",-1))])])]),e("div",ie,[e("div",de,[t[12]||(t[12]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-pink-500 to-pink-600 rounded-lg flex items-center justify-center mr-4"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("div",ue,l(h.value),1),t[11]||(t[11]=e("div",{class:"text-sm text-gray-600"},"Female Students",-1))])])]),e("div",ce,[e("div",pe,[t[14]||(t[14]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mr-4"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])],-1)),e("div",null,[e("div",xe,l(L.value),1),t[13]||(t[13]=e("div",{class:"text-sm text-gray-600"},"Total Families",-1))])])])])])):m("",!0),n.value&&!i.value?(r(),o("div",me,[e("div",ve,[e("div",fe,[e("h3",ge,[t[15]||(t[15]=e("div",{class:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-bounce"},null,-1)),w(" Student Details ("+l(y.value.length)+") ",1)]),t[16]||(t[16]=e("div",{class:"h-[1px] bg-purple-200 w-full transition-all duration-500",style:{"max-width":"120px"}},null,-1))]),e("div",he,[e("div",we,[t[17]||(t[17]=e("span",{class:"absolute left-0 top-1/2 -translate-y-1/2 pl-2 text-purple-400"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),S(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),type:"text",placeholder:"QUICK SEARCH",class:"w-full border-0 bg-transparent pl-10 pr-0 py-2 text-gray-900 font-medium text-xs tracking-wider uppercase focus:ring-0 focus:outline-none transition placeholder:text-gray-600 placeholder:font-medium placeholder:opacity-100 placeholder:text-xs shadow-none",style:{"letter-spacing":"0.08em"}},null,512),[[I,c.value]]),t[18]||(t[18]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[1px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",{class:"flex items-center gap-2 ml-4"},[e("button",{onClick:E,class:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white text-sm font-medium rounded-full hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-sm hover:shadow-md transform origin-left hover:scale-105"},[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),w(" Export ",-1)])])])]),e("div",be,[e("div",ye,[e("table",_e,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Roll No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Student Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Gender"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ke,[(r(!0),o(z,null,B(y.value,s=>(r(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Ce,l(s.roll_number),1),e("td",je,[e("div",Me,[e("div",Se,[s.avatar?(r(),o("img",{key:0,src:s.avatar,alt:s.name,class:"h-10 w-10 rounded-full"},null,8,ze)):(r(),o("div",Be,l(s.name.charAt(0)),1))]),e("div",Re,[e("div",Ve,l(s.name),1),e("div",Le,l(s.class_name),1)])])]),e("td",Fe,l(s.gender),1),e("td",Ne,l(s.contact),1),e("td",Ee,[e("span",{class:K(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(s.status),3)]),t[20]||(t[20]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},[e("button",{class:"text-purple-600 hover:text-purple-900"},"View Details")],-1))]))),128))])])])])])):m("",!0),i.value?(r(),o("div",Te,[...t[22]||(t[22]=[e("div",{class:"text-center"},[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-200 border-t-purple-600"}),e("p",{class:"mt-2 text-gray-600"},"Generating report...")],-1)])])):m("",!0),!n.value&&!i.value?(r(),o("div",Ae,[...t[23]||(t[23]=[M('<div class="text-center" data-v-3b35654c><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-3b35654c><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-3b35654c></path></svg><h3 class="mt-2 text-sm font-medium text-gray-900" data-v-3b35654c>No class selected</h3><p class="mt-1 text-sm text-gray-500" data-v-3b35654c>Please select a class to generate the report.</p></div>',1)])])):m("",!0)]))}},Ue=T(De,[["__scopeId","data-v-3b35654c"]]);export{Ue as default};
