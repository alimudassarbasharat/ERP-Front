import{_ as Y,H as Z,P as ee,l as i,c as te,w as se,aP as le,aQ as ae,p as oe,a as n,o as r,d as e,b as $,C as N,i as b,t as a,J as ne,A as w,B as M,F as k,z as _,e as D,K as re,O as ie,R as de}from"./index-xvPUEXLW.js";const ue={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex flex-col items-center p-4 sm:p-6 lg:p-8"},pe={class:"w-full max-w-7xl mx-auto mt-2 mb-4 flex items-center justify-between bg-white/90 rounded-lg shadow-lg py-2 px-5 transition-all duration-500 border border-gray-200"},ce={class:"text-base font-medium text-gray-600 tracking-tight flex items-center gap-2"},xe={class:"w-full max-w-7xl mx-auto rounded-lg border border-gray-200 bg-white/90 px-4 sm:px-6 py-3 shadow-lg mb-6"},fe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},ve={class:"flex flex-col w-full"},me={class:"relative"},ge=["value"],be={class:"flex flex-col w-full"},he={class:"relative"},ye=["value"],we={class:"flex flex-col w-full"},ke={class:"relative"},_e=["value"],Ce={class:"w-full max-w-7xl mx-auto flex items-center justify-between mb-8"},Me={class:"flex flex-col items-start"},je={class:"text-base font-medium text-gray-900 tracking-tight flex items-center gap-2"},Se={key:0,class:"w-full"},Pe={key:1,class:"w-full"},Ae={key:2,class:"w-full"},Ne={class:"bg-white rounded-xl shadow-lg overflow-hidden"},Ve={class:"overflow-x-auto"},Be={class:"min-w-full"},Fe={class:"py-3 px-4 text-gray-900 font-normal text-sm"},Ee={class:"py-3 px-4"},Re={class:"flex items-center gap-3"},Te={class:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-sm font-medium"},Ue={class:"text-sm font-medium text-gray-900"},$e={class:"text-xs text-gray-500"},De={class:"py-3 px-4 text-gray-900 font-normal text-sm"},Ge={class:"py-3 px-4 text-center"},ze={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},He={class:"py-3 px-4 text-center"},Ie={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Ke={class:"py-3 px-4 text-center"},Le={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Oe={class:"py-3 px-4 text-center"},Je={class:"py-3 px-4 text-center"},Qe={class:"py-3 px-4 text-center"},qe={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},We={key:0,class:"w-full"},Xe={class:"flex flex-row items-center justify-between mb-4"},Ye={class:"text-gray-600 text-sm font-medium px-2"},Ze={class:"flex items-center gap-4"},et={class:"text-sm text-gray-600 font-medium flex items-center gap-1"},tt=["value"],st={class:"text-sm text-gray-600 font-medium flex items-center gap-1 mr-3"},lt=["max"],at={class:"flex justify-center"},ot={class:"flex items-center gap-2"},nt=["disabled"],rt={class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-600 text-white text-base font-bold shadow-md"},it=["disabled"],dt={__name:"ViewMarksheet",setup(ut){const j=Z(),C=de,G=ee(),p=i([]),V=i([]),S=i([]),v=i([]),m=i(""),f=i(""),d=i(""),c=i(!1),h=i(!1),o=i(1),g=i(20),x=i(0),y=i(1),P=te(()=>Math.ceil(x.value/g.value)),z=l=>{if(!l)return"All";const t=S.value.find(s=>String(s.id)===String(l));return t?t.name:"All"},H=l=>{if(!l)return"N/A";const t=l.first_name||"",s=l.last_name||"";return`${t.charAt(0)}${s.charAt(0)}`.toUpperCase()},I=l=>{if(!l)return"bg-white text-gray-900";const t=l.toUpperCase();return t==="A+"||t==="A"?"bg-green-100 text-green-800":t==="B+"||t==="B"?"bg-blue-100 text-blue-800":t==="C+"||t==="C"?"bg-yellow-100 text-yellow-800":t==="D"||t==="F"?"bg-red-100 text-red-800":"bg-purple-100 text-purple-800"},A=async()=>{c.value=!0;try{const[l,t,s]=await Promise.all([C.get("http://localhost:8000/api/classes"),C.get("http://localhost:8000/api/sections"),C.get("http://localhost:8000/api/exams")]);l.data.success&&(V.value=l.data.result||[]),t.data.success&&(S.value=t.data.result||[]),s.data.success&&(v.value=s.data.result||[]),v.value.length>0&&(d.value=v.value[0].id,await u()),h.value=!0}catch(l){console.error("Error loading initial data:",l),j.error("Failed to load initial data")}finally{c.value=!1}},u=async()=>{if(d.value){c.value=!0;try{const l={page:o.value,per_page:g.value};m.value&&(l.class_id=m.value),f.value&&(l.section_id=f.value),d.value&&(l.exam_id=d.value);const t=await C.get("http://localhost:8000/api/result-sheet",{params:l});t.data.success?(p.value=t.data.result.data||[],x.value=t.data.result.total||0,o.value=t.data.result.current_page||1):(p.value=[],x.value=0)}catch(l){console.error("Error fetching marksheets:",l),p.value=[],x.value=0,j.error("Failed to fetch marksheets")}finally{c.value=!1}}},K=async()=>{console.log("Class changed to:",m.value),await u()},L=async()=>{console.log("Section changed to:",f.value),await u()},O=async()=>{console.log("Exam changed to:",d.value),o.value=1,await u()},B=l=>{o.value=l,u()},J=()=>{o.value=1,u()},F=()=>{y.value>=1&&y.value<=P.value&&(o.value=y.value,u())},Q=async()=>{o.value=1,await u()},q=async()=>{console.log("Clearing all filters"),m.value="",f.value="",d.value="",p.value=[],x.value=0,o.value=1,v.value.length>0&&(d.value=v.value[0].id,await u())},W=()=>{j.info("Export functionality will be implemented soon!")};return se(()=>G.path,async l=>{l.includes("/exams/")&&(h.value=!1,await A())},{immediate:!0}),le(async()=>{h.value||await A()}),ae(async()=>{h.value=!1}),oe(async()=>{h.value||await A()}),(l,t)=>(r(),n("div",ue,[e("div",pe,[e("h2",ce,[t[7]||(t[7]=e("div",{class:"w-2 h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"},null,-1)),b(" View Marksheet - "+a(z(f.value)),1)]),t[8]||(t[8]=N('<nav class="flex items-center gap-2 text-base font-medium text-gray-500" data-v-f118b579><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-f118b579>Dashboard</span><span class="mx-2" data-v-f118b579>|</span><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-f118b579>Exams</span><span class="mx-2" data-v-f118b579>|</span><span class="text-gray-900 font-bold" data-v-f118b579>View Marksheet</span></nav>',1))]),t[33]||(t[33]=e("div",{class:"w-full max-w-7xl mx-auto mb-2"},[e("div",{class:"flex flex-col items-start"},[e("h3",{class:"text-base font-medium text-gray-900 tracking-tight"},"Filter Marksheets"),e("div",{class:"h-[2px] bg-purple-200 w-full transition-all duration-300",style:{"max-width":"140px"}})])],-1)),e("div",xe,[e("form",{class:"w-full",onSubmit:ne(Q,["prevent"])},[e("div",fe,[e("div",ve,[t[12]||(t[12]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Class",-1)),e("div",me,[w(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),onChange:K,class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[9]||(t[9]=e("option",{value:""},"All Classes",-1)),(r(!0),n(k,null,_(V.value,s=>(r(),n("option",{key:s.id,value:String(s.id)},a(s.name),9,ge))),128))],544),[[M,m.value]]),t[10]||(t[10]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[11]||(t[11]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",be,[t[16]||(t[16]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Section",-1)),e("div",he,[w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),onChange:L,class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[13]||(t[13]=e("option",{value:""},"All Sections",-1)),(r(!0),n(k,null,_(S.value,s=>(r(),n("option",{key:s.id,value:String(s.id)},a(s.name),9,ye))),128))],544),[[M,f.value]]),t[14]||(t[14]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[15]||(t[15]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",we,[t[20]||(t[20]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Exam",-1)),e("div",ke,[w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s),onChange:O,class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[17]||(t[17]=e("option",{value:""},"Select Exam",-1)),(r(!0),n(k,null,_(v.value,s=>(r(),n("option",{key:s.id,value:s.id},a(s.name),9,_e))),128))],544),[[M,d.value]]),t[18]||(t[18]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[19]||(t[19]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])])]),e("div",{class:"flex justify-end gap-2 mt-2"},[e("button",{type:"button",onClick:q,class:"h-9 px-8 rounded-full bg-gradient-to-r from-gray-500 to-slate-500 text-sm font-bold text-white shadow hover:from-gray-600 hover:to-slate-600 transition-all duration-300 transform hover:scale-105"},"Clear"),t[21]||(t[21]=e("button",{type:"submit",class:"h-9 px-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-sm font-bold text-white shadow hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105"},"Filter",-1))])],32)]),e("div",Ce,[e("div",Me,[e("h3",je,[t[22]||(t[22]=e("div",{class:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-bounce"},null,-1)),b(" Marksheet Results ("+a(p.value.length)+") ",1)]),t[23]||(t[23]=e("div",{class:"h-[2px] bg-purple-200 w-full transition-all duration-500",style:{"max-width":"160px"}},null,-1))]),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:W,class:"px-6 py-2 bg-gradient-to-r from-red-500 to-pink-500 text-white text-sm font-medium rounded-full hover:from-red-600 hover:to-pink-600 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 flex items-center gap-2"},[...t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),b(" Export PDF ",-1)])])])]),t[34]||(t[34]=e("div",{class:"w-full"},[e("div",{class:"h-[2px] w-full bg-purple-200 mb-4"})],-1)),c.value?(r(),n("div",Se,[...t[25]||(t[25]=[N('<div class="border border-gray-200 rounded-xl p-8 bg-white/40 shadow-sm" data-v-f118b579><div class="flex flex-col items-center justify-center py-12" data-v-f118b579><div class="relative mb-6" data-v-f118b579><div class="w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin" data-v-f118b579></div><div class="absolute inset-0 w-16 h-16 border-4 border-transparent border-r-indigo-500 rounded-full animate-ping opacity-20" data-v-f118b579></div></div><div class="text-center" data-v-f118b579><p class="text-gray-600 font-medium text-lg mb-1" data-v-f118b579>Loading Marksheets</p><p class="text-gray-500 text-sm font-normal" data-v-f118b579>Please wait while we fetch the marksheet data...</p><div class="flex justify-center mt-3 space-x-1" data-v-f118b579><div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" data-v-f118b579></div><div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-f118b579></div><div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-f118b579></div></div></div></div></div>',1)])])):!c.value&&p.value.length===0?(r(),n("div",Pe,[...t[26]||(t[26]=[N('<div class="border border-gray-200 rounded-xl p-8 bg-white/40 shadow-sm" data-v-f118b579><div class="flex flex-col items-center justify-center py-12" data-v-f118b579><div class="relative mb-6" data-v-f118b579><div class="w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center" data-v-f118b579><svg class="w-12 h-12 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-f118b579><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" data-v-f118b579></path></svg></div><div class="absolute -top-2 -right-2 w-4 h-4 bg-purple-300 rounded-full animate-ping opacity-30" data-v-f118b579></div><div class="absolute -bottom-2 -left-2 w-3 h-3 bg-indigo-300 rounded-full animate-pulse" data-v-f118b579></div></div><div class="w-full" data-v-f118b579><h3 class="text-gray-600 font-medium text-xl mb-2" data-v-f118b579>No Marksheets Found</h3><p class="text-gray-500 text-sm font-normal leading-relaxed mb-4" data-v-f118b579> No marksheets match your current filters. Try adjusting your search criteria or check if marksheets have been created for the selected exam. </p></div></div></div>',1)])])):!c.value&&p.value.length>0?(r(),n("div",Ae,[e("div",Ne,[e("div",Ve,[e("table",Be,[t[27]||(t[27]=e("thead",{class:"bg-gradient-to-r from-indigo-50 to-purple-50"},[e("tr",null,[e("th",{class:"text-left py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"#"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Student"),e("th",{class:"text-left py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Exam"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Total Marks"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Obtained"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Percentage"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Grade"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Status"),e("th",{class:"text-center py-3 px-4 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400"},"Position")])],-1)),e("tbody",null,[(r(!0),n(k,null,_(p.value,(s,X)=>{var E,R,T,U;return r(),n("tr",{key:s.id,class:"hover:bg-indigo-50 transition-colors border-b border-purple-200"},[e("td",Fe,a(X+1),1),e("td",Ee,[e("div",Re,[e("div",Te,a(H(s.student)),1),e("div",null,[e("div",Ue,a((E=s.student)==null?void 0:E.first_name)+" "+a((R=s.student)==null?void 0:R.last_name),1),e("div",$e,"Roll: "+a(((T=s.student)==null?void 0:T.roll_number)||"N/A"),1)])])]),e("td",De,a(((U=s.exam)==null?void 0:U.name)||"N/A"),1),e("td",Ge,[e("span",ze,a(s.total_marks),1)]),e("td",He,[e("span",Ie,a(s.total_mark_obtains),1)]),e("td",Ke,[e("span",Le,a(s.percentage)+a(s.percentage&&!s.percentage.includes("%")?"%":""),1)]),e("td",Oe,[e("span",{class:D(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",I(s.grade)])},a(s.grade||"N/A"),3)]),e("td",Je,[e("span",{class:D(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.status==="Pass"?"bg-green-100 text-green-800":s.status==="Fail"?"bg-red-100 text-red-800":"bg-white text-gray-900"])},a(s.status||"N/A"),3)]),e("td",Qe,[e("span",qe,a(s.position||"N/A"),1)])])}),128))])])])]),!c.value&&x.value>0?(r(),n("div",We,[e("div",Xe,[e("div",Ye," Showing "+a((o.value-1)*g.value+1)+" to "+a(Math.min(o.value*g.value,x.value))+" of "+a(x.value)+" entries ",1),e("div",Ze,[e("label",et,[t[28]||(t[28]=b(" Per page: ",-1)),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>g.value=s),onChange:J,class:"rounded-md border border-purple-200 bg-white px-2 py-1 text-xs font-semibold text-purple-700 focus:ring-2 focus:ring-purple-300"},[(r(),n(k,null,_([10,20,50,100],s=>e("option",{key:s,value:s},a(s),9,tt)),64))],544),[[M,g.value]])]),e("label",st,[t[30]||(t[30]=b(" Go to page: ",-1)),w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>y.value=s),type:"number",min:"1",max:P.value,class:"w-16 rounded-md border border-purple-200 px-2 py-1 text-xs font-semibold text-purple-700 focus:ring-2 focus:ring-purple-300",onKeyup:ie(F,["enter"])},null,40,lt),[[re,y.value,void 0,{number:!0}]]),e("button",{onClick:F,class:"ml-1 px-2 py-1 rounded-md bg-purple-500 text-white text-xs font-semibold hover:bg-purple-600 transition-all flex items-center gap-1"},[...t[29]||(t[29]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1),b(" Go ",-1)])])])])]),e("div",at,[e("div",ot,[e("button",{class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 text-xl font-bold shadow-sm transition-all duration-200 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:o.value===1,onClick:t[5]||(t[5]=s=>B(o.value-1)),"aria-label":"Previous"},[...t[31]||(t[31]=[e("span",null,"←",-1)])],8,nt),e("span",rt,a(o.value),1),e("button",{class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 text-xl font-bold shadow-sm transition-all duration-200 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:o.value===P.value,onClick:t[6]||(t[6]=s=>B(o.value+1)),"aria-label":"Next"},[...t[32]||(t[32]=[e("span",null,"→",-1)])],8,it)])])])):$("",!0)])):$("",!0)]))}},ct=Y(dt,[["__scopeId","data-v-f118b579"]]);export{ct as default};
