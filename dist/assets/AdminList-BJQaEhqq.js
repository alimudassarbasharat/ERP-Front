import{_ as ea,P as la,M as aa,H as sa,l as r,c as Se,w as Ue,p as ta,y,N as oa,a as L,o as g,d as n,h as l,D as s,u as d,S as se,U as $e,A as we,V as na,f as A,i as m,t as v,W as el,X as ia,Y as Le,Z as Ne,J as N,$ as ke,a0 as ll,a1 as al,a2 as sl,F as qe,e as tl,a3 as ol,a4 as ra,a5 as ua,a6 as da,z as nl,E as C,L as Ie}from"./index-xvPUEXLW.js";const ma={class:"admin-list"},ca={class:"page-header"},pa={class:"header-actions"},va={class:"table-operations"},fa={class:"role-count"},ga={class:"pagination-container"},_a={class:"form-header"},ya={class:"form-subtitle"},ba={class:"form-section"},Ca={class:"section-title"},ha={class:"form-grid"},wa={class:"form-section"},ka={class:"section-title"},Va={class:"form-grid"},Pa={class:"dialog-footer"},Aa={class:"profile-header"},Ra={class:"profile-avatar-container"},Da={class:"profile-title"},Fa={class:"profile-meta"},xa={class:"member-since"},za={class:"profile-details"},Ea={class:"details-section"},Sa={class:"section-title"},Ua={class:"detail-grid"},$a={class:"detail-item"},La={class:"detail-content"},Na={class:"value"},qa={class:"detail-item"},Ia={class:"detail-content"},Ma={class:"value"},Ba={class:"detail-item"},Ta={class:"detail-content"},Oa={class:"value"},Wa={class:"details-section"},ja={class:"section-title"},Ka={class:"detail-grid"},Ga={class:"detail-item"},Ha={class:"detail-content"},Ja={class:"detail-item"},Qa={class:"detail-content"},Xa={class:"value"},Ya={class:"detail-item"},Za={class:"detail-content"},es={key:1,class:"roles-section"},ls={key:0,class:"roles-loading"},as={class:"dialog-footer"},ss={key:0,class:"roles-loading"},ts={class:"role-header"},os={class:"header-actions"},ns={class:"pagination-container"},is={class:"dialog-footer"},rs={class:"permission-header"},us={class:"pagination-container"},ds={class:"dialog-footer"},ms={class:"pagination-container"},cs={key:0,class:"permissions-loading"},ps={class:"permissions-header"},vs={class:"permissions-grid"},fs={class:"dialog-footer"},gs={key:0,class:"role-loading"},_s={class:"roles-header"},ys={class:"roles-grid"},bs={class:"dialog-footer"},Cs={__name:"AdminList",setup(hs){const il=la();aa();const u=sa(),R=r(!1),ue=r(""),de=r(""),me=r(""),j=r(1),te=r(10),Me=r(0),q=r(!1),$=r(!1),Be=r([]),Ve=r(""),oe=r(!1),D=r(null),h=r({name:"",email:"",phone_number:"",role_name:"",status:"",created_at:"",last_login_at:"",location:"",two_factor_enabled:!1}),Te=r({id:null,merchant_id:"",name:"",email:"",phone_number:"",location:"",role_name:"",password:"",status:"active"}),f=Se({get:()=>$.value&&D.value?{id:D.value.id,merchant_id:D.value.merchant_id||"",name:D.value.name||"",email:D.value.email||"",phone_number:D.value.phone_number||"",location:D.value.location||"",role_name:D.value.role_name||"",status:D.value.status||"active",password:""}:Te.value,set:a=>{Te.value=a}}),rl={name:[{required:!0,message:"Please enter name",trigger:"blur"}],email:[{required:!0,message:"Please enter email",trigger:"blur"},{type:"email",message:"Please enter a valid email",trigger:"blur"}],phone_number:[{required:!0,message:"Please enter phone number",trigger:"blur"},{pattern:/^[0-9+\-\s()]*$/,message:"Please enter a valid phone number",trigger:"blur"}],location:[{required:!0,message:"Please enter location",trigger:"blur"}],role_name:[{required:!0,message:"Please select role",trigger:"change"}],password:[{required:!0,message:"Please enter password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}],status:[{required:!0,message:"Please select status",trigger:"change"}]},Pe=r(null),E=async()=>{try{R.value=!0;const a=await C.get("/admins",{params:{page:j.value,per_page:te.value,search:ue.value,email:de.value,status:me.value,orderBy:Ve.value}});a.data&&a.data.result&&(Be.value=a.data.result.data,Me.value=a.data.result.total||0)}catch(a){u.error("Failed to fetch admins"),console.error("Error fetching admins:",a)}finally{R.value=!1}},ul=async()=>{var a,e;if(Pe.value)try{if(await Pe.value.validate(),R.value=!0,$.value){const o={...f.value,role_id:f.value.role_name==="Super Admin"?1:2};delete o.role_name,await C.post(`/admins/update/${f.value.id}`,o),u.success("Admin updated successfully")}else{const o={...f.value,role_id:f.value.role_name==="Super Admin"?1:2};delete o.role_name,await C.post("/admins/store",o),u.success("Admin created successfully")}q.value=!1,E()}catch(o){if((e=(a=o.response)==null?void 0:a.data)!=null&&e.errors){const i=Object.values(o.response.data.errors).flat();u.error(i.join(`
`))}else o.name==="ValidationError"?u.error("Please fill in all required fields correctly"):u.error($.value?"Failed to update admin":"Failed to create admin");console.error("Error submitting form:",o)}finally{R.value=!1}},dl=async a=>{try{await Ie.confirm(`Are you sure you want to delete admin ${a.name}?`,"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}),R.value=!0,await C.get(`/admins/delete/${a.id}`),u.success("Admin deleted successfully"),E()}catch(e){e!=="cancel"&&(u.error("Failed to delete admin"),console.error("Error deleting admin:",e))}finally{R.value=!1}};Ue(()=>il.path,a=>{a==="/admin/list"&&E()},{immediate:!0}),Ue([ue,de,me],()=>{j.value=1,E()}),Ue([j,te],()=>{E()}),ta(()=>{E()});const ml=()=>{$.value=!1,q.value=!0,f.value={id:null,merchant_id:"",name:"",email:"",phone_number:"",location:"",role_name:"",password:"",status:"active"}},Oe=a=>{$.value=!0,q.value=!0,f.value={id:null,merchant_id:"",name:"",email:"",phone_number:"",location:"",role_name:"",password:"",status:"active"},setTimeout(()=>{f.value={id:a.id,merchant_id:a.merchant_id||"",name:a.name||"",email:a.email||"",phone_number:a.phone_number||"",location:a.location||"",role_name:a.role_name||"",status:a.status||"active",password:""},console.log("Form data set:",f.value)},0)},cl=a=>{te.value=a,E()},pl=a=>{j.value=a,E()},vl=({prop:a,order:e})=>{e?Ve.value=e==="ascending"?a:`-${a}`:Ve.value="id",E()},fl=async a=>{h.value={id:a.id,name:a.name||"",email:a.email||"",phone_number:a.phone_number||"",role_name:a.role_name||"",status:a.status||"",created_at:a.created_at||"",last_login_at:a.last_login_at||"",location:a.location||"",two_factor_enabled:a.two_factor_enabled||!1},oe.value=!0,ee.value=!1},ne=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",gl=a=>{a.target.classList.contains("el-overlay")&&(q.value=!1)},_l=a=>{a.target.classList.contains("el-overlay")&&(oe.value=!1)},ce=r(!1),B=r(!1),I=r(!1),x=r([]),w=r(!1),Ae=r(null),K=r(1),G=r(10),Re=r(0),k=r({id:null,name:"",description:""}),yl={name:[{required:!0,message:"Please enter role name",trigger:"blur"},{min:3,message:"Role name must be at least 3 characters",trigger:"blur"}],description:[{required:!0,message:"Please enter role description",trigger:"blur"},{validator:(a,e,o)=>{e&&e.trim().split(/\s+/).length>200?o(new Error("Description cannot exceed 200 words")):o()},trigger:"blur"}]},We=Se(()=>k.value.description?k.value.description.trim().split(/\s+/).length:0),bl=async()=>{ce.value=!0,await M()},M=async()=>{try{w.value=!0;const a=await C.get("/roles",{params:{page:K.value,per_page:G.value}});a.data&&a.data.data&&(x.value=a.data.data.data,Re.value=a.data.data.total||0)}catch(a){u.error("Failed to fetch roles"),console.error("Error fetching roles:",a)}finally{w.value=!1}},Cl=()=>{I.value=!1,k.value={id:null,name:"",description:""},B.value=!0},hl=async a=>{try{w.value=!0,Fe.value=a,k.value={id:a.id,name:a.name,description:a.description},I.value=!0,B.value=!0}catch(e){u.error("Failed to load role data"),console.error("Error loading role:",e)}finally{w.value=!1}},wl=async a=>{try{await Ie.confirm(`Are you sure you want to delete role ${a.name}?`,"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}),w.value=!0,await C.get(`/roles/delete/${a.id}`,{params:{id:a.id}}),u.success("Role deleted successfully"),M()}catch(e){e!=="cancel"&&(u.error("Failed to delete role"),console.error("Error deleting role:",e))}finally{w.value=!1}},kl=async()=>{var a,e;if(Ae.value)try{if(await Ae.value.validate(),w.value=!0,I.value){const o={name:k.value.name,description:k.value.description};await C.post(`/roles/update/${k.value.id}`,o),u.success("Role updated successfully")}else{const o={name:k.value.name,description:k.value.description};await C.post("/roles/store",o),u.success("Role created successfully")}B.value=!1,await M()}catch(o){(e=(a=o.response)==null?void 0:a.data)!=null&&e.message?u.error(o.response.data.message):o.name==="ValidationError"?u.error("Please fill in all required fields correctly"):u.error(I.value?"Failed to update role":"Failed to create role"),console.error("Error submitting role form:",o)}finally{w.value=!1}},Vl=a=>{a.target.classList.contains("el-overlay")&&(ce.value=!1)},Pl=a=>{a.target.classList.contains("el-overlay")&&(B.value=!1)},je=a=>{G.value=a,M()},Ke=a=>{K.value=a,M()},pe=r(!1),T=r(!1),O=r(!1),Ge=r([]),V=r(!1),De=r(null),ve=r(1),fe=r(10),He=r(0),S=r({id:null,name:"",guard_name:"web"}),Al={name:[{required:!0,message:"Please enter permission name",trigger:"blur"},{min:3,message:"Permission name must be at least 3 characters",trigger:"blur"}],guard_name:[{required:!0,message:"Please enter guard name",trigger:"blur"}]},Rl=async()=>{pe.value=!0,await ie()},ie=async()=>{try{V.value=!0;const a=await C.get("/permissions",{params:{page:ve.value,per_page:fe.value}});a.data&&a.data.data&&(Ge.value=a.data.data.data,He.value=a.data.data.total||0)}catch(a){u.error("Failed to fetch permissions"),console.error("Error fetching permissions:",a)}finally{V.value=!1}},Dl=()=>{O.value=!1,S.value={id:null,name:"",guard_name:"web"},T.value=!0},Fl=a=>{O.value=!0,S.value={id:a.id,name:a.name,guard_name:a.guard_name},T.value=!0},xl=async a=>{try{await Ie.confirm(`Are you sure you want to delete permission ${a.name}?`,"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}),V.value=!0,await C.get(`/permissions/delete/${a.id}`),u.success("Permission deleted successfully"),ie()}catch(e){e!=="cancel"&&(u.error("Failed to delete permission"),console.error("Error deleting permission:",e))}finally{V.value=!1}},zl=async()=>{var a,e;if(De.value)try{await De.value.validate(),V.value=!0,O.value?(await C.post(`/permissions/update/${S.value.id}`,S.value),u.success("Permission updated successfully")):(await C.post("/permissions/store",S.value),u.success("Permission created successfully")),T.value=!1,await ie()}catch(o){(e=(a=o.response)==null?void 0:a.data)!=null&&e.message?u.error(o.response.data.message):o.name==="ValidationError"?u.error("Please fill in all required fields correctly"):u.error(O.value?"Failed to update permission":"Failed to create permission"),console.error("Error submitting permission form:",o)}finally{V.value=!1}},El=a=>{fe.value=a,ie()},Sl=a=>{ve.value=a,ie()},Ul=a=>{a.target.classList.contains("el-overlay")&&(pe.value=!1)},$l=a=>{a.target.classList.contains("el-overlay")&&(T.value=!1)},ge=r(!1),Fe=r(null),H=r(!1),Ll=r(null),W=r([]),_=r({role_id:null,permissions:[]}),J=r(!1),Q=r(!1),Nl=async()=>{try{ge.value=!0,await M()}catch(a){console.error("Error showing role permission dialog:",a),u.error("Failed to open role permissions dialog")}},ql=async a=>{try{Fe.value=a,_.value={role_id:a.id,permissions:[]},H.value=!0,V.value=!0,J.value=!1,Q.value=!1;const e=await C.get("/roles/permissions/all");if(e.data&&e.data.data){W.value=e.data.data;const o=await C.get(`/roles/${a.id}/roles`,{permissions:W.value.map(i=>i.id)});if(o.data&&o.data.data){_.value.permissions=o.data.data.map(z=>z.id);const i=_.value.permissions.length,c=W.value.length;J.value=i===c,Q.value=i>0&&i<c}}}catch(e){console.error("Error showing assign permissions dialog:",e),u.error("Failed to load permissions")}finally{V.value=!1}},Il=async()=>{var a,e,o,i;if(_.value.role_id)try{V.value=!0,_.value.permissions||(_.value.permissions=[]),Array.isArray(_.value.permissions)||(_.value.permissions=[]);const c={permissions:_.value.permissions};if(console.log("Submitting permissions payload:",c),!_.value.role_id)throw new Error("Role ID is required");await C.post(`/roles/${_.value.role_id}/permissions`,c),u.success("Permissions assigned successfully"),H.value=!1,await M()}catch(c){if(console.error("Error response:",c.response),(e=(a=c.response)==null?void 0:a.data)!=null&&e.errors){const z=Object.values(c.response.data.errors).flat();u.error(z.join(`
`))}else(i=(o=c.response)==null?void 0:o.data)!=null&&i.message?u.error(c.response.data.message):u.error("Failed to assign permissions")}finally{V.value=!1}},Ml=a=>{_.value.permissions=a?W.value.map(e=>e.id):[],Q.value=!1},Bl=a=>{_.value.permissions=a;const e=a.length,o=W.value.length;J.value=e===o,Q.value=e>0&&e<o},Tl=(a,e)=>{e?_.value.permissions.includes(a)||_.value.permissions.push(a):_.value.permissions=_.value.permissions.filter(c=>c!==a);const o=_.value.permissions.length,i=W.value.length;J.value=o===i,Q.value=o>0&&o<i},Ol=a=>{a.target.classList.contains("el-overlay")&&(ge.value=!1)},Wl=a=>{a.target.classList.contains("el-overlay")&&(H.value=!1)},X=r(!1),xe=r(null),P=r({roles:[]}),Y=r(!1),Z=r(!1),jl=async a=>{try{D.value=a,X.value=!0,w.value=!0,x.value.length===0&&await M();const e=await C.get(`/admins/${a.id}/roles`);e.data&&e.data.data?P.value.roles=e.data.data.map(c=>c.name):P.value.roles=[],Y.value=!1,Z.value=!1;const o=P.value.roles.length,i=x.value.length;Y.value=o===i,Z.value=o>0&&o<i}catch(e){console.error("Error showing assign role dialog:",e),u.error("Failed to load roles")}finally{w.value=!1}},Kl=a=>{P.value.roles=a?x.value.map(e=>e.name):[],Z.value=!1},Gl=a=>{const e=a.length,o=x.value.length;Y.value=e===o,Z.value=e>0&&e<o},Hl=(a,e)=>{e?P.value.roles.includes(a)||P.value.roles.push(a):P.value.roles=P.value.roles.filter(c=>c!==a);const o=P.value.roles.length,i=x.value.length;Y.value=o===i,Z.value=o>0&&o<i},Jl=async()=>{var a,e;if(xe.value)try{await xe.value.validate(),w.value=!0;const o=x.value.filter(i=>P.value.roles.includes(i.name)).map(i=>i.id);await C.post("/roles/assign",{id:D.value.id,roles:o}),u.success("Roles assigned successfully"),X.value=!1,await E()}catch(o){(e=(a=o.response)==null?void 0:a.data)!=null&&e.message?u.error(o.response.data.message):u.error("Failed to assign roles"),console.error("Error assigning roles:",o)}finally{w.value=!1}},Ql=a=>{a.target.classList.contains("el-overlay")&&(X.value=!1)};Se(()=>x.value.length);const Je=r(!1),_e=r([]),ee=r(!1),Xl=async()=>{if(!ee.value)try{R.value=!0;const a=await C.get(`/admins/${h.value.id}/roles`);a.data&&a.data.data?_e.value=a.data.data:_e.value=[]}catch(a){console.error("Error fetching assigned roles:",a),u.error("Failed to load assigned roles")}finally{R.value=!1}ee.value=!ee.value};return(a,e)=>{var Ye,Ze;const o=y("el-icon"),i=y("el-button"),c=y("el-input"),z=y("el-option"),ze=y("el-select"),p=y("el-table-column"),le=y("el-tag"),Ee=y("el-button-group"),ae=y("el-table"),ye=y("el-pagination"),Yl=y("el-card"),Qe=y("el-avatar"),F=y("el-form-item"),re=y("el-form"),U=y("el-dialog"),Zl=y("el-divider"),be=y("el-skeleton"),Ce=y("el-checkbox"),Xe=y("el-checkbox-group"),he=oa("loading");return g(),L("div",ma,[n("div",ca,[e[55]||(e[55]=n("h2",null,"Admin Management",-1)),n("div",pa,[l(i,{type:"primary",onClick:Rl},{default:s(()=>[l(o,null,{default:s(()=>[l(d(se))]),_:1}),e[51]||(e[51]=n("span",{class:"button-text"},"Manage Permissions",-1))]),_:1}),l(i,{type:"primary",onClick:bl},{default:s(()=>[l(o,null,{default:s(()=>[l(d(se))]),_:1}),e[52]||(e[52]=n("span",{class:"button-text"},"Manage Roles",-1))]),_:1}),l(i,{type:"primary",onClick:Nl},{default:s(()=>[l(o,null,{default:s(()=>[l(d(se))]),_:1}),e[53]||(e[53]=n("span",{class:"button-text"},"Role Permissions",-1))]),_:1}),l(i,{type:"primary",onClick:ml},{default:s(()=>[l(o,null,{default:s(()=>[l(d($e))]),_:1}),e[54]||(e[54]=n("span",{class:"button-text"},"Add Admin",-1))]),_:1})])]),l(Yl,null,{default:s(()=>[n("div",va,[l(c,{modelValue:ue.value,"onUpdate:modelValue":e[0]||(e[0]=t=>ue.value=t),placeholder:"Search admins...",class:"search-input","prefix-icon":d(na)},null,8,["modelValue","prefix-icon"]),l(c,{modelValue:de.value,"onUpdate:modelValue":e[1]||(e[1]=t=>de.value=t),placeholder:"Filter by email...",class:"search-input"},null,8,["modelValue"]),l(ze,{modelValue:me.value,"onUpdate:modelValue":e[2]||(e[2]=t=>me.value=t),placeholder:"Filter by Status",clearable:"",class:"search-input"},{default:s(()=>[l(z,{label:"Active",value:"active"}),l(z,{label:"Inactive",value:"inactive"})]),_:1},8,["modelValue"])]),we((g(),A(ae,{data:Be.value,style:{width:"100%"},onSortChange:vl,"default-sort":{prop:"id",order:"descending"}},{default:s(()=>[l(p,{prop:"id",label:"ID",width:"80",sortable:"custom"}),l(p,{prop:"name",label:"Name",sortable:"custom"}),l(p,{prop:"email",label:"Email",sortable:"custom"}),l(p,{prop:"status",label:"Status",width:"100",sortable:"custom"},{default:s(({row:t})=>[l(le,{type:t.status==="active"?"success":"danger"},{default:s(()=>[m(v(t.status),1)]),_:2},1032,["type"])]),_:1}),l(p,{label:"Actions",width:"200",fixed:"right"},{default:s(({row:t})=>[l(Ee,null,{default:s(()=>[l(i,{type:"primary",size:"small",onClick:b=>jl(t)},{default:s(()=>{var b;return[l(o,null,{default:s(()=>[l(d(el))]),_:1}),n("span",fa,"("+v(((b=t.roles)==null?void 0:b.length)||0)+")",1)]}),_:2},1032,["onClick"]),l(i,{type:"primary",size:"small",onClick:b=>fl(t)},{default:s(()=>[l(o,null,{default:s(()=>[l(d(ia))]),_:1})]),_:1},8,["onClick"]),l(i,{type:"primary",size:"small",onClick:b=>Oe(t)},{default:s(()=>[l(o,null,{default:s(()=>[l(d(Le))]),_:1})]),_:1},8,["onClick"]),l(i,{type:"danger",size:"small",onClick:b=>dl(t)},{default:s(()=>[l(o,null,{default:s(()=>[l(d(Ne))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[he,R.value]]),n("div",ga,[l(ye,{"current-page":j.value,"onUpdate:currentPage":e[3]||(e[3]=t=>j.value=t),"page-size":te.value,"onUpdate:pageSize":e[4]||(e[4]=t=>te.value=t),"page-sizes":[10,20,50,100],total:Me.value,layout:"total, sizes, prev, pager, next",onSizeChange:cl,onCurrentChange:pl},null,8,["current-page","page-size","total"])])]),_:1}),l(U,{modelValue:q.value,"onUpdate:modelValue":e[13]||(e[13]=t=>q.value=t),title:$.value?"Edit Admin":"Create Admin",width:"600px","close-on-click-modal":!0,"close-on-press-escape":!0,class:"admin-form-dialog",onClick:gl},{footer:s(()=>[n("span",Pa,[l(i,{onClick:e[12]||(e[12]=t=>q.value=!1)},{default:s(()=>[...e[58]||(e[58]=[m("Cancel",-1)])]),_:1}),l(i,{type:"primary",onClick:ul,loading:R.value},{default:s(()=>[m(v($.value?"Update":"Create"),1)]),_:1},8,["loading"])])]),default:s(()=>[n("div",{class:"form-container",onClick:e[11]||(e[11]=N(()=>{},["stop"]))},[n("div",_a,[l(Qe,{size:64,class:"form-avatar"},{default:s(()=>{var t,b;return[m(v(((b=(t=f.value.name)==null?void 0:t.charAt(0))==null?void 0:b.toUpperCase())||"A"),1)]}),_:1}),n("h3",null,v($.value?"Edit Admin Profile":"Create New Admin"),1),n("p",ya,v($.value?"Update the admin information below":"Fill in the information to create a new admin"),1)]),(g(),A(re,{ref_key:"adminFormRef",ref:Pe,model:f.value,rules:rl,"label-position":"top",key:q.value,class:"admin-form"},{default:s(()=>[n("div",ba,[n("h4",Ca,[l(o,null,{default:s(()=>[l(d(ke))]),_:1}),e[56]||(e[56]=m(" Personal Information ",-1))]),n("div",ha,[l(F,{label:"Name",prop:"name"},{default:s(()=>[l(c,{modelValue:f.value.name,"onUpdate:modelValue":e[5]||(e[5]=t=>f.value.name=t),placeholder:"Enter name"},{prefix:s(()=>[l(o,null,{default:s(()=>[l(d(ke))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(F,{label:"Email",prop:"email"},{default:s(()=>[l(c,{modelValue:f.value.email,"onUpdate:modelValue":e[6]||(e[6]=t=>f.value.email=t),placeholder:"Enter email"},{prefix:s(()=>[l(o,null,{default:s(()=>[l(d(ll))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(F,{label:"Phone Number",prop:"phone_number"},{default:s(()=>[l(c,{modelValue:f.value.phone_number,"onUpdate:modelValue":e[7]||(e[7]=t=>f.value.phone_number=t),placeholder:"Enter phone number"},{prefix:s(()=>[l(o,null,{default:s(()=>[l(d(al))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(F,{label:"Location",prop:"location"},{default:s(()=>[l(c,{modelValue:f.value.location,"onUpdate:modelValue":e[8]||(e[8]=t=>f.value.location=t),placeholder:"Enter location"},{prefix:s(()=>[l(o,null,{default:s(()=>[l(d(sl))]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),n("div",wa,[n("h4",ka,[l(o,null,{default:s(()=>[l(d(se))]),_:1}),e[57]||(e[57]=m(" Account Settings ",-1))]),n("div",Va,[l(F,{label:"Role",prop:"role_name"},{default:s(()=>[l(ze,{modelValue:f.value.role_name,"onUpdate:modelValue":e[9]||(e[9]=t=>f.value.role_name=t),placeholder:"Select role",class:"full-width"},{default:s(()=>[l(z,{label:"Super Admin",value:"Super Admin"}),l(z,{label:"Admin",value:"Admin"}),l(z,{label:"Manager",value:"Manager"})]),_:1},8,["modelValue"])]),_:1}),l(F,{label:"Status",prop:"status"},{default:s(()=>[l(ze,{modelValue:f.value.status,"onUpdate:modelValue":e[10]||(e[10]=t=>f.value.status=t),placeholder:"Select status",class:"full-width"},{default:s(()=>[l(z,{label:"Active",value:"active"}),l(z,{label:"Inactive",value:"inactive"})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["model"]))])]),_:1},8,["modelValue","title"]),l(U,{modelValue:oe.value,"onUpdate:modelValue":e[17]||(e[17]=t=>oe.value=t),title:"Admin Details",width:"700px",class:"admin-view-dialog","close-on-click-modal":!0,"close-on-press-escape":!0,onClick:_l},{footer:s(()=>[n("span",as,[l(i,{onClick:e[15]||(e[15]=t=>oe.value=!1)},{default:s(()=>[...e[68]||(e[68]=[m("Close",-1)])]),_:1}),l(i,{type:"primary",onClick:e[16]||(e[16]=t=>Oe(h.value))},{default:s(()=>[...e[69]||(e[69]=[m("Edit Profile",-1)])]),_:1}),l(i,{type:"warning",onClick:Xl},{default:s(()=>[l(o,null,{default:s(()=>[l(d(el))]),_:1}),m(" "+v(ee.value?"View Profile":"Assigned Roles"),1)]),_:1})])]),default:s(()=>[n("div",{class:"admin-profile",onClick:e[14]||(e[14]=N(()=>{},["stop"]))},[ee.value?(g(),L("div",es,[e[67]||(e[67]=n("h3",null,"Assigned Roles",-1)),R.value?(g(),L("div",ls,[l(be,{rows:3,animated:""})])):(g(),A(ae,{key:1,data:_e.value,style:{width:"100%"}},{default:s(()=>[l(p,{prop:"name",label:"Role Name"}),l(p,{prop:"description",label:"Description"}),l(p,{prop:"created_at",label:"Assigned Date",width:"180"},{default:s(({row:t})=>[m(v(ne(t.created_at)),1)]),_:1})]),_:1},8,["data"]))])):(g(),L(qe,{key:0},[n("div",Aa,[n("div",Ra,[l(Qe,{size:80,class:"profile-avatar"},{default:s(()=>[l(o,null,{default:s(()=>[l(d(ke))]),_:1})]),_:1}),n("div",{class:tl(["status-indicator",h.value.status])},[l(o,null,{default:s(()=>[h.value.status==="active"?(g(),A(d(ol),{key:0})):(g(),A(d(ra),{key:1}))]),_:1})],2)]),n("div",Da,[n("div",Fa,[l(le,{type:h.value.role_name==="Super Admin"?"danger":"primary",class:"role-tag"},{default:s(()=>[m(v(h.value.role_name==="Super Admin"?"Super Admin":h.value.role_name),1)]),_:1},8,["type"]),n("span",xa,"Member since "+v(ne(h.value.created_at)),1)])])]),l(Zl),n("div",za,[n("div",Ea,[n("h4",Sa,[l(o,null,{default:s(()=>[l(d(ke))]),_:1}),e[59]||(e[59]=m(" Personal Information ",-1))]),n("div",Ua,[n("div",$a,[l(o,null,{default:s(()=>[l(d(ll))]),_:1}),n("div",La,[e[60]||(e[60]=n("span",{class:"label"},"Email Address",-1)),n("span",Na,v(h.value.email),1)])]),n("div",qa,[l(o,null,{default:s(()=>[l(d(al))]),_:1}),n("div",Ia,[e[61]||(e[61]=n("span",{class:"label"},"Phone Number",-1)),n("span",Ma,v(h.value.phone_number),1)])]),n("div",Ba,[l(o,null,{default:s(()=>[l(d(sl))]),_:1}),n("div",Ta,[e[62]||(e[62]=n("span",{class:"label"},"Location",-1)),n("span",Oa,v(h.value.location||"Not specified"),1)])])])]),n("div",Wa,[n("h4",ja,[l(o,null,{default:s(()=>[l(d(se))]),_:1}),e[63]||(e[63]=m(" Account Information ",-1))]),n("div",Ka,[n("div",Ga,[l(o,null,{default:s(()=>[l(d(ol))]),_:1}),n("div",Ha,[e[64]||(e[64]=n("span",{class:"label"},"Account Status",-1)),l(le,{type:h.value.status==="active"?"success":"danger",class:"status-tag"},{default:s(()=>[m(v(h.value.status),1)]),_:1},8,["type"])])]),n("div",Ja,[l(o,null,{default:s(()=>[l(d(ua))]),_:1}),n("div",Qa,[e[65]||(e[65]=n("span",{class:"label"},"Last Login",-1)),n("span",Xa,v(ne(h.value.last_login_at)||"Never"),1)])]),n("div",Ya,[l(o,null,{default:s(()=>[l(d(da))]),_:1}),n("div",Za,[e[66]||(e[66]=n("span",{class:"label"},"Two-Factor Auth",-1)),l(le,{type:h.value.two_factor_enabled?"success":"info",size:"small"},{default:s(()=>[m(v(h.value.two_factor_enabled?"Enabled":"Disabled"),1)]),_:1},8,["type"])])])])])])],64))])]),_:1},8,["modelValue"]),l(U,{modelValue:Je.value,"onUpdate:modelValue":e[18]||(e[18]=t=>Je.value=t),title:"Assigned Roles",width:"600px","close-on-click-modal":!0,"close-on-press-escape":!0},{default:s(()=>[R.value?(g(),L("div",ss,[l(be,{rows:3,animated:""})])):(g(),A(ae,{key:1,data:_e.value,style:{width:"100%"}},{default:s(()=>[l(p,{prop:"name",label:"Role Name"}),l(p,{prop:"description",label:"Description"}),l(p,{prop:"created_at",label:"Assigned Date",width:"180"},{default:s(({row:t})=>[m(v(ne(t.created_at)),1)]),_:1})]),_:1},8,["data"]))]),_:1},8,["modelValue"]),l(U,{modelValue:ce.value,"onUpdate:modelValue":e[22]||(e[22]=t=>ce.value=t),title:"Role Management",width:"800px","close-on-click-modal":!0,"close-on-press-escape":!0,class:"role-dialog",onClick:Vl},{default:s(()=>[n("div",{class:"role-container",onClick:e[21]||(e[21]=N(()=>{},["stop"]))},[n("div",ts,[e[71]||(e[71]=n("h3",null,"System Roles",-1)),n("div",os,[l(i,{type:"primary",onClick:Cl},{default:s(()=>[l(o,null,{default:s(()=>[l(d($e))]),_:1}),e[70]||(e[70]=m(" Add Role ",-1))]),_:1})])]),we((g(),A(ae,{data:x.value,style:{width:"100%"}},{default:s(()=>[l(p,{prop:"id",label:"ID",width:"80"}),l(p,{prop:"name",label:"Role Name"}),l(p,{prop:"description",label:"Description"}),l(p,{prop:"permission_count",label:"Permissions",width:"120"},{default:s(({row:t})=>[l(le,{type:"info",size:"small"},{default:s(()=>[m(v(t.permission_count||0)+" Permissions ",1)]),_:2},1024)]),_:1}),l(p,{label:"Actions",width:"120",fixed:"right"},{default:s(({row:t})=>[l(Ee,null,{default:s(()=>[l(i,{type:"primary",size:"small",onClick:b=>hl(t)},{default:s(()=>[l(o,null,{default:s(()=>[l(d(Le))]),_:1})]),_:1},8,["onClick"]),l(i,{type:"danger",size:"small",onClick:b=>wl(t),disabled:t.name==="super-admin"},{default:s(()=>[l(o,null,{default:s(()=>[l(d(Ne))]),_:1})]),_:1},8,["onClick","disabled"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[he,w.value]]),n("div",ns,[l(ye,{"current-page":K.value,"onUpdate:currentPage":e[19]||(e[19]=t=>K.value=t),"page-size":G.value,"onUpdate:pageSize":e[20]||(e[20]=t=>G.value=t),"page-sizes":[10,20,50,100],total:Re.value,layout:"total, sizes, prev, pager, next",onSizeChange:je,onCurrentChange:Ke},null,8,["current-page","page-size","total"])])])]),_:1},8,["modelValue"]),l(U,{modelValue:B.value,"onUpdate:modelValue":e[27]||(e[27]=t=>B.value=t),title:I.value?"Edit Role":"Create Role",width:"500px","close-on-click-modal":!0,"close-on-press-escape":!0,class:"role-form-dialog",onClick:Pl},{footer:s(()=>[n("span",is,[l(i,{onClick:e[26]||(e[26]=t=>B.value=!1)},{default:s(()=>[...e[72]||(e[72]=[m("Cancel",-1)])]),_:1}),l(i,{type:"primary",onClick:kl,loading:w.value},{default:s(()=>[m(v(I.value?"Update":"Create"),1)]),_:1},8,["loading"])])]),default:s(()=>[n("div",{class:"role-form-container",onClick:e[25]||(e[25]=N(()=>{},["stop"]))},[l(re,{ref_key:"roleFormRef",ref:Ae,model:k.value,rules:yl,"label-position":"top"},{default:s(()=>[l(F,{label:"Role Name",prop:"name"},{default:s(()=>[l(c,{modelValue:k.value.name,"onUpdate:modelValue":e[23]||(e[23]=t=>k.value.name=t),placeholder:"Enter role name",disabled:I.value&&k.value.name==="Super Admin"},null,8,["modelValue","disabled"])]),_:1}),l(F,{label:"Description",prop:"description"},{default:s(()=>[l(c,{modelValue:k.value.description,"onUpdate:modelValue":e[24]||(e[24]=t=>k.value.description=t),type:"textarea",rows:3,placeholder:"Enter role description",disabled:I.value&&k.value.name==="Super Admin"},null,8,["modelValue","disabled"]),n("div",{class:tl(["word-count",{exceeded:We.value>200}])},v(We.value)+"/200 words ",3)]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue","title"]),l(U,{modelValue:pe.value,"onUpdate:modelValue":e[31]||(e[31]=t=>pe.value=t),title:"Permission Management",width:"800px","close-on-click-modal":!0,"close-on-press-escape":!0,class:"permission-dialog",onClick:Ul},{default:s(()=>[n("div",{class:"permission-container",onClick:e[30]||(e[30]=N(()=>{},["stop"]))},[n("div",rs,[e[74]||(e[74]=n("h3",null,"System Permissions",-1)),l(i,{type:"primary",onClick:Dl},{default:s(()=>[l(o,null,{default:s(()=>[l(d($e))]),_:1}),e[73]||(e[73]=m(" Add Permission ",-1))]),_:1})]),we((g(),A(ae,{data:Ge.value,style:{width:"100%"}},{default:s(()=>[l(p,{prop:"id",label:"ID",width:"80"}),l(p,{prop:"name",label:"Permission Name"}),l(p,{prop:"guard_name",label:"Guard Name"}),l(p,{prop:"created_at",label:"Created At",width:"180"},{default:s(({row:t})=>[m(v(ne(t.created_at)),1)]),_:1}),l(p,{label:"Actions",width:"150",fixed:"right"},{default:s(({row:t})=>[l(Ee,null,{default:s(()=>[l(i,{type:"primary",size:"small",onClick:b=>Fl(t)},{default:s(()=>[l(o,null,{default:s(()=>[l(d(Le))]),_:1})]),_:1},8,["onClick"]),l(i,{type:"danger",size:"small",onClick:b=>xl(t)},{default:s(()=>[l(o,null,{default:s(()=>[l(d(Ne))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[he,V.value]]),n("div",us,[l(ye,{"current-page":ve.value,"onUpdate:currentPage":e[28]||(e[28]=t=>ve.value=t),"page-size":fe.value,"onUpdate:pageSize":e[29]||(e[29]=t=>fe.value=t),"page-sizes":[10,20,50,100],total:He.value,layout:"total, sizes, prev, pager, next",onSizeChange:El,onCurrentChange:Sl},null,8,["current-page","page-size","total"])])])]),_:1},8,["modelValue"]),l(U,{modelValue:T.value,"onUpdate:modelValue":e[36]||(e[36]=t=>T.value=t),title:O.value?"Edit Permission":"Create Permission",width:"500px","close-on-click-modal":!0,"close-on-press-escape":!0,class:"permission-form-dialog",onClick:$l},{footer:s(()=>[n("span",ds,[l(i,{onClick:e[35]||(e[35]=t=>T.value=!1)},{default:s(()=>[...e[75]||(e[75]=[m("Cancel",-1)])]),_:1}),l(i,{type:"primary",onClick:zl,loading:V.value},{default:s(()=>[m(v(O.value?"Update":"Create"),1)]),_:1},8,["loading"])])]),default:s(()=>[n("div",{class:"permission-form-container",onClick:e[34]||(e[34]=N(()=>{},["stop"]))},[l(re,{ref_key:"permissionFormRef",ref:De,model:S.value,rules:Al,"label-position":"top"},{default:s(()=>[l(F,{label:"Permission Name",prop:"name"},{default:s(()=>[l(c,{modelValue:S.value.name,"onUpdate:modelValue":e[32]||(e[32]=t=>S.value.name=t),placeholder:"Enter permission name"},null,8,["modelValue"])]),_:1}),l(F,{label:"Guard Name",prop:"guard_name"},{default:s(()=>[l(c,{modelValue:S.value.guard_name,"onUpdate:modelValue":e[33]||(e[33]=t=>S.value.guard_name=t),placeholder:"Enter guard name (default: web)",disabled:O.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue","title"]),l(U,{modelValue:ge.value,"onUpdate:modelValue":e[40]||(e[40]=t=>ge.value=t),title:"Role Permissions",width:"800px","close-on-click-modal":!0,"close-on-press-escape":!0,class:"role-permission-dialog",onClick:Ol},{default:s(()=>[n("div",{class:"role-permission-container",onClick:e[39]||(e[39]=N(()=>{},["stop"]))},[e[77]||(e[77]=n("div",{class:"role-permission-header"},[n("h3",null,"Assign Permissions to Roles")],-1)),we((g(),A(ae,{data:x.value,style:{width:"100%"}},{default:s(()=>[l(p,{prop:"id",label:"ID",width:"80"}),l(p,{prop:"name",label:"Role Name"}),l(p,{prop:"description",label:"Description"}),l(p,{prop:"permission_count",label:"Permissions",width:"120"},{default:s(({row:t})=>[l(le,{type:"info",size:"small"},{default:s(()=>[m(v(t.permission_count||0)+" Permissions ",1)]),_:2},1024)]),_:1}),l(p,{label:"Actions",width:"120",fixed:"right"},{default:s(({row:t})=>[l(i,{type:"primary",size:"small",onClick:b=>ql(t)},{default:s(()=>[l(o,null,{default:s(()=>[l(d(se))]),_:1}),e[76]||(e[76]=n("span",{class:"button-text"},"Assign",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[he,w.value]]),n("div",ms,[l(ye,{"current-page":K.value,"onUpdate:currentPage":e[37]||(e[37]=t=>K.value=t),"page-size":G.value,"onUpdate:pageSize":e[38]||(e[38]=t=>G.value=t),"page-sizes":[10,20,50,100],total:Re.value,layout:"total, sizes, prev, pager, next",onSizeChange:je,onCurrentChange:Ke},null,8,["current-page","page-size","total"])])])]),_:1},8,["modelValue"]),l(U,{modelValue:H.value,"onUpdate:modelValue":e[45]||(e[45]=t=>H.value=t),title:`Assign Permissions - ${((Ye=Fe.value)==null?void 0:Ye.name)||""}`,width:"600px","close-on-click-modal":!0,"close-on-press-escape":!0,class:"assign-permissions-dialog",onClick:Wl},{footer:s(()=>[n("span",fs,[l(i,{onClick:e[44]||(e[44]=t=>H.value=!1)},{default:s(()=>[...e[79]||(e[79]=[m("Cancel",-1)])]),_:1}),l(i,{type:"primary",onClick:Il,loading:V.value,disabled:V.value},{default:s(()=>[...e[80]||(e[80]=[m(" Assign Permissions ",-1)])]),_:1},8,["loading","disabled"])])]),default:s(()=>[n("div",{class:"assign-permissions-container",onClick:e[43]||(e[43]=N(()=>{},["stop"]))},[V.value?(g(),L("div",cs,[l(be,{rows:6,animated:""})])):(g(),A(re,{key:1,ref_key:"assignPermissionsFormRef",ref:Ll,model:_.value,"label-position":"top"},{default:s(()=>[l(F,{label:"Permissions",prop:"permissions"},{default:s(()=>[n("div",ps,[l(Ce,{modelValue:J.value,"onUpdate:modelValue":e[41]||(e[41]=t=>J.value=t),indeterminate:Q.value,onChange:Ml},{default:s(()=>[...e[78]||(e[78]=[m(" Select All ",-1)])]),_:1},8,["modelValue","indeterminate"])]),n("div",vs,[l(Xe,{modelValue:_.value.permissions,"onUpdate:modelValue":e[42]||(e[42]=t=>_.value.permissions=t),onChange:Bl},{default:s(()=>[(g(!0),L(qe,null,nl(W.value,t=>(g(),A(Ce,{key:t.id,label:t.id,onChange:b=>Tl(t.id,b)},{default:s(()=>[m(v(t.name),1)]),_:2},1032,["label","onChange"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model"]))])]),_:1},8,["modelValue","title"]),l(U,{modelValue:X.value,"onUpdate:modelValue":e[50]||(e[50]=t=>X.value=t),title:`Assign Roles - ${((Ze=D.value)==null?void 0:Ze.name)||""}`,width:"600px","close-on-click-modal":!0,"close-on-press-escape":!0,class:"assign-role-dialog",onClick:Ql},{footer:s(()=>[n("span",bs,[l(i,{onClick:e[49]||(e[49]=t=>X.value=!1)},{default:s(()=>[...e[82]||(e[82]=[m("Cancel",-1)])]),_:1}),l(i,{type:"primary",onClick:Jl,loading:w.value},{default:s(()=>[...e[83]||(e[83]=[m(" Assign Roles ",-1)])]),_:1},8,["loading"])])]),default:s(()=>[n("div",{class:"assign-role-container",onClick:e[48]||(e[48]=N(()=>{},["stop"]))},[w.value?(g(),L("div",gs,[l(be,{rows:3,animated:""})])):(g(),A(re,{key:1,ref_key:"assignRoleFormRef",ref:xe,model:P.value,"label-position":"top"},{default:s(()=>[l(F,{label:"Roles",prop:"roles"},{default:s(()=>[n("div",_s,[l(Ce,{modelValue:Y.value,"onUpdate:modelValue":e[46]||(e[46]=t=>Y.value=t),indeterminate:Z.value,onChange:Kl},{default:s(()=>[...e[81]||(e[81]=[m(" Select All ",-1)])]),_:1},8,["modelValue","indeterminate"])]),n("div",ys,[l(Xe,{modelValue:P.value.roles,"onUpdate:modelValue":e[47]||(e[47]=t=>P.value.roles=t),onChange:Gl},{default:s(()=>[(g(!0),L(qe,null,nl(x.value,t=>(g(),A(Ce,{key:t.id,label:t.name,disabled:t.name==="super-admin",onChange:b=>Hl(t.name,b)},{default:s(()=>[m(v(t.name),1)]),_:2},1032,["label","disabled","onChange"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model"]))])]),_:1},8,["modelValue","title"])])}}},ks=ea(Cs,[["__scopeId","data-v-2e91cdcc"]]);export{ks as default};
