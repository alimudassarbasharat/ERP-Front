import{_ as Y,H as Z,l as r,c as j,y as n,N as G,a as X,o as P,d as w,h as e,D as t,i as v,u as A,U as ee,A as ae,V as le,f as z,t as h,Y as te,Z as oe,b as se,L as ne}from"./index-xvPUEXLW.js";const ue={class:"sub-admin-list"},re={class:"page-header"},de={class:"table-operations"},ie={class:"pagination-container"},me={class:"dialog-footer"},pe={__name:"SubAdminList",setup(ce){const f=Z(),D=r(!1),_=r(""),y=r(""),C=r(""),x=r(1),U=r(10),E=r(0),m=r(!1),p=r(!1),s=r({name:"",email:"",department:"",role:"",password:"",status:"active"}),F={name:[{required:!0,message:"Please enter name",trigger:"blur"}],email:[{required:!0,message:"Please enter email",trigger:"blur"},{type:"email",message:"Please enter a valid email",trigger:"blur"}],department:[{required:!0,message:"Please select department",trigger:"change"}],role:[{required:!0,message:"Please select role",trigger:"change"}],password:[{required:!0,message:"Please enter password",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}],status:[{required:!0,message:"Please select status",trigger:"change"}]},d=r([{id:1,name:"Alice Johnson",email:"alice@example.com",department:"academic",role:"department_head",status:"active"},{id:2,name:"Bob Wilson",email:"bob@example.com",department:"administrative",role:"supervisor",status:"active"}]),B=j(()=>{let o=d.value;return _.value&&(o=o.filter(a=>a.name.toLowerCase().includes(_.value.toLowerCase())||a.email.toLowerCase().includes(_.value.toLowerCase()))),y.value&&(o=o.filter(a=>a.department===y.value)),C.value&&(o=o.filter(a=>a.status===C.value)),o}),I=()=>{p.value=!1,s.value={name:"",email:"",department:"",role:"",password:"",status:"active"},m.value=!0},L=o=>{p.value=!0,s.value={...o},m.value=!0},N=async o=>{try{await ne.confirm(`Are you sure you want to delete sub-admin ${o.name}?`,"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"});const a=d.value.findIndex(b=>b.id===o.id);d.value.splice(a,1),f.success("Sub-admin deleted successfully")}catch(a){a!=="cancel"&&f.error("Failed to delete sub-admin")}},q=async()=>{try{if(p.value){const o=d.value.findIndex(a=>a.id===s.value.id);d.value[o]={...s.value},f.success("Sub-admin updated successfully")}else d.value.push({id:d.value.length+1,...s.value}),f.success("Sub-admin created successfully");m.value=!1}catch{f.error("Failed to save sub-admin")}},T=o=>{U.value=o},$=o=>{x.value=o};return(o,a)=>{const b=n("el-icon"),g=n("el-button"),S=n("el-input"),u=n("el-option"),V=n("el-select"),i=n("el-table-column"),k=n("el-tag"),R=n("el-button-group"),H=n("el-table"),M=n("el-pagination"),W=n("el-card"),c=n("el-form-item"),J=n("el-form"),K=n("el-dialog"),O=G("loading");return P(),X("div",ue,[w("div",re,[a[14]||(a[14]=w("h2",null,"Sub-Admin Management",-1)),e(g,{type:"primary",onClick:I},{default:t(()=>[e(b,null,{default:t(()=>[e(A(ee))]),_:1}),a[13]||(a[13]=v(" Add Sub-Admin ",-1))]),_:1})]),e(W,null,{default:t(()=>[w("div",de,[e(S,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=l=>_.value=l),placeholder:"Search sub-admins...",class:"search-input","prefix-icon":A(le)},null,8,["modelValue","prefix-icon"]),e(V,{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=l=>y.value=l),placeholder:"Department",clearable:""},{default:t(()=>[e(u,{label:"Academic",value:"academic"}),e(u,{label:"Administrative",value:"administrative"}),e(u,{label:"Finance",value:"finance"})]),_:1},8,["modelValue"]),e(V,{modelValue:C.value,"onUpdate:modelValue":a[2]||(a[2]=l=>C.value=l),placeholder:"Status",clearable:""},{default:t(()=>[e(u,{label:"Active",value:"active"}),e(u,{label:"Inactive",value:"inactive"})]),_:1},8,["modelValue"])]),ae((P(),z(H,{data:B.value,style:{width:"100%"}},{default:t(()=>[e(i,{prop:"id",label:"ID",width:"80"}),e(i,{prop:"name",label:"Name"}),e(i,{prop:"email",label:"Email"}),e(i,{prop:"department",label:"Department",width:"120"},{default:t(({row:l})=>[e(k,null,{default:t(()=>[v(h(l.department),1)]),_:2},1024)]),_:1}),e(i,{prop:"role",label:"Role",width:"120"},{default:t(({row:l})=>[e(k,{type:"warning"},{default:t(()=>[v(h(l.role),1)]),_:2},1024)]),_:1}),e(i,{prop:"status",label:"Status",width:"100"},{default:t(({row:l})=>[e(k,{type:l.status==="active"?"success":"info"},{default:t(()=>[v(h(l.status),1)]),_:2},1032,["type"])]),_:1}),e(i,{label:"Actions",width:"200",fixed:"right"},{default:t(({row:l})=>[e(R,null,{default:t(()=>[e(g,{type:"primary",size:"small",onClick:Q=>L(l)},{default:t(()=>[e(b,null,{default:t(()=>[e(A(te))]),_:1})]),_:1},8,["onClick"]),e(g,{type:"danger",size:"small",onClick:Q=>N(l)},{default:t(()=>[e(b,null,{default:t(()=>[e(A(oe))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[O,D.value]]),w("div",ie,[e(M,{"current-page":x.value,"onUpdate:currentPage":a[3]||(a[3]=l=>x.value=l),"page-size":U.value,"onUpdate:pageSize":a[4]||(a[4]=l=>U.value=l),"page-sizes":[10,20,50,100],total:E.value,layout:"total, sizes, prev, pager, next",onSizeChange:T,onCurrentChange:$},null,8,["current-page","page-size","total"])])]),_:1}),e(K,{modelValue:m.value,"onUpdate:modelValue":a[12]||(a[12]=l=>m.value=l),title:p.value?"Edit Sub-Admin":"Create Sub-Admin",width:"500px"},{footer:t(()=>[w("span",me,[e(g,{onClick:a[11]||(a[11]=l=>m.value=!1)},{default:t(()=>[...a[15]||(a[15]=[v("Cancel",-1)])]),_:1}),e(g,{type:"primary",onClick:q},{default:t(()=>[v(h(p.value?"Update":"Create"),1)]),_:1})])]),default:t(()=>[e(J,{ref_key:"subAdminForm",ref:s,model:s.value,rules:F,"label-position":"top"},{default:t(()=>[e(c,{label:"Name",prop:"name"},{default:t(()=>[e(S,{modelValue:s.value.name,"onUpdate:modelValue":a[5]||(a[5]=l=>s.value.name=l),placeholder:"Enter name"},null,8,["modelValue"])]),_:1}),e(c,{label:"Email",prop:"email"},{default:t(()=>[e(S,{modelValue:s.value.email,"onUpdate:modelValue":a[6]||(a[6]=l=>s.value.email=l),placeholder:"Enter email"},null,8,["modelValue"])]),_:1}),e(c,{label:"Department",prop:"department"},{default:t(()=>[e(V,{modelValue:s.value.department,"onUpdate:modelValue":a[7]||(a[7]=l=>s.value.department=l),placeholder:"Select department"},{default:t(()=>[e(u,{label:"Academic",value:"academic"}),e(u,{label:"Administrative",value:"administrative"}),e(u,{label:"Finance",value:"finance"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"Role",prop:"role"},{default:t(()=>[e(V,{modelValue:s.value.role,"onUpdate:modelValue":a[8]||(a[8]=l=>s.value.role=l),placeholder:"Select role"},{default:t(()=>[e(u,{label:"Department Head",value:"department_head"}),e(u,{label:"Supervisor",value:"supervisor"}),e(u,{label:"Coordinator",value:"coordinator"})]),_:1},8,["modelValue"])]),_:1}),p.value?se("",!0):(P(),z(c,{key:0,label:"Password",prop:"password"},{default:t(()=>[e(S,{modelValue:s.value.password,"onUpdate:modelValue":a[9]||(a[9]=l=>s.value.password=l),type:"password",placeholder:"Enter password","show-password":""},null,8,["modelValue"])]),_:1})),e(c,{label:"Status",prop:"status"},{default:t(()=>[e(V,{modelValue:s.value.status,"onUpdate:modelValue":a[10]||(a[10]=l=>s.value.status=l),placeholder:"Select status"},{default:t(()=>[e(u,{label:"Active",value:"active"}),e(u,{label:"Inactive",value:"inactive"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},fe=Y(pe,[["__scopeId","data-v-1886521c"]]);export{fe as default};
