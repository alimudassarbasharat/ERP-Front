import{_ as z,M as J,l as w,c as g,p as K,y as E,f as c,o as p,D as d,d as o,h as a,u as s,ap as h,aK as A,a3 as C,aL as M,ax as R,aw as m,aM as V,U as O,ar as P,ao as D,b,at as S,a as Q,F as q,z as H,ay as W,i as v,as as X,R as N}from"./index-xvPUEXLW.js";import{_ as k}from"./KPICard-wUq3RHeB.js";import{_}from"./SectionCard-BKgP_pjY.js";import{A as Y}from"./ActionBar-BRIEgU-p.js";import{_ as Z}from"./ActivityItem-Xa4YSpzk.js";const ee={class:"w-full mb-4"},se={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4"},te={class:"w-full mb-4"},ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},re={class:"w-full mb-4"},oe={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700"},le={class:"flex items-center justify-between mb-6"},ne={class:"space-y-4"},ie={class:"space-y-4"},de={class:"report-category"},ue={class:"grid grid-cols-2 gap-3"},pe={class:"report-category"},ce={class:"grid grid-cols-2 gap-3"},ge={class:"report-category"},me={class:"grid grid-cols-2 gap-3"},be={__name:"ExamCenter",setup(ve){const l=J();w(!1);const f=w(!1),n=w({papers_pending_approval:0,marks_pending_entry:0,marks_pending_verification:0,results_ready_to_publish:0,published_exams:0}),$=w([]),x=g(()=>{try{const i=JSON.parse(localStorage.getItem("user")||"{}");return i.role||i.user_type||i.type||"guest"}catch{return"guest"}}),B=g(()=>["teacher","supervisor","admin","super-admin"].includes(x.value)),F=g(()=>["teacher","admin","super-admin"].includes(x.value)),L=g(()=>["supervisor","admin","super-admin"].includes(x.value)),U=g(()=>["principal","admin","super-admin"].includes(x.value)),j=g(()=>["principal","admin","super-admin"].includes(x.value)),I=g(()=>["principal","admin","super-admin","teacher","supervisor"].includes(x.value)),G=async()=>{var i,e,r,y,t;try{const u=await N.get("/exam-management/dashboard-stats");u.data.success&&(n.value={papers_pending_approval:((i=u.data.data)==null?void 0:i.papers_pending_approval)||0,marks_pending_entry:((e=u.data.data)==null?void 0:e.marks_pending_entry)||0,marks_pending_verification:((r=u.data.data)==null?void 0:r.marks_pending_verification)||0,results_ready_to_publish:((y=u.data.data)==null?void 0:y.results_ready_to_publish)||0,published_exams:((t=u.data.data)==null?void 0:t.published_exams)||0})}catch(u){console.error("Failed to load dashboard stats:",u),n.value={papers_pending_approval:0,marks_pending_entry:0,marks_pending_verification:0,results_ready_to_publish:0,published_exams:0}}},T=async()=>{try{const i=await N.get("/exams");if(i.data.success||i.data.status){const e=i.data.result||i.data.data||[];$.value=e.slice(0,5).map(r=>({type:r.status==="published"?"payment":r.status==="locked"?"due":"notification",title:r.status==="published"?"Results Published":r.status==="locked"?"Exam Locked":"Exam Created",description:`${r.name||r.term||"Untitled Exam"}`,time:new Date(r.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),icon:r.status==="published"?C:r.status==="locked"?S:h}))}}catch(i){console.error("Failed to load exams:",i)}};return K(()=>{G(),T()}),(i,e)=>{const r=E("el-button"),y=E("el-dialog");return p(),c(X,{title:"Exam Management Dashboard",breadcrumbs:[]},{default:d(()=>[o("div",ee,[o("div",se,[a(k,{label:"Papers Pending Approval",value:n.value.papers_pending_approval||0,icon:s(h),"icon-bg-class":"bg-gradient-to-br from-orange-100 to-amber-100","icon-class":"text-orange-600",badge:n.value.papers_pending_approval>0?"Needs review":"All clear","badge-class":n.value.papers_pending_approval>0?"text-orange-600 bg-orange-100":"text-green-600 bg-green-100"},null,8,["value","icon","badge","badge-class"]),a(k,{label:"Marks Pending Entry",value:n.value.marks_pending_entry||0,icon:s(A),"icon-bg-class":"bg-gradient-to-br from-blue-100 to-indigo-100","icon-class":"text-blue-600",badge:n.value.marks_pending_entry>0?"In progress":"Complete","badge-class":n.value.marks_pending_entry>0?"text-blue-600 bg-blue-100":"text-green-600 bg-green-100"},null,8,["value","icon","badge","badge-class"]),a(k,{label:"Marks Pending Verification",value:n.value.marks_pending_verification||0,icon:s(C),"icon-bg-class":"bg-gradient-to-br from-purple-100 to-pink-100","icon-class":"text-purple-600",badge:n.value.marks_pending_verification>0?"Needs check":"All verified","badge-class":n.value.marks_pending_verification>0?"text-purple-600 bg-purple-100":"text-green-600 bg-green-100"},null,8,["value","icon","badge","badge-class"]),a(k,{label:"Results Ready",value:n.value.results_ready_to_publish||0,icon:s(M),"icon-bg-class":"bg-gradient-to-br from-green-100 to-emerald-100","icon-class":"text-green-600",badge:n.value.results_ready_to_publish>0?"Ready to show":"None ready","badge-class":n.value.results_ready_to_publish>0?"text-green-600 bg-green-100":"text-gray-600 bg-gray-100"},null,8,["value","icon","badge","badge-class"]),a(k,{label:"Published Exams",value:n.value.published_exams||0,icon:s(R),"icon-bg-class":"bg-gradient-to-br from-indigo-100 to-blue-100","icon-class":"text-indigo-600",trend:{type:"positive",value:"+8.3%"}},null,8,["value","icon"])])]),a(Y,null,{default:d(()=>[a(m,{label:"Manage Terms",icon:s(V),variant:"secondary",onClick:e[0]||(e[0]=t=>s(l).push("/exams/terms"))},null,8,["icon"]),a(m,{label:"Create Exam",icon:s(O),variant:"primary",onClick:e[1]||(e[1]=t=>s(l).push("/exams/manage"))},null,8,["icon"]),a(m,{label:"Manage Datesheet",icon:s(V),variant:"info",onClick:e[2]||(e[2]=t=>s(l).push("/exams/datesheet"))},null,8,["icon"]),a(m,{label:"Publish Results",icon:s(C),variant:"success",disabled:n.value.results_ready_to_publish===0,onClick:e[3]||(e[3]=t=>s(l).push("/exams/results"))},null,8,["icon","disabled"]),a(m,{label:"Download Marksheets",icon:s(R),variant:"info",onClick:e[4]||(e[4]=t=>s(l).push("/exams/marksheets"))},null,8,["icon"]),a(m,{label:"View Reports",icon:s(P),variant:"secondary",onClick:e[5]||(e[5]=t=>f.value=!0)},null,8,["icon"])]),_:1}),o("div",te,[a(D,{title:"Exam Command Center",icon:s(h)},null,8,["icon"]),o("div",ae,[B.value?(p(),c(_,{key:0,title:"Exam Papers",description:"Create, submit, and approve exam papers",icon:s(h),"icon-bg-class":"bg-gradient-to-r from-purple-100 to-purple-200","hover-icon-bg-class":"group-hover:from-purple-500 group-hover:to-purple-600","icon-class":"text-purple-600","hover-icon-class":"group-hover:text-white","hover-text-class":"group-hover:text-purple-600",tags:[{label:"Create",class:"bg-purple-100 text-purple-700"},{label:"Approve",class:"bg-blue-100 text-blue-700"},{label:"Review",class:"bg-indigo-100 text-indigo-700"}],onClick:e[6]||(e[6]=t=>s(l).push("/exams/papers"))},null,8,["icon"])):b("",!0),F.value?(p(),c(_,{key:1,title:"Enter Marks",description:"Enter exam marks for students",icon:s(A),"icon-bg-class":"bg-gradient-to-r from-green-100 to-green-200","hover-icon-bg-class":"group-hover:from-green-500 group-hover:to-green-600","icon-class":"text-green-600","hover-icon-class":"group-hover:text-white","hover-text-class":"group-hover:text-green-600",tags:[{label:"Quick Entry",class:"bg-green-100 text-green-700"},{label:"Bulk Upload",class:"bg-emerald-100 text-emerald-700"}],onClick:e[7]||(e[7]=t=>s(l).push("/exams/marks-entry"))},null,8,["icon"])):b("",!0),L.value?(p(),c(_,{key:2,title:"Check Marks",description:"Verify marks entered by teachers",icon:s(C),"icon-bg-class":"bg-gradient-to-r from-orange-100 to-orange-200","hover-icon-bg-class":"group-hover:from-orange-500 group-hover:to-orange-600","icon-class":"text-orange-600","hover-icon-class":"group-hover:text-white","hover-text-class":"group-hover:text-orange-600",tags:[{label:"Verify",class:"bg-orange-100 text-orange-700"},{label:"Approve",class:"bg-amber-100 text-amber-700"}],onClick:e[8]||(e[8]=t=>s(l).push("/exams/marks-verification"))},null,8,["icon"])):b("",!0),U.value?(p(),c(_,{key:3,title:"Exam Results",description:"Generate and publish exam results",icon:s(M),"icon-bg-class":"bg-gradient-to-r from-emerald-100 to-emerald-200","hover-icon-bg-class":"group-hover:from-emerald-500 group-hover:to-emerald-600","icon-class":"text-emerald-600","hover-icon-class":"group-hover:text-white","hover-text-class":"group-hover:text-emerald-600",tags:[{label:"Generate",class:"bg-emerald-100 text-emerald-700"},{label:"Publish",class:"bg-green-100 text-green-700"}],onClick:e[9]||(e[9]=t=>s(l).push("/exams/results"))},null,8,["icon"])):b("",!0),j.value?(p(),c(_,{key:4,title:"Marksheets",description:"Download and print student marksheets",icon:s(R),"icon-bg-class":"bg-gradient-to-r from-indigo-100 to-indigo-200","hover-icon-bg-class":"group-hover:from-indigo-500 group-hover:to-indigo-600","icon-class":"text-indigo-600","hover-icon-class":"group-hover:text-white","hover-text-class":"group-hover:text-indigo-600",tags:[{label:"Download",class:"bg-indigo-100 text-indigo-700"},{label:"Print",class:"bg-blue-100 text-blue-700"}],onClick:e[10]||(e[10]=t=>s(l).push("/exams/marksheets"))},null,8,["icon"])):b("",!0),I.value?(p(),c(_,{key:5,title:"Reports",description:"View exam and marks reports",icon:s(P),"icon-bg-class":"bg-gradient-to-r from-rose-100 to-rose-200","hover-icon-bg-class":"group-hover:from-rose-500 group-hover:to-rose-600","icon-class":"text-rose-600","hover-icon-class":"group-hover:text-white","hover-text-class":"group-hover:text-rose-600",tags:[{label:"Student Reports",class:"bg-rose-100 text-rose-700"},{label:"Class Reports",class:"bg-pink-100 text-pink-700"}],onClick:e[11]||(e[11]=t=>f.value=!0)},null,8,["icon"])):b("",!0)])]),o("div",re,[o("div",oe,[o("div",le,[a(D,{title:"Recent Activity",icon:s(S),"show-icon":!0},null,8,["icon"]),a(m,{label:"View All",variant:"primary",onClick:e[12]||(e[12]=t=>s(l).push("/exams/manage"))})]),o("div",ne,[(p(!0),Q(q,null,H($.value,(t,u)=>(p(),c(Z,{key:u,title:t.title,description:t.description,time:t.time,type:t.type,icon:t.icon},null,8,["title","description","time","type","icon"]))),128)),$.value.length===0?(p(),c(W,{key:0,title:"No recent activity",description:"Exam activities will appear here",icon:s(h),"icon-color":"gray"},null,8,["icon"])):b("",!0)])])]),a(y,{modelValue:f.value,"onUpdate:modelValue":e[20]||(e[20]=t=>f.value=t),title:"Exam Reports",width:"600px",class:"reports-dialog"},{footer:d(()=>[a(r,{onClick:e[19]||(e[19]=t=>f.value=!1)},{default:d(()=>[...e[30]||(e[30]=[v("Close",-1)])]),_:1})]),default:d(()=>[o("div",ie,[o("div",de,[e[23]||(e[23]=o("h4",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Student Reports",-1)),o("div",ue,[a(r,{onClick:e[13]||(e[13]=t=>s(l).push("/exams/mark-report")),class:"report-button"},{default:d(()=>[...e[21]||(e[21]=[v("Mark Report",-1)])]),_:1}),a(r,{onClick:e[14]||(e[14]=t=>s(l).push("/exams/view-marksheet")),class:"report-button"},{default:d(()=>[...e[22]||(e[22]=[v("View Marksheet",-1)])]),_:1})])]),o("div",pe,[e[26]||(e[26]=o("h4",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Subject Reports",-1)),o("div",ce,[a(r,{onClick:e[15]||(e[15]=t=>s(l).push("/reports/students")),class:"report-button"},{default:d(()=>[...e[24]||(e[24]=[v("Subject Performance",-1)])]),_:1}),a(r,{onClick:e[16]||(e[16]=t=>s(l).push("/exams/award-list")),class:"report-button"},{default:d(()=>[...e[25]||(e[25]=[v("Award List",-1)])]),_:1})])]),o("div",ge,[e[29]||(e[29]=o("h4",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Class Reports",-1)),o("div",me,[a(r,{onClick:e[17]||(e[17]=t=>s(l).push("/reports/students/class-wise")),class:"report-button"},{default:d(()=>[...e[27]||(e[27]=[v("Class-wise Report",-1)])]),_:1}),a(r,{onClick:e[18]||(e[18]=t=>s(l).push("/reports/students/family-wise")),class:"report-button"},{default:d(()=>[...e[28]||(e[28]=[v("Family-wise Report",-1)])]),_:1})])])])]),_:1},8,["modelValue"])]),_:1})}}},ye=z(be,[["__scopeId","data-v-f0470f24"]]);export{ye as default};
