import{_ as R,M as G,H as T,l as p,c as Y,p as q,a7 as J,a as u,o as c,d as t,C as _,i as k,J as O,A as f,K as h,b as W,t as x,F as Q,z as X,az as Z,R as ee}from"./index-xvPUEXLW.js";const te={class:"min-h-screen flex flex-col items-center p-4 sm:p-6 lg:p-8",style:{background:"var(--bg-primary)"}},ae={class:"w-full max-w-6xl mx-auto mt-2 mb-4 flex items-center justify-between bg-white/90 dark:bg-gray-800/90 rounded-lg shadow-lg py-2 px-5 transition-all duration-500 border border-gray-200 dark:border-gray-700"},re={class:"flex items-center gap-2 text-base font-medium text-gray-600 dark:text-gray-400"},se={class:"w-full max-w-6xl mx-auto"},oe={class:"bg-white dark:bg-gray-800/90 rounded-xl shadow-lg overflow-hidden border border-gray-200 dark:border-gray-700"},le={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ne={class:"space-y-6"},de={class:"border-b border-gray-200 dark:border-gray-700 pb-6"},ie={class:"space-y-4"},ue={class:"flex flex-col w-full"},ce={class:"relative"},ge={class:"flex flex-col w-full"},pe={class:"relative"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe={class:"flex flex-col w-full"},me={class:"relative"},he={class:"flex flex-col w-full"},xe={class:"relative"},be={class:"flex"},ye={class:"relative"},ke=["src","alt"],we={key:1,class:"w-6 h-4 bg-gray-300 dark:bg-gray-600 rounded flex items-center justify-center"},_e={class:"text-xs text-gray-600 dark:text-gray-400"},Ce={class:"text-sm"},Se={key:0,class:"absolute top-full left-0 mt-1 w-72 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto"},Ne={class:"p-2"},Ae={class:"max-h-48 overflow-y-auto"},Ee=["onClick"],je=["src","alt"],Pe={key:1,class:"w-6 h-4 bg-gray-300 dark:bg-gray-600 rounded flex items-center justify-center"},De={class:"text-xs text-gray-600 dark:text-gray-400"},Me={class:"flex-1"},Fe={class:"text-sm font-medium text-gray-900 dark:text-white"},Ue={class:"text-xs text-gray-500 dark:text-gray-400"},ze={class:"flex-1 relative"},Be=["placeholder","maxlength"],Ke={class:"space-y-6"},Ve={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-100 dark:border-blue-800/50"},Le={class:"space-y-4"},Ie={class:"flex items-center justify-between"},$e={class:"ml-4"},He={class:"relative inline-flex items-center cursor-pointer"},Re={class:"flex flex-row gap-3 justify-end pt-8 border-t border-gray-200 dark:border-gray-700 mt-8"},Ge=["disabled"],Te={key:0,class:"flex items-center gap-2"},Ye={key:1,class:"flex items-center gap-2"},qe={__name:"GeneralSettings",setup(Je){const b=ee;G();const g=T(),y=p(!1),l=p({schoolName:"",address:"",email:"",phone:"",academicYear:"",timezone:"UTC",language:"en",currency:"USD",dateFormat:"MM/DD/YYYY",twoFactorAuth:!1}),m=p(!1),v=p(""),d=p(""),n=p([]),o=p(null),M=Y(()=>v.value?n.value.filter(r=>r.country_name.toLowerCase().includes(v.value.toLowerCase())||r.country_code.includes(v.value)):n.value),F=r=>{if(o.value=r,m.value=!1,v.value="",d.value){const e=w(r.country_iso);let a=d.value.replace(/\D/g,"");a.length>e&&(d.value=a.substring(0,e))}C()},U=()=>{if(!o.value)return;const r=w(o.value.country_iso);let e=d.value.replace(/\D/g,"");e.length>r&&(e=e.substring(0,r),d.value=e),C()},C=()=>{if(!o.value)return;const r=d.value.replace(/\D/g,""),e=o.value.country_code||o.value.code||"+92";l.value.phone=r?`${e} ${r}`:""},z=r=>{if(!r||!n.value.length)return;const e=n.value.find(a=>{const i=a.country_code||a.code;return i&&r.startsWith(i)});if(e){o.value=e;const a=e.country_code||e.code;d.value=r.replace(a,"").trim()}else{const a=n.value.find(i=>i.country_iso==="PK")||n.value[0];a&&(o.value=a),d.value=r}},B=async()=>{try{const r=await b.get("/country-codes");if(r.data.success){n.value=r.data.data.map(a=>({...a,name:a.country_name||a.name,code:a.country_code||a.code,flag:a.flag_url||a.flag,placeholder:K(a.country_iso)}));const e=n.value.find(a=>a.country_iso==="PK")||n.value[0];e&&!o.value&&(o.value=e)}}catch(r){console.error("Error fetching countries:",r),n.value=[{country_name:"Pakistan",country_code:"+92",country_iso:"PK",flag_url:"https://flagcdn.com/w40/pk.png",name:"Pakistan",code:"+92",flag:"https://flagcdn.com/w40/pk.png",placeholder:"300 1234567"}],o.value=n.value[0]}},K=r=>({PK:"300 1234567",US:"(555) 123-4567",CA:"(555) 123-4567",GB:"20 7123 4567",IN:"98765 43210",SA:"50 123 4567",AE:"50 123 4567",AU:"400 123 456",DE:"030 12345678",BD:"1712 345678",NP:"984 1234567",CN:"138 0013 8000",AF:"70 123 4567",ID:"812 3456 789",PH:"917 123 4567"})[r]||"123 456 789",w=r=>({PK:10,US:10,CA:10,GB:11,IN:10,SA:9,AE:9,AU:9,DE:11,BD:11,NP:10,CN:11,AF:9,ID:10,PH:10})[r]||15,S=r=>{r.target.closest(".relative")||(m.value=!1)},V=()=>l.value.schoolName.trim()?l.value.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.value.email)?!0:(g.error("Please enter a valid email address"),!1):(g.error("Contact email is required"),!1):(g.error("School name is required"),!1),L=async()=>{var r,e;if(V()){y.value=!0;try{const a=await b.post("/settings/general",l.value);if(a.data.success||a.data.status){const i=a.data.action||"saved";i==="created"?g.success("ðŸŽ‰ School profile created successfully!"):i==="updated"?g.success("âœ… School settings updated successfully!"):g.success("Settings saved successfully!"),window.dispatchEvent(new CustomEvent("schoolSettingsUpdated"))}else g.error(a.data.message||"Failed to save settings")}catch(a){console.error("Error saving settings:",a),g.error(((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"An error occurred while saving settings")}finally{y.value=!1}}},I=()=>{confirm("Are you sure you want to reset all settings to default values?")&&(l.value={schoolName:"",address:"",email:"",phone:"",timezone:"Asia/Karachi",language:"en",currency:"PKR"},g.info("Settings reset to default values"))},$=async()=>{try{const r=await b.get("/settings/check-school");return r.data.success?r.data.exists:!1}catch(r){return console.error("Error checking school exists:",r),!1}},H=async()=>{try{if(await $()){const e=await b.get("/settings/general");if(e.data.success||e.data.status){const a=e.data.data||e.data.result;a&&(l.value={schoolName:a.schoolName||"",address:a.address||"",email:a.email||"",phone:a.phone||"",timezone:a.timezone||"Asia/Karachi",language:a.language||"en",currency:a.currency||"PKR"},a.phone&&z(a.phone))}}else l.value={schoolName:"",address:"",email:"",phone:"",timezone:"Asia/Karachi",language:"en",currency:"PKR"}}catch(r){console.error("Error loading settings:",r)}};return q(async()=>{await B(),await H(),document.addEventListener("click",S)}),J(()=>{document.removeEventListener("click",S)}),(r,e)=>{var a,i,N,A,E,j,P,D;return c(),u("div",te,[t("div",ae,[e[12]||(e[12]=t("h2",{class:"text-base font-medium text-gray-900 dark:text-white tracking-tight flex items-center gap-2"},[t("div",{class:"w-2 h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"}),k(" General Settings ")],-1)),t("nav",re,[t("span",{class:"hover:text-purple-600 dark:hover:text-purple-400 cursor-pointer transition-colors duration-200",onClick:e[0]||(e[0]=s=>r.$router.push("/dashboard"))},"Dashboard"),e[9]||(e[9]=t("span",{class:"mx-2 dark:text-gray-600"},"|",-1)),t("span",{class:"hover:text-purple-600 dark:hover:text-purple-400 cursor-pointer transition-colors duration-200",onClick:e[1]||(e[1]=s=>r.$router.push("/settings"))},"Settings"),e[10]||(e[10]=t("span",{class:"mx-2 dark:text-gray-600"},"|",-1)),e[11]||(e[11]=t("span",{class:"text-gray-900 dark:text-white font-bold"},"General",-1))])]),e[29]||(e[29]=_('<div class="w-full max-w-6xl mx-auto mb-6" data-v-1338e0b7><div class="flex flex-col items-center text-center" data-v-1338e0b7><div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mb-4 shadow-lg" data-v-1338e0b7><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1338e0b7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" data-v-1338e0b7></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" data-v-1338e0b7></path></svg></div><h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2" data-v-1338e0b7>School Configuration</h3><p class="text-gray-600 dark:text-gray-400 max-w-md" data-v-1338e0b7>Configure your institution&#39;s basic information and system preferences.</p></div></div>',1)),t("div",se,[t("div",oe,[t("form",{onSubmit:O(L,["prevent"]),class:"p-6 sm:p-8"},[t("div",le,[t("div",ne,[t("div",de,[e[22]||(e[22]=_('<div class="flex items-center gap-3 mb-4" data-v-1338e0b7><div class="w-8 h-8 bg-purple-100 dark:bg-purple-900/50 rounded-lg flex items-center justify-center" data-v-1338e0b7><svg class="w-4 h-4 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1338e0b7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h6m-6 4h6m-6 4h6" data-v-1338e0b7></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-white" data-v-1338e0b7>Institution Information</h4></div>',1)),t("div",ie,[t("div",ue,[e[14]||(e[14]=t("label",{class:"mb-2 text-sm font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"School Name *",-1)),t("div",ce,[f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.schoolName=s),type:"text",placeholder:"Enter your school name",required:"",class:"h-12 border-0 bg-transparent px-0 text-sm font-light text-gray-600 dark:text-gray-300 dark:placeholder-gray-500 focus:ring-0 focus:outline-none w-full"},null,512),[[h,l.value.schoolName]]),e[13]||(e[13]=t("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 dark:bg-purple-700 pointer-events-none"},null,-1))])]),t("div",ge,[e[16]||(e[16]=t("label",{class:"mb-2 text-sm font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"School Address",-1)),t("div",pe,[f(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.address=s),placeholder:"Enter complete school address",rows:"3",class:"border-0 bg-transparent px-0 text-sm font-light text-gray-600 dark:text-gray-300 dark:placeholder-gray-500 focus:ring-0 focus:outline-none w-full resize-none"},null,512),[[h,l.value.address]]),e[15]||(e[15]=t("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 dark:bg-purple-700 pointer-events-none"},null,-1))])]),t("div",ve,[t("div",fe,[e[18]||(e[18]=t("label",{class:"mb-2 text-sm font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Contact Email *",-1)),t("div",me,[f(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.email=s),type:"email",placeholder:"admin@school.edu",required:"",class:"h-12 border-0 bg-transparent px-0 text-sm font-light text-gray-600 dark:text-gray-300 dark:placeholder-gray-500 focus:ring-0 focus:outline-none w-full"},null,512),[[h,l.value.email]]),e[17]||(e[17]=t("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 dark:bg-purple-700 pointer-events-none"},null,-1))])]),t("div",he,[e[21]||(e[21]=t("label",{class:"mb-2 text-sm font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Phone Number",-1)),t("div",xe,[t("div",be,[t("div",ye,[t("button",{onClick:e[5]||(e[5]=s=>m.value=!m.value),type:"button",class:"flex items-center gap-2 h-12 px-3 border-0 bg-transparent text-sm font-light text-gray-600 dark:text-gray-300 focus:ring-0 focus:outline-none"},[(a=o.value)!=null&&a.flag_url||(i=o.value)!=null&&i.flag?(c(),u("img",{key:0,src:o.value.flag_url||o.value.flag,alt:((N=o.value)==null?void 0:N.country_name)||((A=o.value)==null?void 0:A.name),class:"w-6 h-4 rounded object-cover"},null,8,ke)):(c(),u("div",we,[t("span",_e,x(((E=o.value)==null?void 0:E.country_iso)||"PK"),1)])),t("span",Ce,x(((j=o.value)==null?void 0:j.country_code)||((P=o.value)==null?void 0:P.code)||"+92"),1),e[19]||(e[19]=t("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})],-1))]),m.value?(c(),u("div",Se,[t("div",Ne,[f(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>v.value=s),type:"text",placeholder:"Search countries...",class:"w-full p-2 text-sm border border-gray-200 dark:border-gray-700 dark:bg-gray-700 dark:text-gray-300 dark:placeholder-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 dark:focus:ring-purple-600"},null,512),[[h,v.value]])]),t("div",Ae,[(c(!0),u(Q,null,X(M.value,s=>(c(),u("button",{key:s.country_code,onClick:Oe=>F(s),type:"button",class:"w-full flex items-center gap-3 p-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[s.flag_url||s.flag?(c(),u("img",{key:0,src:s.flag_url||s.flag,alt:s.country_name||s.name,class:"w-6 h-4 rounded object-cover"},null,8,je)):(c(),u("div",Pe,[t("span",De,x(s.country_iso),1)])),t("div",Me,[t("div",Fe,x(s.country_name||s.name),1),t("div",Ue,x(s.country_code||s.code),1)])],8,Ee))),128))])])):W("",!0)]),t("div",ze,[f(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>d.value=s),onInput:U,type:"tel",placeholder:((D=o.value)==null?void 0:D.placeholder)||"123 456 789",maxlength:o.value?w(o.value.country_iso):15,class:"h-12 border-0 bg-transparent px-3 text-sm font-light text-gray-600 dark:text-gray-300 dark:placeholder-gray-500 focus:ring-0 focus:outline-none w-full"},null,40,Be),[[h,d.value]])])]),e[20]||(e[20]=t("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 dark:bg-purple-700 pointer-events-none"},null,-1))])])])])])]),t("div",Ke,[t("div",Ve,[e[25]||(e[25]=_('<div class="flex items-center gap-3 mb-4" data-v-1338e0b7><div class="w-8 h-8 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg flex items-center justify-center" data-v-1338e0b7><svg class="w-4 h-4 text-indigo-600 dark:text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1338e0b7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" data-v-1338e0b7></path></svg></div><h4 class="text-lg font-semibold text-gray-900 dark:text-white" data-v-1338e0b7>Security Settings</h4></div>',1)),t("div",Le,[t("div",Ie,[e[24]||(e[24]=t("div",{class:"flex-1"},[t("label",{class:"text-sm font-semibold text-gray-600 dark:text-gray-300"},"Enable Two-Factor Authentication"),t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Add an extra layer of security to your account")],-1)),t("div",$e,[t("label",He,[f(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.twoFactorAuth=s),type:"checkbox",class:"sr-only peer"},null,512),[[Z,l.value.twoFactorAuth]]),e[23]||(e[23]=t("div",{class:"w-11 h-6 bg-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-gray-200 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-200 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])])])])])])]),t("div",Re,[t("button",{type:"button",onClick:I,class:"h-10 w-24 rounded-full border-2 border-gray-300 dark:border-gray-600 text-sm font-bold text-gray-600 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-900 dark:hover:text-white transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2"},[...e[26]||(e[26]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),k(" Reset ",-1)])]),t("button",{type:"submit",disabled:y.value,class:"h-10 w-24 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 dark:from-purple-600 dark:to-pink-600 text-sm font-bold text-white shadow hover:from-purple-600 hover:to-pink-600 dark:hover:from-purple-700 dark:hover:to-pink-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[y.value?(c(),u("span",Te,[...e[27]||(e[27]=[t("div",{class:"w-4 h-4 border-2 border-gray-200 border-t-transparent rounded-full animate-spin"},null,-1),k(" Saving... ",-1)])])):(c(),u("span",Ye,[...e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),k(" Save ",-1)])]))],8,Ge)])],32)])])])}}},Qe=R(qe,[["__scopeId","data-v-1338e0b7"]]);export{Qe as default};
