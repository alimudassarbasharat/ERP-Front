import{a as n,o as i,g as ke,_ as et,d as e,t as a,H as $t,l as c,w as Qe,c as S,p as St,R as At,q as Lt,y as _e,h as C,F as P,z as A,b as x,e as M,i as h,C as Bt,D as j,J as Vt,A as E,B as H,K as Xe,O as Ze,n as Rt,T as Yt}from"./index-xvPUEXLW.js";const Dt={class:"rounded-2xl bg-white/80 shadow-lg p-6 mb-6"},zt={__name:"UiCard",setup(re){return(u,p)=>(i(),n("div",Dt,[ke(u.$slots,"default")]))}},Et={class:"fixed inset-0 bg-white bg-opacity-95 backdrop-blur-sm z-50 flex items-center justify-center"},Kt={class:"text-center"},Tt={class:"w-full"},Ut={class:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2"},Ht={class:"text-gray-600 mb-6"},Ot={__name:"LoadingStudents",props:{title:{type:String,default:"Loading"},message:{type:String,default:"Please wait while we process your request..."}},setup(re){return(u,p)=>(i(),n("div",Et,[e("div",Kt,[p[1]||(p[1]=e("div",{class:"relative mb-8"},[e("div",{class:"w-20 h-20 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto"}),e("div",{class:"absolute inset-0 w-20 h-20 border-4 border-transparent border-r-purple-600 rounded-full animate-spin mx-auto animation-delay-150"})],-1)),e("div",Tt,[e("h3",Ut,a(re.title||"Loading"),1),e("p",Ht,a(re.message||"Please wait while we process your request..."),1),p[0]||(p[0]=e("div",{class:"flex justify-center space-x-2"},[e("div",{class:"w-3 h-3 bg-indigo-600 rounded-full dot-bounce"}),e("div",{class:"w-3 h-3 bg-purple-600 rounded-full dot-bounce animation-delay-100"}),e("div",{class:"w-3 h-3 bg-pink-600 rounded-full dot-bounce animation-delay-200"})],-1))])])]))}},Ie=et(Ot,[["__scopeId","data-v-1daa6ab7"]]),qt={class:"rounded-2xl bg-white/90 shadow-lg p-6"},Gt={class:"overflow-x-auto"},Wt={class:"min-w-full rounded-xl border-0"},Jt={class:"bg-gradient-to-r from-indigo-50 to-purple-50"},Qt={__name:"UiTable",setup(re){return(u,p)=>(i(),n("div",qt,[ke(u.$slots,"search"),e("div",Gt,[e("table",Wt,[e("thead",Jt,[ke(u.$slots,"head")]),e("tbody",null,[ke(u.$slots,"default")])])])]))}},Xt={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex flex-col items-center p-4 sm:p-6 lg:p-8"},Zt={class:"w-full max-w-7xl mx-auto mb-6 flex justify-end"},It={class:"flex bg-white rounded-full shadow-lg p-1 border border-purple-100"},es=["onClick"],ts={class:"relative z-10 flex items-center gap-2"},ss={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},os={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},as={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},ls={key:3,class:"px-2 py-0.5 rounded-full text-xs font-bold bg-white text-purple-700 border border-purple-200 ml-1"},rs={key:0,class:"absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 opacity-20 animate-pulse rounded-full"},ns={key:0,class:"h-6 w-px bg-purple-200 mx-1 self-center"},is={class:"w-full max-w-7xl mx-auto mt-2 mb-4 flex items-center justify-between bg-white/90 rounded-lg shadow-lg py-2 px-5 transition-all duration-500 border border-gray-200"},ds={class:"text-base font-medium text-gray-600 tracking-tight flex items-center gap-2"},us={class:"flex flex-wrap lg:flex-nowrap items-end gap-x-4 gap-y-2"},cs={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},ps={class:"relative"},fs=["value"],ms={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},vs={class:"relative"},xs=["value"],gs={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},ys={class:"relative"},hs=["value"],bs={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},ws={class:"relative"},_s=["value"],ks={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},Cs={class:"relative"},Ms=["value"],js={class:"w-full max-w-7xl mx-auto flex items-center justify-between mb-8"},Ps={class:"flex flex-col items-start"},Ns={class:"text-base font-medium text-gray-600 tracking-tight flex items-center gap-2"},Fs={class:"flex-1 flex justify-center"},$s={class:"relative w-full max-w-xs flex items-center"},Ss={class:"flex items-center gap-2 ml-4"},As={key:0,class:"flex items-center gap-2 cursor-pointer group relative"},Ls=["checked"],Bs={key:0,class:"absolute left-1 top-1"},Vs={class:"relative"},Rs={key:0,class:"w-full max-w-7xl mx-auto"},Ys={key:1,class:"w-full max-w-7xl mx-auto rounded-lg"},Ds=["onClick"],zs={key:0,class:"ml-2 flex-shrink-0"},Es={key:0,class:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},Ks={key:1,class:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},Ts={key:2,class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},Us={key:0},Hs=["colspan"],Os={class:"flex flex-col items-center justify-center"},qs={class:"text-center max-w-xs mx-auto"},Gs={class:"text-lg font-light text-gray-500 mb-1"},Ws={class:"text-gray-500 text-base font-light mb-2"},Js={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Qs={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Xs={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Zs={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Is={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},eo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},to={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},so={class:"flex flex-col gap-1"},oo={key:0,class:"flex items-center gap-1"},ao={class:"text-green-600 text-xs"},lo={key:1,class:"flex items-center gap-1"},ro={class:"text-red-600 text-xs"},no={key:2,class:"text-gray-500 text-xs"},io={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},uo={class:"py-2 px-2"},co={class:"py-2 px-2 text-right"},po={class:"flex items-center justify-end"},fo={class:"relative flex items-center mr-2"},mo=["checked","onChange"],vo={key:0,class:"absolute left-1 top-1 pointer-events-none"},xo=["onClick","disabled"],go=["onClick","disabled"],yo=["onClick"],ho={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},bo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},wo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},_o={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},ko={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Co={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Mo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},jo={class:"py-2 px-2"},Po={class:"py-2 px-2 text-right"},No={class:"flex items-center justify-end gap-2"},Fo=["onClick","disabled"],$o={key:0,class:"inline-block h-3 w-3 animate-spin rounded-full border-2 border-gray-200 border-t-transparent mr-1"},So={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Ao={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Lo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Bo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Vo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Ro={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Yo={class:"flex flex-col gap-1"},Do={key:0,class:"flex items-center gap-1"},zo={class:"text-green-600 text-xs"},Eo={key:1,class:"flex items-center gap-1"},Ko={class:"text-red-600 text-xs"},To={key:2,class:"text-gray-500 text-xs"},Uo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Ho={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Oo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},qo={class:"py-2 px-2"},Go={class:"py-2 px-2 text-right"},Wo={class:"flex items-center justify-end"},Jo={class:"relative flex items-center mr-2"},Qo=["checked","onChange"],Xo={key:0,class:"absolute left-1 top-1 pointer-events-none"},Zo=["onClick","disabled"],Io=["onClick","disabled"],ea=["onClick"],ta={class:"w-full max-w-7xl mx-auto mt-8 flex flex-row items-center justify-between"},sa={class:"text-gray-600 text-sm font-medium px-2"},oa={class:"flex items-center gap-4"},aa={class:"text-sm text-gray-600 font-medium flex items-center gap-1"},la=["value"],ra={class:"text-sm text-gray-600 font-medium flex items-center gap-1"},na=["max"],ia={class:"w-full max-w-7xl mx-auto mt-2 flex justify-center"},da={class:"flex items-center gap-2"},ua=["disabled"],ca={class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-600 text-white text-base font-bold shadow-md"},pa=["disabled"],fa={class:"w-full flex items-center justify-between px-6 py-4 rounded-t-2xl bg-gradient-to-r from-purple-600 via-pink-500 to-purple-700"},ma={key:0,class:"bg-gradient-to-br from-gray-50 to-#ffffff rounded-b-2xl p-6"},va={class:"bg-white rounded-xl p-4 mb-6 shadow-sm border border-gray-200"},xa={class:"flex items-center gap-4"},ga={class:"flex-1"},ya={class:"text-base font-bold text-gray-900"},ha={class:"text-xs text-gray-600"},ba={class:"text-xs text-gray-500"},wa={class:"text-right"},_a={class:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ka={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200"},Ca={class:"text-sm font-bold text-blue-800"},Ma={class:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200"},ja={class:"text-sm font-bold text-yellow-800"},Pa={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200"},Na={class:"text-sm font-bold text-green-800"},Fa={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border border-red-200"},$a={class:"text-sm font-bold text-red-800"},Sa={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},Aa={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},La={class:"space-y-4"},Ba={class:"space-y-4"},Va={class:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200"},Ra={class:"flex justify-between items-center mb-2"},Ya={class:"text-sm font-bold text-purple-700"},Da={class:"flex justify-between items-center mb-2"},za={class:"text-sm font-semibold text-blue-600"},Ea={class:"border-t border-purple-200 pt-2"},Ka={class:"flex justify-between items-center"},Ta={class:"text-sm font-bold text-red-600"},Ua={class:"relative"},Ha={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},Oa={class:"flex items-center gap-2"},qa={class:"text-sm text-red-700"},Ga={key:0,class:"flex gap-3 px-6 pb-6 justify-end"},Wa=["disabled"],Ja={key:0,class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-gray-200 border-t-transparent"},Qa={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},Xa={class:"w-full flex items-center justify-between px-6 py-4 rounded-t-2xl bg-gradient-to-r from-blue-600 via-purple-500 to-blue-700"},Za={key:0,class:"bg-gradient-to-br from-gray-50 to-#ffffff rounded-b-2xl p-6"},Ia={class:"bg-white rounded-xl p-4 mb-6 shadow-sm border border-gray-200"},el={class:"flex items-center gap-4"},tl={class:"flex-1"},sl={class:"text-base font-bold text-gray-900"},ol={class:"text-xs text-gray-600"},al={class:"text-xs text-gray-500"},ll={class:"text-right"},rl={class:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},nl={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200"},il={class:"text-sm font-bold text-blue-800"},dl={class:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200"},ul={class:"text-sm font-bold text-yellow-800"},cl={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200"},pl={class:"text-sm font-bold text-green-800"},fl={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border border-red-200"},ml={class:"text-sm font-bold text-red-800"},vl={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},xl={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},gl={class:"space-y-4"},yl={class:"relative"},hl={class:"space-y-4"},bl={class:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200"},wl={class:"flex justify-between items-center mb-2"},_l={class:"text-sm font-bold text-blue-700"},kl={class:"flex justify-between items-center mb-2"},Cl={class:"text-sm font-semibold text-orange-600"},Ml={class:"flex justify-between items-center mb-2"},jl={class:"text-sm font-semibold text-green-600"},Pl={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},Nl={class:"flex items-center gap-2"},Fl={class:"text-xs text-red-700"},$l={key:0,class:"flex gap-3 px-6 pb-6 justify-end"},Sl=["disabled"],Al={key:0,class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-gray-200 border-t-transparent"},Ll={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},Bl={class:"w-full flex items-center justify-between px-6 py-4 rounded-t-2xl bg-gradient-to-r from-indigo-600 via-purple-500 to-indigo-700"},Vl={key:0,class:"bg-gradient-to-br from-gray-50 to-#ffffff rounded-b-2xl p-6"},Rl={class:"bg-white rounded-xl p-6 mb-6 shadow-sm border border-gray-200"},Yl={class:"flex items-center gap-4"},Dl={class:"flex-1"},zl={class:"text-base font-bold text-gray-900"},El={class:"text-xs text-gray-600"},Kl={class:"text-xs text-gray-500"},Tl={class:"text-right"},Ul={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Hl={class:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200 shadow-sm"},Ol={class:"flex items-center gap-3 mb-3"},ql={class:"text-sm font-bold text-green-700"},Gl={class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200 shadow-sm"},Wl={class:"flex items-center gap-3 mb-3"},Jl={class:"text-sm font-bold text-blue-700"},Ql={class:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200 shadow-sm"},Xl={class:"flex items-center gap-3 mb-3"},Zl={class:"text-sm font-bold text-purple-700"},Il={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},er={key:0,class:"py-12"},tr={key:1},sr={class:"space-y-3 max-h-80 overflow-y-auto"},or={class:"flex items-center justify-between mb-3"},ar={class:"flex items-center gap-4"},lr={class:"font-bold text-gray-900 text-sm"},rr={class:"text-xs text-gray-500"},nr={class:"text-right"},ir={class:"text-xs font-semibold text-gray-900 mb-1"},dr={class:"text-xs text-gray-500"},ur={key:0,class:"bg-white rounded-lg p-3 border border-gray-200 mb-3"},cr={class:"text-xs text-gray-900"},pr={class:"flex items-center justify-between pt-3 border-t border-gray-200"},fr={class:"text-xs text-gray-500"},mr={class:"font-semibold text-gray-900"},vr={class:"text-xs text-gray-500"},xr={key:0,class:"text-center py-12"},gr={class:"flex justify-center"},yr={key:0,class:"flex justify-end gap-3 px-6 pb-6"},hr={class:"p-4"},br={class:"text-base font-semibold mb-4 text-purple-700"},wr={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4"},_r={class:"flex items-center gap-2"},kr={class:"text-sm text-yellow-800"},Cr={class:"space-y-3 max-h-96 overflow-y-auto"},Mr={class:"flex-1"},jr={class:"font-medium text-gray-900"},Pr={class:"text-sm text-gray-600"},Nr={class:"text-xs text-gray-500"},Fr={class:"flex gap-2"},$r=["onClick"],Sr=["onClick"],Ar={class:"flex-1"},Lr={class:"font-medium text-gray-900"},Br={class:"text-sm text-gray-600"},Vr={class:"text-xs text-gray-500"},Rr={class:"flex gap-2"},Yr=["onClick"],Dr=["onClick"],zr={key:0,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},Er={class:"flex items-center gap-2"},Kr={class:"text-sm text-green-800"},Tr={key:1,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},Ur={class:"flex items-center justify-between"},Hr={class:"text-sm text-green-600"},Or=["disabled"],qr={key:0,class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-gray-200 border-t-transparent mr-2"},Gr={key:2,class:"text-center py-8"},Wr={class:"text-lg font-medium text-gray-900 mb-2"},Jr={class:"text-gray-500"},Qr={class:"flex gap-2 justify-end mt-4 pt-4 border-t border-gray-200"},Xr={class:"w-full flex items-center justify-between px-6 py-4 rounded-t-2xl bg-gradient-to-r from-indigo-600 via-purple-500 to-indigo-700"},Zr={key:0,class:"bg-gradient-to-br from-gray-50 to-#ffffff rounded-b-2xl p-6"},Ir={class:"bg-white rounded-xl p-6 mb-6 shadow-sm border border-gray-200"},en={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},tn={class:"space-y-3"},sn={class:"flex justify-between items-center"},on={class:"text-sm font-semibold text-gray-900"},an={class:"flex justify-between items-center"},ln={class:"text-sm font-semibold text-gray-900"},rn={class:"flex justify-between items-center"},nn={class:"text-sm font-semibold text-gray-900"},dn={class:"flex justify-between items-center"},un={class:"text-sm font-semibold text-gray-900"},cn={class:"flex justify-between items-start"},pn={class:"text-sm font-semibold text-gray-900 text-right max-w-xs"},fn={class:"space-y-3"},mn={class:"flex justify-between items-center"},vn={class:"text-sm font-semibold text-gray-900"},xn={class:"flex justify-between items-center"},gn={class:"text-sm font-semibold text-blue-600"},yn={class:"flex justify-between items-center"},hn={class:"text-sm font-semibold text-green-600"},bn={class:"flex justify-between items-center"},wn={class:"text-sm font-semibold text-red-600"},_n={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},kn={class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},Cn={key:0,class:"flex items-center justify-center py-8"},Mn={key:1,class:"text-center py-8"},jn={key:2,class:"overflow-x-auto"},Pn={class:"w-full"},Nn={class:"py-4 px-4"},Fn={class:"flex items-center gap-3"},$n={class:"font-semibold text-gray-900 text-sm"},Sn={class:"text-xs text-gray-500"},An={class:"py-4 px-4"},Ln={class:"text-sm text-gray-900"},Bn={class:"py-4 px-4 text-right"},Vn={class:"text-sm font-semibold text-blue-600"},Rn={class:"py-4 px-4 text-right"},Yn={class:"text-sm font-semibold text-green-600"},Dn={class:"py-4 px-4 text-right"},zn={class:"text-sm font-semibold text-red-600"},En={class:"py-4 px-4 text-center"},Kn={__name:"PayFee",setup(re){const u=$t(),p=c(null),L=c(0),B=c(0),Y=c(0),ne=c(""),Ce=c(""),Ye=c(""),O=c(!1),Z=c(!1),_=c(!1);Qe(p,o=>{if(o&&typeof o=="object")try{L.value=Number(o.discount_fee||0),B.value=Number(o.late_fee||0)}catch(t){console.error("Error updating editable fields:",t),L.value=0,B.value=0}});const De=S(()=>{if(!p.value)return 0;const o=Number(p.value.base_fee||0),t=Number(p.value.carry_forward||0),l=Number(L.value||0),r=Number(B.value||0),d=Math.ceil(o+t-l+r);return Math.max(d,0)}),N=S(()=>{if(!p.value)return 0;try{const o=Number(p.value.partial_fee||0),t=Number(L.value||0),l=Number(B.value||0),r=Math.ceil(o-t+l);return Math.max(r,0)}catch(o){return console.error("Error in computedRemainingAmount:",o),0}}),k=At,tt=["2022-2023","2023-2024","2024-2025"],st=["January","February","March","April","May","June","July","August","September","October","November","December"],q=c("2024-2025"),pe=c(""),Me=c(""),G=c("January");c("All");const I=c([]),fe=c([]),g=c([]),ot=c(null),at=["Paid","Unpaid","All"],W=c("All"),lt=c(!1);c([]),c([]);const b=c(1),F=c(0),me=c(""),K=c(!1),T=c("name"),D=c("asc"),J=c(10),ve=S(()=>F.value>0?Math.ceil(F.value/J.value):1);S(()=>{const o=[],t=ve.value,l=b.value;if(t<=4){for(let r=1;r<=t;r++)o.push({type:"page",page:r,key:`page-${r}`});return o}return o.push({type:"page",page:1,key:"page-1"}),l===1?(o.push({type:"page",page:2,key:"page-2"}),t>3&&o.push({type:"ellipsis",key:"ellipsis-1"})):l===2?(o.push({type:"page",page:2,key:"page-2"}),o.push({type:"page",page:3,key:"page-3"}),t>4&&o.push({type:"ellipsis",key:"ellipsis-2"})):l>=t-1?(t>4&&o.push({type:"ellipsis",key:"ellipsis-3"}),o.push({type:"page",page:t-2,key:`page-${t-2}`}),o.push({type:"page",page:t-1,key:`page-${t-1}`})):(o.push({type:"ellipsis",key:"ellipsis-4"}),o.push({type:"page",page:l,key:`page-${l}`}),o.push({type:"page",page:l+1,key:`page-${l+1}`}),o.push({type:"ellipsis",key:"ellipsis-5"})),o.push({type:"page",page:t,key:`page-${t}`}),o}),c(!1),c(!1),c(!1);const ee=c(""),rt=c(!1),te=c(null),ie=c(!1),V=c(null),Q=c([]),je=c(!1);Qe(rt,o=>{o?g.value.forEach(t=>{t.isSelected=!0}):g.value.forEach(t=>{t.isSelected=!1})}),St(async()=>{try{const o=await k.get("http://localhost:8000/api/classes");o.data.success&&Array.isArray(o.data.result)?(I.value=o.data.result,I.value.length>0&&(pe.value=I.value[0].id)):I.value=[]}catch{I.value=[],u.error("Failed to fetch classes")}try{const o=await k.get("http://localhost:8000/api/sections");o.data.success&&Array.isArray(o.data.result)?fe.value=o.data.result:fe.value=[]}catch{fe.value=[],u.error("Failed to fetch sections")}window.addEventListener("click",ze),window.addEventListener("click",Ee),await $()}),Lt(()=>{window.removeEventListener("click",ze),window.removeEventListener("click",Ee)});async function $(o=1){K.value=!0;try{if(f.value==="student"){const t={class_id:pe.value||"",section_id:Me.value||"",fee_status:W.value==="All"?"":W.value,page:o,per_page:J.value,sort_by:T.value,sort_direction:D.value,session:q.value,month:G.value},l=await k.get("http://localhost:8000/api/students",{params:t});l.data.status?(g.value=(l.data.result.data||[]).map(r=>(console.log("Student status from backend:",r.status,"Type:",typeof r.status),{grNo:r.id||r.gr_no,name:`${r.first_name} ${r.last_name||""} / ${r.family_father_name||""}`,familyCode:r.merchant_id||"",classSection:[r.class_name,r.section_name].filter(Boolean).join(" / ")||"â€”",carry_forward:r.prev_amount||0,partial_fee:r.remaining_amount||0,base_fee:r.monthly_fee||0,discount_fee:r.discount_amount||0,late_fee:r.late_fee||0,total_fee:r.total_amount||0,accumulated_paid:r.accumulated_paid||0,status:r.status||"unpaid",contactEmail:r.contact_email||"",fatherName:r.family_father_name||"",motherName:r.family_mother_name||"",isSelected:!1,class_id:r.class_id,section_id:r.section_id})),F.value=l.data.result.total||0,b.value=l.data.result.current_page||1):(g.value=[],b.value=1,u.error(l.data.message||"Failed to fetch students"))}else f.value==="class"?await Fe():f.value==="family"&&await $e()}catch(t){console.error("Error fetching data:",t),f.value==="student"?(g.value=[],b.value=1,u.error("Failed to fetch students")):f.value==="class"?(z.value=[],F.value=0,u.error("Failed to fetch class-wise data")):f.value==="family"&&(R.value=[],F.value=0,u.error("Failed to fetch family-wise data"))}finally{K.value=!1}}function nt(){ot.value=null}function ze(o){o.target.closest(".action-menu-wrap")||nt()}function Ee(o){o.target.closest(".modern-multiselect")||(lt.value=!1)}function Ke(o){o<1||o>ve.value||o===b.value||$(o)}function it(o){o!=="action"&&(T.value===o?D.value=D.value==="asc"?"desc":"asc":(T.value=o,D.value="asc"),$())}function dt(){}const f=c("student"),z=c([]),R=c([]),Pe=S(()=>[{key:"student",label:"Student Wise",icon:"User",count:ut()},{key:"class",label:"Class Wise",icon:"AcademicCap",count:ct()},{key:"family",label:"Family Wise",icon:"Users",count:pt()}]);function ut(){return Array.isArray(g.value)?g.value.length:0}function ct(){return Array.isArray(z.value)?z.value.length:0}function pt(){return Array.isArray(R.value)?R.value.length:0}const ft=S(()=>{const o=Pe.value.find(t=>t.key===f.value);return o?o.label:"Student Wise"}),xe=S(()=>{switch(f.value){case"student":return"Student List";case"class":return"Class List";case"family":return"Family List";default:return"Student List"}}),Ne=S(()=>{switch(f.value){case"student":return g.value;case"class":return z.value;case"family":return R.value;default:return g.value}}),w=S(()=>{if(!ee.value)switch(f.value){case"student":return g.value.filter(t=>t.status!=="paid");case"class":return z.value.filter(t=>{const l=!ge.value||t.id==ge.value,r=!ye.value||t.sectionId&&t.sectionId==ye.value;return l&&r});case"family":return R.value.filter(t=>t.status!=="paid");default:return Ne.value}const o=ee.value.toLowerCase();switch(f.value){case"student":return g.value.filter(t=>t.status!=="paid"&&(t.name.toLowerCase().includes(o)||t.familyCode.toLowerCase().includes(o)||t.classSection.toLowerCase().includes(o)));case"class":return z.value.filter(t=>{const l=t.name.toLowerCase().includes(o),r=!ge.value||t.id==ge.value,d=!ye.value||t.sectionId&&t.sectionId==ye.value;return l&&r&&d});case"family":return R.value.filter(t=>t.status!=="paid"&&(t.fatherName.toLowerCase().includes(o)||t.familyCode.toLowerCase().includes(o)));default:return Ne.value}}),Te=S(()=>{switch(f.value){case"student":return[{key:"grNo",label:"GR. No",width:"80px"},{key:"name",label:"Student / Father",width:"180px"},{key:"classSection",label:"Class",width:"80px"},{key:"carry_forward",label:"Prev Dues",width:"80px"},{key:"base_fee",label:"Monthly",width:"80px"},{key:"partial_fee",label:"Remaining",width:"80px"},{key:"discount_late",label:"D/L Fee",width:"80px"},{key:"total_fee",label:"Total",width:"80px"},{key:"status",label:"Status",width:"80px"},{key:"action",label:"Action",width:"250px"}];case"class":return[{key:"name",label:"Class Name"},{key:"studentCount",label:"Total Students"},{key:"totalFee",label:"Total Fee"},{key:"paidStudents",label:"Paid Students"},{key:"remainingStudents",label:"Remaining Students"},{key:"totalPaidFees",label:"Paid Fee"},{key:"totalRemainingFees",label:"Remaining Fee"},{key:"status",label:"Status"},{key:"action",label:"Action"}];case"family":return[{key:"familyCode",label:"Family Code",width:"100px"},{key:"fatherName",label:"Father Name",width:"150px"},{key:"childrenCount",label:"Children",width:"80px"},{key:"totalBalance",label:"Prev Dues",width:"80px"},{key:"monthlyFees",label:"Monthly",width:"80px"},{key:"discount_late",label:"D/L Fee",width:"80px"},{key:"totalAmount",label:"Total",width:"80px"},{key:"totalPaid",label:"Paid",width:"80px"},{key:"remainingAmount",label:"Remaining",width:"80px"},{key:"status",label:"Status",width:"80px"},{key:"action",label:"Action",width:"120px"}];default:return[]}});function mt(o){f.value!==o&&(K.value=!0,setTimeout(()=>{f.value=o,o==="class"?Fe():o==="family"?$e():$(),K.value=!1},300))}async function Fe(){var o,t;K.value=!0;try{const l={};q.value&&(l.session=q.value),G.value&&(l.month=G.value),T.value&&(l.sort_by=T.value),D.value&&(l.sort_direction=D.value);const r=await k.get("http://localhost:8000/api/class-fee-summaries",{params:l});r.data.status&&Array.isArray(r.data.result)?(z.value=r.data.result.map(d=>({id:d.class_id,class_id:d.class_id,section_id:d.section_id,name:d.class_name+(d.section_name?` - ${d.section_name}`:""),studentCount:d.total_students,totalFee:d.total_fees||0,paidStudents:d.paid_students,remainingStudents:d.remaining_students,totalPaidFees:d.total_paid_fees,totalRemainingFees:d.total_remaining_fees,status:d.status,isSelected:!1})),F.value=z.value.length):(z.value=[],F.value=0,r.data.status===!1&&u.error(r.data.message||"Failed to fetch class-wise data"))}catch(l){console.error("Class data fetch error:",l),z.value=[],F.value=0,u.error(((t=(o=l.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to fetch class-wise data")}finally{K.value=!1}}async function $e(){var o,t;K.value=!0;try{const l={page:b.value,per_page:J.value};q.value&&(l.session=q.value),G.value&&(l.month=G.value),T.value&&(l.sort_by=T.value),D.value&&(l.sort_direction=D.value),ee.value&&(l.search=ee.value),W.value&&W.value!=="All"&&(l.fee_status=W.value);const r=await k.get("http://localhost:8000/api/family-fee-summaries",{params:l});if(r.data.status&&r.data.result){const d=r.data.result,m=Array.isArray(d)?d:d.data||[];R.value=m.map(s=>({id:s.family_id,familyCode:s.family_code,fatherName:s.father_name,motherName:s.mother_name,contactNumber:s.contact_number,address:s.address,childrenCount:s.children_count,totalBalance:s.total_balance,monthlyFees:s.monthly_fees,totalAmount:s.total_amount,totalPaid:s.total_paid,remainingAmount:s.remaining_amount,totalDiscount:s.total_discount,totalLateFee:s.total_late_fee,paidStudents:s.paid_students,unpaidStudents:s.unpaid_students,status:s.status,isSelected:!1})),Array.isArray(d)?F.value=R.value.length:(F.value=d.total||0,b.value=d.current_page||1)}else R.value=[],F.value=0,r.data.status===!1&&u.error(r.data.message||"Failed to fetch family-wise data")}catch(l){console.error("Family data fetch error:",l),R.value=[],F.value=0,u.error(((t=(o=l.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to fetch family-wise data")}finally{K.value=!1}}const ge=c(""),ye=c(""),Se=S(()=>f.value==="student"?w.value.length>0&&w.value.every(o=>o.isSelected):f.value==="class"?w.value.length>0&&w.value.every(o=>o.isSelected):f.value==="family"?w.value.length>0&&w.value.every(o=>o.isSelected):!1),vt=o=>{f.value==="student"?w.value.forEach(t=>t.isSelected=o):f.value==="class"?w.value.forEach(t=>t.isSelected=o):f.value==="family"&&w.value.forEach(t=>t.isSelected=o)},Ue=S(()=>f.value==="student"?w.value.filter(o=>o.isSelected&&o.status!=="paid"):[]),de=S(()=>f.value==="student"?w.value.filter(o=>!o.isSelected&&o.status!=="paid"):[]),He=S(()=>f.value==="family"?w.value.filter(o=>o.isSelected&&o.status!=="paid"):[]),ue=S(()=>f.value==="family"?w.value.filter(o=>!o.isSelected&&o.status!=="paid"):[]);c([]),c([]),c([]);const X=c(!1),ce=c(""),Ae=c(""),Le=c("Cash"),Be=c("Cash");function Ve(o){if(o.status==="paid"){u.warning(`${o.name} ki fee already paid hai.`);return}o.isSelected?(p.value=o,ce.value="",Ae.value="",X.value=!0,se(o.grNo).then(t=>{if(t){const l=t.total_due||0;if(l>0){const r=g.value.findIndex(d=>d.grNo===o.grNo);r!==-1&&(g.value[r].partial_fee=l)}}})):xt(o)}const xt=async o=>{var t,l;_.value=!0;try{const r=dayjs().format("YYYY-MM-01"),d=g.value.find(y=>y.grNo===o.grNo);if(!d){u.error("Could not find student data to process payment."),_.value=!1;return}const m=Math.ceil(Number(d.partial_fee||0));if(m<=0){u.warning(`No fee due for ${o.name}. Remaining amount is ${m}.`),_.value=!1;return}const s={student_id:d.grNo,class_id:d.class_id,month_for:r,base_fee:Math.ceil(Number(d.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(d.carry_forward||0)),final_amount:m,amount_paid:m,payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Auto Payment",remarks:`Auto full payment of ${m} submitted.`,received_by:1},v=await k.post("http://localhost:8000/api/fee-full-payment",s);v.data.status?(u.success(`Full payment submitted for ${o.name}!`),await se(d.grNo),await $(b.value)):u.error(v.data.message||"Failed to submit payment.")}catch(r){console.error("Error submitting auto full payment:",r),u.error(((l=(t=r.response)==null?void 0:t.data)==null?void 0:l.message)||"An unexpected error occurred.")}finally{_.value=!1}},se=async o=>{try{const t=await k.get(`http://localhost:8000/api/fee-payment-history/${o}`);if(t.data.status){const l=t.data.result,r=g.value.findIndex(d=>d.grNo===o);return r!==-1&&l.fee_summary&&(g.value[r]={...g.value[r],...l.fee_summary}),l}return null}catch(t){return console.error("Error fetching fee summary:",t),null}};function Oe(o){if(o.status==="paid"){u.warning(`${o.name} ki fee already paid hai.`);return}o.isSelected?(p.value=o,Y.value=0,ne.value="",Ce.value="",O.value=!0,se(o.grNo).then(t=>{if(t){const l=t.total_due||0;if(l>0){const r=g.value.findIndex(d=>d.grNo===o.grNo);r!==-1&&(g.value[r].partial_fee=l)}}})):gt(o)}const gt=async o=>{var t,l;_.value=!0;try{const r=dayjs().format("YYYY-MM-01"),d=g.value.find(Re=>Re.grNo===o.grNo);if(!d){u.error("Could not find student data to process payment."),_.value=!1;return}const m=Math.ceil(Number(d.partial_fee||0));if(m<=0){u.warning(`No fee due for ${o.name}. Remaining amount is ${m}.`),_.value=!1;return}const s=Math.ceil(m*.5),v={student_id:d.grNo,class_id:d.class_id,month_for:r,base_fee:Math.ceil(Number(d.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(d.carry_forward||0)),final_amount:m,amount_paid:s,payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Auto Payment",remarks:`Auto partial payment of ${s} (50% of ${m}) submitted.`,received_by:1},y=await k.post("http://localhost:8000/api/fee-partial-payment",v);y.data.status?(u.success(`Partial payment submitted for ${o.name}!`),await se(d.grNo),await $(b.value)):u.error(y.data.message||"Failed to submit payment.")}catch(r){console.error("Error submitting auto partial payment:",r),u.error(((l=(t=r.response)==null?void 0:t.data)==null?void 0:l.message)||"An unexpected error occurred.")}finally{_.value=!1}},yt=async()=>{var l,r;const o=N.value;if(o<=0){u.warning("No fee due for this student. Remaining amount is 0.");return}const t=Math.max(100,o*.1);if(Y.value<t||Y.value>o){u.error(`Invalid amount. Please enter a value between ${t} and ${o}`);return}_.value=!0;try{const d=dayjs().format("YYYY-MM-01"),m=g.value.find(y=>y.grNo===p.value.grNo);if(!m){u.error("Could not find student data to process payment."),_.value=!1;return}const s={student_id:m.grNo,class_id:m.class_id,month_for:d,base_fee:Math.ceil(Number(m.base_fee||0)),discount_amount:Math.ceil(Number(L.value||0)),late_fee:Math.ceil(Number(B.value||0)),carry_forward:Math.ceil(Number(m.carry_forward||0)),final_amount:Math.ceil(Number(o||0)),amount_paid:Math.ceil(Number(Y.value||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:Be.value,remarks:ne.value||`Partial payment of ${Y.value} received.`,received_by:1},v=await k.post("http://localhost:8000/api/fee-partial-payment",s);v.data.status?(u.success(`Partial payment of PKR ${Y.value} saved successfully!`),await se(m.grNo),O.value=!1,Y.value=0,ne.value="",L.value=0,B.value=0,await $(b.value)):u.error(v.data.message||"Failed to save payment.")}catch(d){console.error("Error submitting partial payment:",d);const m=((r=(l=d.response)==null?void 0:l.data)==null?void 0:r.message)||"An unexpected error occurred.";u.error(m)}finally{_.value=!1}},ht=async()=>{var o,t;_.value=!0;try{const l=dayjs().format("YYYY-MM-01"),r=g.value.find(s=>s.grNo===p.value.grNo);if(!r){u.error("Could not find student data to process payment."),_.value=!1;return}const d={student_id:r.grNo,class_id:r.class_id,month_for:l,base_fee:Math.ceil(Number(r.base_fee||0)),discount_amount:Math.ceil(Number(L.value||0)),late_fee:Math.ceil(Number(B.value||0)),carry_forward:Math.ceil(Number(r.carry_forward||0)),final_amount:Math.ceil(Number(De.value||0)),amount_paid:Math.ceil(Number(N.value||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:Le.value,remarks:ce.value||`Full payment of ${N.value} received.`,received_by:1},m=await k.post("http://localhost:8000/api/fee-full-payment",d);m.data.status?(u.success(`Full payment of PKR ${N.value} saved successfully!`),await se(r.grNo),X.value=!1,ce.value="",L.value=0,B.value=0,await $(b.value)):u.error(m.data.message||"Failed to save payment.")}catch(l){console.error("Error submitting full payment:",l);const r=((t=(o=l.response)==null?void 0:o.data)==null?void 0:t.message)||"An unexpected error occurred.";u.error(r)}finally{_.value=!1}},oe=c(!1),ae=c([]),he=c(0),be=c(0),we=c(!1);function bt(o){p.value=o,oe.value=!0,we.value=!0,wt()}async function wt(){try{const o=await k.get(`http://localhost:8000/api/fee-payment-history/${p.value.grNo}`);if(o.data.status){const t=o.data.result;if(ae.value=t.payments||[],he.value=t.total_paid||0,be.value=t.total_due||0,t.student_info&&(p.value={...p.value,...t.student_info}),t.fee_summary){const l=g.value.findIndex(r=>r.grNo===p.value.grNo);l!==-1&&(g.value[l]={...g.value[l],...t.fee_summary})}}else ae.value=[],he.value=0,be.value=0,u.error(o.data.message||"Failed to fetch payment history")}catch(o){console.error("Error fetching payment history:",o),ae.value=[],he.value=0,be.value=0,u.error("Failed to fetch payment history")}finally{we.value=!1}}function qe(o){return dayjs(o).format("DD MMM YYYY HH:mm")}function _t(o){return dayjs(o).format("HH:mm")}function U(o){return Math.ceil(Number(o||0))}function kt(){O.value=!1,setTimeout(()=>{p.value=null},300)}function Ct(){X.value=!1,setTimeout(()=>{p.value=null},300)}function Mt(){oe.value=!1,setTimeout(()=>{p.value=null},300)}const le=c(!1),jt=async()=>{if(de.value.length===0){u.warning("No uncheck students found for auto payment.");return}le.value=!0;let o=0,t=0;try{for(const l of de.value)try{const r=dayjs().format("YYYY-MM-01"),d={student_id:l.grNo,class_id:l.class_id,month_for:r,base_fee:Math.ceil(Number(l.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(l.carry_forward||0)),final_amount:Math.ceil(Number(l.total_fee||0)),amount_paid:Math.ceil(Number(l.total_fee||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Auto Payment",remarks:`Auto payment of ${Math.ceil(Number(l.total_fee||0))} submitted.`,received_by:1};if((await k.post("http://localhost:8000/api/fee-full-payment",d)).data.status){o++;const s=g.value.findIndex(v=>v.grNo===l.grNo);s!==-1&&(g.value[s].status="Paid",g.value[s].carry_forward=0)}else t++}catch(r){console.error(`Error processing auto payment for ${l.name}:`,r),t++}o>0?(u.success(`Auto payment completed! ${o} successful, ${t} failed.`),Z.value=!1,await $(b.value)):u.error("All auto payments failed. Please try again.")}catch(l){console.error("Error in auto payment process:",l),u.error("Auto payment process failed. Please try again.")}finally{le.value=!1}},Pt=async()=>{if(ue.value.length===0){u.warning("No uncheck families found for auto payment.");return}le.value=!0;let o=0,t=0;try{for(const l of ue.value)try{const r=await k.get(`http://localhost:8000/api/family/${l.id}/students`);if(r.data.status){const d=r.data.result.students||[];let m=0,s=0;for(const v of d)if(v.payment_status!=="paid"&&v.remaining_amount>0)try{const y={student_id:v.id,class_id:v.class_id,month_for:dayjs().format("YYYY-MM-01"),base_fee:Math.ceil(Number(v.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(v.carry_forward||0)),final_amount:Math.ceil(Number(v.remaining_amount||0)),amount_paid:Math.ceil(Number(v.remaining_amount||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Auto Family Payment",remarks:`Auto family payment for ${l.fatherName}`,received_by:1};(await k.post("http://localhost:8000/api/fee-full-payment",y)).data.status?m++:s++}catch(y){console.error(`Error processing auto payment for student ${v.name}:`,y),s++}if(m>0){o++;const v=R.value.findIndex(y=>y.id===l.id);v!==-1&&(R.value[v].status="Paid")}else t++}else t++}catch(r){console.error(`Error processing auto payment for family ${l.fatherName}:`,r),t++}o>0?(u.success(`Auto family payment completed! ${o} families successful, ${t} failed.`),Z.value=!1,f.value==="family"&&await $e()):u.error("All auto family payments failed. Please try again.")}catch(l){console.error("Error in auto family payment process:",l),u.error("Auto family payment process failed. Please try again.")}finally{le.value=!1}};async function Nt(o){try{await ElMessageBox.confirm(`Are you sure you want to pay fees for all ${o.studentCount} students in ${o.name}?`,"Pay Class Fees",{confirmButtonText:"Yes, Pay All",cancelButtonText:"Cancel",type:"warning"}),te.value=o.id;const t={class_id:o.class_id||o.id,section_id:o.section_id,payment_mode:"cash",payment_date:dayjs().format("YYYY-MM-DD"),received_by:1,remarks:`Bulk payment for class ${o.name}`},l=await k.post(`http://localhost:8000/api/class/${o.id}/pay-fees`,t);l.data.status?(u.success(`${l.data.result.success_count} students paid successfully!`),f.value==="class"&&Fe()):u.error(l.data.message||"Failed to pay class fees")}catch(t){t!=="cancel"&&(console.error("Error paying class fees:",t),u.error("Failed to pay class fees"))}finally{te.value=null}}async function Ft(o){V.value=o,ie.value=!0,je.value=!0;try{const t=await k.get(`http://localhost:8000/api/family/${o.id}/students`);t.data.status?(Q.value=t.data.result.students||[],V.value={...V.value,...t.data.result.family,total_amount:t.data.result.total_amount,total_paid:t.data.result.total_paid,total_remaining:t.data.result.total_remaining,students_count:t.data.result.students_count}):(u.error("Failed to fetch family students"),Q.value=[])}catch(t){console.error("Error fetching family students:",t),u.error("Failed to fetch family students"),Q.value=[]}finally{je.value=!1}}function Ge(){ie.value=!1,setTimeout(()=>{V.value=null,Q.value=[]},300)}async function We(o){try{await ElMessageBox.confirm(`Are you sure you want to pay full fees (PKR ${U(o.remainingAmount)}) for ${o.fatherName}'s family?`,"Pay Family Full Fees",{confirmButtonText:"Yes, Pay Full",cancelButtonText:"Cancel",type:"warning"});const t=await k.get(`http://localhost:8000/api/family/${o.id}/students`);if(t.data.status){const l=t.data.result.students||[];let r=0,d=0;for(const m of l)if(m.payment_status!=="paid"&&m.remaining_amount>0)try{const s={student_id:m.id,class_id:m.class_id,month_for:dayjs().format("YYYY-MM-01"),base_fee:Math.ceil(Number(m.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(m.carry_forward||0)),final_amount:Math.ceil(Number(m.remaining_amount||0)),amount_paid:Math.ceil(Number(m.remaining_amount||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Family Payment",remarks:`Family full payment for ${o.fatherName}`,received_by:1};(await k.post("http://localhost:8000/api/fee-full-payment",s)).data.status?r++:d++}catch(s){console.error(`Error paying for student ${m.name}:`,s),d++}r>0?(u.success(`Family payment completed! ${r} students paid successfully, ${d} failed.`),await $(b.value)):u.error("All family payments failed. Please try again.")}else u.error("Failed to fetch family students for payment")}catch(t){t!=="cancel"&&(console.error("Error paying family fees:",t),u.error("Failed to pay family fees"))}}async function Je(o){try{const t=Math.ceil(Number(o.remainingAmount||0)*.5);await ElMessageBox.confirm(`Are you sure you want to pay partial fees (PKR ${U(t)}) for ${o.fatherName}'s family?`,"Pay Family Partial Fees",{confirmButtonText:"Yes, Pay Partial",cancelButtonText:"Cancel",type:"warning"});const l=await k.get(`http://localhost:8000/api/family/${o.id}/students`);if(l.data.status){const r=l.data.result.students||[];let d=0,m=0;for(const s of r)if(s.payment_status!=="paid"&&s.remaining_amount>0)try{const v=Math.ceil(Number(s.remaining_amount||0)*.5),y={student_id:s.id,class_id:s.class_id,month_for:dayjs().format("YYYY-MM-01"),base_fee:Math.ceil(Number(s.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(s.carry_forward||0)),final_amount:Math.ceil(Number(s.remaining_amount||0)),amount_paid:v,payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Family Partial Payment",remarks:`Family partial payment for ${o.fatherName}`,received_by:1};(await k.post("http://localhost:8000/api/fee-partial-payment",y)).data.status?d++:m++}catch(v){console.error(`Error paying partial for student ${s.name}:`,v),m++}d>0?(u.success(`Family partial payment completed! ${d} students paid successfully, ${m} failed.`),await $(b.value)):u.error("All family partial payments failed. Please try again.")}else u.error("Failed to fetch family students for payment")}catch(t){t!=="cancel"&&(console.error("Error paying family partial fees:",t),u.error("Failed to pay family partial fees"))}}return(o,t)=>{const l=_e("el-input-number"),r=_e("el-input"),d=_e("el-dialog"),m=_e("el-button");return i(),n("div",Xt,[e("div",Zt,[e("div",It,[(i(!0),n(P,null,A(Pe.value,(s,v)=>(i(),n(P,{key:s.key},[e("button",{onClick:y=>mt(s.key),class:M([f.value===s.key?"px-3":"px-4","py-2 rounded-full text-sm font-medium transition-all duration-300 ease-in-out transform relative overflow-hidden",f.value===s.key?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md scale-105":"text-purple-600 hover:text-purple-700 hover:bg-purple-50 hover:scale-102"])},[e("span",ts,[s.icon==="User"?(i(),n("svg",ss,[...t[40]||(t[40]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])])):s.icon==="AcademicCap"?(i(),n("svg",os,[...t[41]||(t[41]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 14l9-5-9-5-9 5 9 5z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"},null,-1)])])):s.icon==="Users"?(i(),n("svg",as,[...t[42]||(t[42]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},null,-1)])])):x("",!0),h(" "+a(s.label)+" ",1),s.count!==null?(i(),n("span",ls,a(s.count),1)):x("",!0)]),f.value===s.key?(i(),n("div",rs)):x("",!0)],10,es),v<Pe.value.length-1?(i(),n("div",ns)):x("",!0)],64))),128))])]),e("div",is,[e("h2",ds,[t[43]||(t[43]=e("div",{class:"w-2 h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"},null,-1)),h(" Pay Fee - "+a(ft.value),1)]),t[44]||(t[44]=Bt('<nav class="flex items-center gap-2 text-base font-medium text-gray-500" data-v-ffd261d5><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-ffd261d5>Fee Management</span><span class="mx-2" data-v-ffd261d5>|</span><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-ffd261d5>Fee Collection</span><span class="mx-2" data-v-ffd261d5>|</span><span class="text-gray-900 font-bold" data-v-ffd261d5>Pay Fee</span></nav>',1))]),t[176]||(t[176]=e("div",{class:"w-full max-w-7xl mx-auto mb-2"},[e("div",{class:"flex flex-col items-start"},[e("h3",{class:"text-base font-medium text-gray-900 tracking-tight"},"Select Criteria"),e("div",{class:"h-[2px] bg-purple-200 w-full transition-all duration-300",style:{"max-width":"110px"}})])],-1)),C(zt,{class:"w-full max-w-7xl mx-auto rounded-lg transition-all duration-500 ease-in-out transform hover:shadow-lg"},{default:j(()=>[e("form",{class:"w-full",onSubmit:Vt($,["prevent"])},[e("div",us,[e("div",cs,[t[47]||(t[47]=e("label",{class:"mb-1 text-xs font-semibold text-gnavyray-500 uppercase tracking-wider"},"Session",-1)),e("div",ps,[E(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>q.value=s),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[(i(),n(P,null,A(tt,s=>e("option",{key:s,value:s},a(s),9,fs)),64))],512),[[H,q.value]]),t[45]||(t[45]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[46]||(t[46]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",ms,[t[50]||(t[50]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Class",-1)),e("div",vs,[E(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>pe.value=s),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[(i(!0),n(P,null,A(I.value,s=>(i(),n("option",{key:s.id,value:s.id},a(s.name),9,xs))),128))],512),[[H,pe.value]]),t[48]||(t[48]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[49]||(t[49]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",gs,[t[54]||(t[54]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Section",-1)),e("div",ys,[E(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>Me.value=s),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[51]||(t[51]=e("option",{value:""},"All",-1)),(i(!0),n(P,null,A(fe.value,s=>(i(),n("option",{key:s.id,value:s.id},a(s.name),9,hs))),128))],512),[[H,Me.value]]),t[52]||(t[52]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[53]||(t[53]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",bs,[t[57]||(t[57]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Challan Month",-1)),e("div",ws,[E(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>G.value=s),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[(i(),n(P,null,A(st,s=>e("option",{key:s,value:s},a(s),9,_s)),64))],512),[[H,G.value]]),t[55]||(t[55]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[56]||(t[56]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",ks,[t[60]||(t[60]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Fee Status",-1)),e("div",Cs,[E(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>W.value=s),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[(i(),n(P,null,A(at,s=>e("option",{key:s,value:s},a(s),9,Ms)),64))],512),[[H,W.value]]),t[58]||(t[58]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[59]||(t[59]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])])]),t[61]||(t[61]=e("div",{class:"flex justify-end mt-2"},[e("button",{type:"submit",class:"h-9 px-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-sm font-bold text-white shadow hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105"},"Filter")],-1))],32)]),_:1}),e("div",js,[e("div",Ps,[e("h3",Ns,[t[62]||(t[62]=e("div",{class:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-bounce"},null,-1)),h(" "+a(xe.value)+" ("+a(F.value)+") ",1)]),t[63]||(t[63]=e("div",{class:"h-[2px] bg-purple-200 w-full transition-all duration-500",style:{"max-width":"120px"}},null,-1))]),e("div",Fs,[e("div",$s,[t[64]||(t[64]=e("span",{class:"absolute left-0 top-1/2 -translate-y-1/2 pl-2 text-purple-400"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),E(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>ee.value=s),onKeyup:Ze(dt,["enter"]),type:"text",placeholder:"QUICK SEARCH",class:"w-full border-0 bg-transparent pl-10 pr-0 py-2 text-gray-900 font-medium text-xs tracking-wider uppercase focus:ring-0 focus:outline-none transition placeholder:text-gray-600 placeholder:font-medium placeholder:opacity-100 placeholder:text-xs shadow-none",style:{"letter-spacing":"0.08em"}},null,544),[[Xe,ee.value]]),t[65]||(t[65]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[1.5px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",Ss,[f.value!=="class"?(i(),n("label",As,[e("input",{type:"checkbox",checked:Se.value,onChange:t[6]||(t[6]=s=>vt(s.target.checked)),class:"w-5 h-5 border-2 border-purple-200 rounded-md transition-all duration-200 group-hover:border-purple-400 checked:border-purple-500 checked:bg-purple-500 focus:ring-purple-500 appearance-none flex items-center justify-center"},null,40,Ls),Se.value?(i(),n("span",Bs,[...t[66]||(t[66]=[e("svg",{class:"w-3.5 h-3.5 text-white animate-pulse",fill:"none",stroke:"currentColor","stroke-width":"3",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)])])):x("",!0),e("div",Vs,[Se.value?x("",!0):(i(),n(P,{key:0},[t[67]||(t[67]=e("span",{class:"text-sm font-medium text-gray-600 group-hover:text-purple-600 transition-all duration-300 block"}," Show Modal ",-1)),t[68]||(t[68]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[1.5px] bg-purple-200 transition-all duration-300"},null,-1))],64))])])):x("",!0),f.value==="student"||f.value==="family"?(i(),n("button",{key:1,onClick:t[7]||(t[7]=s=>Z.value=!0),class:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm font-medium rounded-full hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-sm hover:shadow-md transform origin-left hover:scale-105",style:{animation:"slideIn 0.3s ease-out forwards"}}," Show Modal ")):x("",!0)])]),t[177]||(t[177]=e("div",{class:"w-full max-w-7xl mx-auto"},[e("div",{class:"h-[2px] w-full bg-purple-200 mb-4"})],-1)),K.value?(i(),n("div",Rs,[C(Ie,{title:"Loading Data",message:`Please wait while we fetch ${xe.value.toLowerCase()}...`},null,8,["message"])])):(i(),n("div",Ys,[C(Yt,{name:"fade-slide",mode:"out-in"},{default:j(()=>[(i(),n("div",{key:f.value,class:"w-full"},[C(Qt,{class:"min-w-full table-fixed"},{head:j(()=>[e("tr",null,[(i(!0),n(P,null,A(Te.value,s=>(i(),n("th",{key:s.key,onClick:v=>s.key!=="action"?it(s.key):null,style:Rt({width:s.width||"auto",minWidth:s.width||"auto"}),class:M(["py-2 px-2 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400 relative #ffffffspace-nowrap",s.key!=="action"?"cursor-pointer select-none group transition-all duration-150 hover:bg-purple-50":""])},[e("span",{class:M(["flex items-center justify-between",s.key!=="action"?"group-hover:text-purple-600 transition-colors duration-150":""])},[e("span",null,a(s.label),1),s.key!=="action"?(i(),n("span",zs,[T.value===s.key&&D.value==="asc"?(i(),n("svg",Es,[...t[69]||(t[69]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 19V5m0 0l-7 7m7-7l7 7"},null,-1)])])):T.value===s.key&&D.value==="desc"?(i(),n("svg",Ks,[...t[70]||(t[70]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"},null,-1)])])):(i(),n("svg",Ts,[...t[71]||(t[71]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"},null,-1)])]))])):x("",!0)],2)],14,Ds))),128))])]),default:j(()=>[Ne.value.length===0?(i(),n("tr",Us,[e("td",{colspan:Te.value.length,class:"py-16"},[e("div",Os,[t[73]||(t[73]=e("div",{class:"relative mb-4"},[e("div",{class:"w-16 h-16 bg-gradient-to-br from-purple-100 to-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-purple-300",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",{class:"absolute -top-2 -right-2 w-4 h-4 bg-purple-100 rounded-full animate-ping opacity-20"}),e("div",{class:"absolute -bottom-2 -left-2 w-3 h-3 bg-indigo-100 rounded-full animate-pulse"})],-1)),e("div",qs,[e("div",Gs,"No "+a(xe.value)+" Found",1),e("div",Ws,"We couldn't find any "+a(xe.value.toLowerCase())+" matching your current filters.",1),t[72]||(t[72]=e("div",{class:"flex flex-wrap justify-center gap-2 text-xs text-gray-500 font-light"},[e("span",{class:"px-2 py-1 bg-white rounded-full"},"â€¢ Check filters"),e("span",{class:"px-2 py-1 bg-white rounded-full"},"â€¢ Clear search")],-1))])])],8,Hs)])):x("",!0),f.value==="student"?(i(!0),n(P,{key:1},A(w.value,(s,v)=>(i(),n("tr",{key:s.grNo,class:M(["hover:bg-indigo-50 transition-colors","border-b border-purple-200",v===w.value.length-1?"border-b-2 border-purple-400":""])},[e("td",Js,a(s.grNo),1),e("td",Qs,a(s.name),1),e("td",Xs,a(s.classSection),1),e("td",Zs,a(Math.ceil(Number(s.carry_forward||0))),1),e("td",Is,a(Math.ceil(Number(s.base_fee||0))),1),e("td",eo,a(Math.ceil(Number(s.partial_fee||0))),1),e("td",to,[e("div",so,[s.discount_fee&&s.discount_fee>0?(i(),n("div",oo,[t[74]||(t[74]=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),e("span",ao,"-"+a(Math.ceil(Number(s.discount_fee))),1)])):x("",!0),s.late_fee&&s.late_fee>0?(i(),n("div",lo,[t[75]||(t[75]=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1)),e("span",ro,"+"+a(Math.ceil(Number(s.late_fee))),1)])):x("",!0),(!s.discount_fee||s.discount_fee<=0)&&(!s.late_fee||s.late_fee<=0)?(i(),n("div",no,"-")):x("",!0)])]),e("td",io,a(Math.ceil(Number(s.total_fee||0))),1),e("td",uo,[e("span",{class:M(["text-xs font-medium",(s.status||"").toLowerCase()==="paid"?"text-green-700":(s.status||"").toLowerCase()==="partial"?"text-yellow-700":((s.status||"").toLowerCase()==="pending","text-red-700")])},a(s.status),3)]),e("td",co,[e("div",po,[e("label",fo,[e("input",{type:"checkbox",checked:s.isSelected,onChange:y=>s.isSelected=y.target.checked,class:"w-5 h-5 border-2 border-purple-200 rounded-md transition-all duration-200 group-hover:border-purple-400 checked:border-purple-500 checked:bg-purple-500 focus:ring-purple-500 appearance-none flex items-center justify-center"},null,40,mo),s.isSelected?(i(),n("span",vo,[...t[76]||(t[76]=[e("svg",{class:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor","stroke-width":"3",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)])])):x("",!0)]),e("button",{onClick:y=>Ve(s),disabled:(s.status||"").toLowerCase()==="paid",class:M(["px-3 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 mr-2",(s.status||"").toLowerCase()==="paid"?"bg-gradient-to-r from-blue-300 to-blue-500 cursor-not-allowed opacity-60":"bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800"]),style:{"min-width":"70px"}},a((s.status||"").toLowerCase()==="paid"?"Paid":"Pay"),11,xo),e("button",{onClick:y=>Oe(s),disabled:(s.status||"").toLowerCase()==="paid",class:M(["px-3 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 mr-2",(s.status||"").toLowerCase()==="paid"?"bg-gradient-to-r from-teal-300 to-teal-500 cursor-not-allowed opacity-60":"bg-gradient-to-r from-teal-500 to-teal-700 hover:from-teal-600 hover:to-teal-800"]),style:{"min-width":"70px"}},a((s.status||"").toLowerCase()==="paid"?"Paid":"Partial"),11,go),e("button",{onClick:y=>bt(s),class:"px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs font-medium rounded-full hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105",style:{"min-width":"70px"}}," History ",8,yo)])])],2))),128)):f.value==="class"?(i(!0),n(P,{key:2},A(w.value,(s,v)=>(i(),n("tr",{key:s.id,class:M(["hover:bg-indigo-50 transition-colors","border-b border-purple-200",v===w.value.length-1?"border-b-2 border-purple-400":""])},[e("td",ho,a(s.name),1),e("td",bo,a(s.studentCount),1),e("td",wo,"PKR "+a(Math.ceil(Number(s.totalFee||0))),1),e("td",_o,a(s.paidStudents),1),e("td",ko,a(s.remainingStudents),1),e("td",Co,"PKR "+a(Math.ceil(Number(s.totalPaidFees||0))),1),e("td",Mo,"PKR "+a(Math.ceil(Number(s.totalRemainingFees||0))),1),e("td",jo,[e("span",{class:M(["text-xs font-medium",s.status==="Complete"?"text-green-700":"text-yellow-700"])},a(s.status),3)]),e("td",Po,[e("div",No,[e("button",{onClick:y=>Nt(s),disabled:te.value===s.id||s.status==="Complete",class:M(["px-3 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105",s.status==="Complete"?"bg-gradient-to-r from-green-400 to-green-600 cursor-not-allowed opacity-70":te.value===s.id?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"]),style:{"min-width":"80px"}},[te.value===s.id?(i(),n("span",$o)):x("",!0),h(" "+a(te.value===s.id?"Paying...":s.status==="Complete"?"Paid":"Pay All"),1)],10,Fo)])])],2))),128)):f.value==="family"?(i(!0),n(P,{key:3},A(w.value,(s,v)=>(i(),n("tr",{key:s.id,class:M(["hover:bg-indigo-50 transition-colors","border-b border-purple-200",v===w.value.length-1?"border-b-2 border-purple-400":""])},[e("td",So,a(s.familyCode||"N/A"),1),e("td",Ao,a(s.fatherName||"N/A"),1),e("td",Lo,a(s.childrenCount||0),1),e("td",Bo,a(U(s.totalBalance||0)),1),e("td",Vo,a(U(s.monthlyFees||0)),1),e("td",Ro,[e("div",Yo,[s.totalDiscount&&s.totalDiscount>0?(i(),n("div",Do,[t[77]||(t[77]=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),e("span",zo,"-"+a(U(s.totalDiscount)),1)])):x("",!0),s.totalLateFee&&s.totalLateFee>0?(i(),n("div",Eo,[t[78]||(t[78]=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1)),e("span",Ko,"+"+a(U(s.totalLateFee)),1)])):x("",!0),(!s.totalDiscount||s.totalDiscount<=0)&&(!s.totalLateFee||s.totalLateFee<=0)?(i(),n("div",To,"-")):x("",!0)])]),e("td",Uo,a(U(s.totalAmount||0)),1),e("td",Ho,a(U(s.totalPaid||0)),1),e("td",Oo,a(U(s.remainingAmount||0)),1),e("td",qo,[e("span",{class:M(["text-xs font-medium px-2 py-1 rounded-full",(s.status||"").toLowerCase()==="paid"?"bg-green-100 text-green-700":(s.status||"").toLowerCase()==="partial"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"])},a(s.status||"Unpaid"),3)]),e("td",Go,[e("div",Wo,[e("label",Jo,[e("input",{type:"checkbox",checked:s.isSelected,onChange:y=>s.isSelected=y.target.checked,class:"w-5 h-5 border-2 border-purple-200 rounded-md transition-all duration-200 group-hover:border-purple-400 checked:border-purple-500 checked:bg-purple-500 focus:ring-purple-500 appearance-none flex items-center justify-center"},null,40,Qo),s.isSelected?(i(),n("span",Xo,[...t[79]||(t[79]=[e("svg",{class:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor","stroke-width":"3",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)])])):x("",!0)]),e("button",{onClick:y=>We(s),disabled:(s.status||"").toLowerCase()==="paid",class:M(["px-2 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 mr-1",(s.status||"").toLowerCase()==="paid"?"bg-gradient-to-r from-blue-300 to-blue-500 cursor-not-allowed opacity-60":"bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800"]),style:{"min-width":"60px"}},a((s.status||"").toLowerCase()==="paid"?"Paid":"Pay"),11,Zo),e("button",{onClick:y=>Je(s),disabled:(s.status||"").toLowerCase()==="paid",class:M(["px-2 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 mr-1",(s.status||"").toLowerCase()==="paid"?"bg-gradient-to-r from-teal-300 to-teal-500 cursor-not-allowed opacity-60":"bg-gradient-to-r from-teal-500 to-teal-700 hover:from-teal-600 hover:to-teal-800"]),style:{"min-width":"60px"}},a((s.status||"").toLowerCase()==="paid"?"Paid":"Partial"),11,Io),e("button",{onClick:y=>Ft(s),class:"px-2 py-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs font-medium rounded-full hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105",style:{"min-width":"60px"}}," View ",8,ea)])])],2))),128)):x("",!0)]),_:1}),e("div",ta,[e("div",sa," Showing "+a((b.value-1)*J.value+1)+" to "+a(Math.min(b.value*J.value,F.value))+" of "+a(F.value)+" entries ",1),e("div",oa,[e("label",aa,[t[80]||(t[80]=h(" Per page: ",-1)),E(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>J.value=s),onChange:t[9]||(t[9]=s=>$(1)),class:"rounded-md border border-purple-200 bg-white px-2 py-1 text-xs font-semibold text-purple-700 focus:ring-2 focus:ring-purple-300"},[(i(),n(P,null,A([10,20,50,100],s=>e("option",{key:s,value:s},a(s),9,la)),64))],544),[[H,J.value]])]),e("label",ra,[t[81]||(t[81]=h(" Go to page: ",-1)),E(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>me.value=s),type:"number",min:"1",max:ve.value,class:"w-16 rounded-md border border-purple-200 px-2 py-1 text-xs font-semibold text-purple-700 focus:ring-2 focus:ring-purple-300",onKeyup:t[11]||(t[11]=Ze(s=>Ke(me.value),["enter"]))},null,40,na),[[Xe,me.value,void 0,{number:!0}]]),e("button",{onClick:t[12]||(t[12]=s=>Ke(me.value)),class:"ml-1 px-2 py-1 rounded-md bg-purple-500 text-white text-xs font-semibold hover:bg-purple-600 transition-all"},"Go")])])]),e("div",ia,[e("div",da,[e("button",{class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 text-xl font-bold shadow-sm transition-all duration-200 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:b.value===1,onClick:t[13]||(t[13]=s=>$(b.value-1)),"aria-label":"Previous"},[...t[82]||(t[82]=[e("span",null,"â†",-1)])],8,ua),e("span",ca,a(b.value),1),e("button",{class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 text-xl font-bold shadow-sm transition-all duration-200 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:b.value===ve.value,onClick:t[14]||(t[14]=s=>$(b.value+1)),"aria-label":"Next"},[...t[83]||(t[83]=[e("span",null,"â†’",-1)])],8,pa)])])]))]),_:1})])),C(d,{modelValue:O.value,"onUpdate:modelValue":t[22]||(t[22]=s=>O.value=s),width:"800px","close-on-click-modal":!0,class:"enhanced-fee-modal",onClose:kt},{header:j(()=>[e("div",fa,[t[85]||(t[85]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])]),e("div",null,[e("h3",{class:"text-base font-bold text-white"},"Partial Payment"),e("p",{class:"text-xs text-white/80"},"Enter partial payment details")])],-1)),e("button",{onClick:t[15]||(t[15]=s=>O.value=!1),class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all"},[...t[84]||(t[84]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),footer:j(()=>[p.value?(i(),n("div",Ga,[e("button",{onClick:t[21]||(t[21]=s=>O.value=!1),class:"px-6 py-2 rounded-full bg-white text-xs font-bold text-gray-900 border border-gray-200 hover:bg-white transition-all duration-200 flex items-center justify-center gap-2"},[...t[105]||(t[105]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),h(" Cancel ",-1)])]),e("button",{onClick:yt,disabled:_.value,class:"px-6 py-2 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 text-xs font-bold text-white shadow-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[_.value?(i(),n("span",Ja)):(i(),n("svg",Qa,[...t[106]||(t[106]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])),h(" "+a(_.value?"Processing...":"Submit"),1)],8,Wa)])):x("",!0)]),default:j(()=>[p.value?(i(),n("div",ma,[e("div",va,[e("div",xa,[t[87]||(t[87]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",ga,[e("h4",ya,a(p.value.name),1),e("p",ha,a(p.value.classSection),1),e("p",ba,"GR No: "+a(p.value.grNo),1)]),e("div",wa,[t[86]||(t[86]=e("div",{class:"text-xs text-gray-500"},"Current Status",-1)),e("div",{class:M(["text-xs font-bold px-3 py-1 rounded-full inline-block w-fit",(p.value.status||"").toLowerCase()==="paid"?"text-green-700 bg-green-100":(p.value.status||"").toLowerCase()==="partial"?"text-yellow-700 bg-yellow-100":((p.value.status||"").toLowerCase()==="pending","text-red-700 bg-red-100")])},a(p.value.status),3)])])]),e("div",_a,[e("div",ka,[t[88]||(t[88]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),e("span",{class:"text-xs font-semibold text-blue-700"},"Monthly Fee")],-1)),e("div",Ca,"PKR "+a(Math.ceil(Number(p.value.base_fee||0))),1)]),e("div",Ma,[t[89]||(t[89]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-yellow-700"},"Previous Month Remaining")],-1)),e("div",ja,"PKR "+a(Math.ceil(Number(p.value.carry_forward||0))),1)]),e("div",Pa,[t[90]||(t[90]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-green-700"},"Discount")],-1)),e("div",Na,"PKR "+a(L.value),1)]),e("div",Fa,[t[91]||(t[91]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-red-700"},"Late Fee")],-1)),e("div",$a,"PKR "+a(B.value),1)])]),e("div",Sa,[t[104]||(t[104]=e("h5",{class:"text-base font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),h(" Payment Details ")],-1)),e("div",Aa,[e("div",La,[e("div",null,[t[92]||(t[92]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Discount Amount",-1)),C(l,{modelValue:L.value,"onUpdate:modelValue":t[16]||(t[16]=s=>L.value=s),min:0,max:N.value,class:"w-full enhanced-input-number",size:"large",placeholder:"Enter discount amount"},null,8,["modelValue","max"])]),e("div",null,[t[93]||(t[93]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Late Fee Amount",-1)),C(l,{modelValue:B.value,"onUpdate:modelValue":t[17]||(t[17]=s=>B.value=s),min:0,class:"w-full enhanced-input-number",size:"large",placeholder:"Enter late fee amount"},null,8,["modelValue"])]),e("div",null,[t[94]||(t[94]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Partial Amount",-1)),C(l,{modelValue:Y.value,"onUpdate:modelValue":t[18]||(t[18]=s=>Y.value=s),min:N.value>0?Math.min(Math.max(100,N.value*.1),N.value):0,max:N.value>0?N.value:0,class:"w-full enhanced-input-number",size:"large",placeholder:"Enter partial amount"},null,8,["modelValue","min","max"])])]),e("div",Ba,[e("div",Va,[e("div",Ra,[t[95]||(t[95]=e("span",{class:"text-xs font-semibold text-gray-900"},"Remaining Amount",-1)),e("span",Ya,"PKR "+a(N.value),1)]),e("div",Da,[t[96]||(t[96]=e("span",{class:"text-xs text-gray-600"},"Partial Amount",-1)),e("span",za,"PKR "+a(Y.value),1)]),e("div",Ea,[e("div",Ka,[t[97]||(t[97]=e("span",{class:"text-xs font-semibold text-gray-900"},"After Payment",-1)),e("span",Ta,"PKR "+a(N.value-Y.value),1)])])]),e("div",null,[t[101]||(t[101]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Payment Method",-1)),e("div",Ua,[E(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>Be.value=s),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[...t[98]||(t[98]=[e("option",{value:"Cash"},"ðŸ’µ Cash",-1),e("option",{value:"Cheque"},"ðŸ¦ Cheque",-1),e("option",{value:"Online"},"ðŸ’³ Online",-1),e("option",{value:"Bank Transfer"},"ðŸ›ï¸ Bank Transfer",-1)])],512),[[H,Be.value]]),t[99]||(t[99]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[100]||(t[100]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",null,[t[102]||(t[102]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Remarks (Optional)",-1)),C(r,{modelValue:ne.value,"onUpdate:modelValue":t[20]||(t[20]=s=>ne.value=s),type:"textarea",rows:"3",placeholder:"Add any additional notes or remarks...",class:"w-full enhanced-input",size:"large"},null,8,["modelValue"])])])]),Ce.value?(i(),n("div",Ha,[e("div",Oa,[t[103]||(t[103]=e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("span",qa,a(Ce.value),1)])])):x("",!0)])])):x("",!0)]),_:1},8,["modelValue"]),C(d,{modelValue:X.value,"onUpdate:modelValue":t[30]||(t[30]=s=>X.value=s),width:"800px","close-on-click-modal":!0,class:"enhanced-fee-modal",onClose:Ct},{header:j(()=>[e("div",Xa,[t[108]||(t[108]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",null,[e("h3",{class:"text-base font-bold text-white"},"Full Payment"),e("p",{class:"text-xs text-white/80"},"Complete payment for all dues")])],-1)),e("button",{onClick:t[23]||(t[23]=s=>X.value=!1),class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all"},[...t[107]||(t[107]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),footer:j(()=>[p.value?(i(),n("div",$l,[e("button",{onClick:t[29]||(t[29]=s=>X.value=!1),class:"px-6 py-2 rounded-full bg-white text-xs font-bold text-gray-900 border border-gray-200 hover:bg-white transition-all duration-200 flex items-center justify-center gap-2"},[...t[129]||(t[129]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),h(" Cancel ",-1)])]),e("button",{onClick:ht,disabled:_.value,class:"px-6 py-2 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 text-xs font-bold text-white shadow-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[_.value?(i(),n("span",Al)):(i(),n("svg",Ll,[...t[130]||(t[130]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])),h(" "+a(_.value?"Processing...":"Submit"),1)],8,Sl)])):x("",!0)]),default:j(()=>[p.value?(i(),n("div",Za,[e("div",Ia,[e("div",el,[t[110]||(t[110]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",tl,[e("h4",sl,a(p.value.name),1),e("p",ol,a(p.value.classSection),1),e("p",al,"GR No: "+a(p.value.grNo),1)]),e("div",ll,[t[109]||(t[109]=e("div",{class:"text-xs text-gray-500"},"Current Status",-1)),e("div",{class:M(["text-xs font-bold px-3 py-1 rounded-full inline-block w-fit",(p.value.status||"").toLowerCase()==="paid"?"text-green-700 bg-green-100":(p.value.status||"").toLowerCase()==="partial"?"text-yellow-700 bg-yellow-100":((p.value.status||"").toLowerCase()==="pending","text-red-700 bg-red-100")])},a(p.value.status),3)])])]),e("div",rl,[e("div",nl,[t[111]||(t[111]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),e("span",{class:"text-xs font-semibold text-blue-700"},"Monthly Fee")],-1)),e("div",il,"PKR "+a(Math.ceil(Number(p.value.base_fee||0))),1)]),e("div",dl,[t[112]||(t[112]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-yellow-700"},"Previous Month Remaining")],-1)),e("div",ul,"PKR "+a(Math.ceil(Number(p.value.carry_forward||0))),1)]),e("div",cl,[t[113]||(t[113]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-green-700"},"Discount")],-1)),e("div",pl,"PKR "+a(L.value),1)]),e("div",fl,[t[114]||(t[114]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-red-700"},"Late Fee")],-1)),e("div",ml,"PKR "+a(B.value),1)])]),e("div",vl,[t[128]||(t[128]=e("h5",{class:"text-base font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),h(" Complete Payment Details ")],-1)),e("div",xl,[e("div",gl,[e("div",null,[t[115]||(t[115]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Discount Amount",-1)),C(l,{modelValue:L.value,"onUpdate:modelValue":t[24]||(t[24]=s=>L.value=s),min:0,max:N.value,class:"w-full enhanced-input-number",size:"large",placeholder:"Enter discount amount"},null,8,["modelValue","max"])]),e("div",null,[t[116]||(t[116]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Late Fee Amount",-1)),C(l,{modelValue:B.value,"onUpdate:modelValue":t[25]||(t[25]=s=>B.value=s),min:0,class:"w-full enhanced-input-number",size:"large",placeholder:"Enter late fee amount"},null,8,["modelValue"])]),e("div",null,[t[120]||(t[120]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Payment Method",-1)),e("div",yl,[E(e("select",{"onUpdate:modelValue":t[26]||(t[26]=s=>Le.value=s),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[...t[117]||(t[117]=[e("option",{value:"Cash"},"ðŸ’µ Cash",-1),e("option",{value:"Cheque"},"ðŸ¦ Cheque",-1),e("option",{value:"Online"},"ðŸ’³ Online",-1),e("option",{value:"Bank Transfer"},"ðŸ›ï¸ Bank Transfer",-1)])],512),[[H,Le.value]]),t[118]||(t[118]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[119]||(t[119]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])])]),e("div",hl,[e("div",bl,[e("div",wl,[t[121]||(t[121]=e("span",{class:"text-xs font-semibold text-gray-900"},"Total Fee",-1)),e("span",_l,"PKR "+a(De.value),1)]),e("div",kl,[t[122]||(t[122]=e("span",{class:"text-xs text-gray-600"},"Remaining Amount",-1)),e("span",Cl,"PKR "+a(N.value),1)]),e("div",Ml,[t[123]||(t[123]=e("span",{class:"text-xs text-gray-600"},"Payment Amount",-1)),e("span",jl,"PKR "+a(N.value),1)]),t[124]||(t[124]=e("div",{class:"border-t border-blue-200 pt-2"},[e("div",{class:"flex justify-between items-center"},[e("span",{class:"text-xs font-semibold text-gray-900"},"After Payment"),e("span",{class:"text-sm font-bold text-green-600"},"PKR 0")])],-1))]),e("div",null,[t[125]||(t[125]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Receipt Number (Optional)",-1)),C(r,{modelValue:Ye.value,"onUpdate:modelValue":t[27]||(t[27]=s=>Ye.value=s),placeholder:"Enter receipt number if available",class:"w-full enhanced-input",size:"large"},null,8,["modelValue"])]),e("div",null,[t[126]||(t[126]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Remarks (Optional)",-1)),C(r,{modelValue:ce.value,"onUpdate:modelValue":t[28]||(t[28]=s=>ce.value=s),type:"textarea",rows:"3",placeholder:"Add any additional notes or remarks...",class:"w-full enhanced-input",size:"large"},null,8,["modelValue"])])])]),Ae.value?(i(),n("div",Pl,[e("div",Nl,[t[127]||(t[127]=e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("span",Fl,a(Ae.value),1)])])):x("",!0)])])):x("",!0)]),_:1},8,["modelValue"]),C(d,{modelValue:oe.value,"onUpdate:modelValue":t[34]||(t[34]=s=>oe.value=s),width:"900px","close-on-click-modal":!0,class:"enhanced-history-modal",onClose:Mt},{header:j(()=>[e("div",Bl,[t[132]||(t[132]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",null,[e("h3",{class:"text-base font-bold text-white"},"Payment History"),e("p",{class:"text-xs text-white/80"},"Complete payment records")])],-1)),e("button",{onClick:t[31]||(t[31]=s=>oe.value=!1),class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all"},[...t[131]||(t[131]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),footer:j(()=>[p.value?(i(),n("div",yr,[e("button",{onClick:t[33]||(t[33]=s=>oe.value=!1),class:"h-9 px-8 rounded-full bg-white text-xs font-bold text-gray-900 border border-gray-200 hover:bg-white transition-all duration-200 flex items-center justify-center gap-2"},[...t[148]||(t[148]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),h(" Close ",-1)])])])):x("",!0)]),default:j(()=>[p.value?(i(),n("div",Vl,[e("div",Rl,[e("div",Yl,[t[134]||(t[134]=e("div",{class:"w-16 h-16 bg-gradient-to-r from-indigo-100 to-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",Dl,[e("h3",zl,a(p.value.name),1),e("p",El,a(p.value.classSection),1),e("p",Kl,"GR No: "+a(p.value.grNo),1)]),e("div",Tl,[t[133]||(t[133]=e("div",{class:"text-xs text-gray-500 mb-1"},"Current Status",-1)),e("div",{class:M(["text-xs font-bold px-4 py-2 rounded-full inline-block w-fit",(p.value.status||"").toLowerCase()==="paid"?"text-green-700 bg-green-100":(p.value.status||"").toLowerCase()==="partial"?"text-yellow-700 bg-yellow-100":((p.value.status||"").toLowerCase()==="pending","text-red-700 bg-red-100")])},a(p.value.status),3)])])]),e("div",Ul,[e("div",Hl,[e("div",Ol,[t[136]||(t[136]=e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",null,[t[135]||(t[135]=e("div",{class:"text-xs text-green-600 font-medium"},"Total Paid",-1)),e("div",ql,"PKR "+a(he.value),1)])])]),e("div",Gl,[e("div",Wl,[t[138]||(t[138]=e("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[137]||(t[137]=e("div",{class:"text-xs text-blue-600 font-medium"},"Total Due",-1)),e("div",Jl,"PKR "+a(be.value),1)])])]),e("div",Ql,[e("div",Xl,[t[140]||(t[140]=e("div",{class:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",null,[t[139]||(t[139]=e("div",{class:"text-xs text-purple-600 font-medium"},"Total Payments",-1)),e("div",Zl,a(ae.value.length),1)])])])]),e("div",Il,[t[147]||(t[147]=e("h5",{class:"text-base font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),h(" Payment Records ")],-1)),we.value?(i(),n("div",er,[C(Ie,{title:"Loading Payment History",message:"Please wait while we fetch payment records..."})])):(i(),n("div",tr,[e("div",sr,[(i(!0),n(P,null,A(ae.value,(s,v)=>(i(),n("div",{key:v,class:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all duration-300 transform hover:scale-[1.02]"},[e("div",or,[e("div",ar,[t[141]||(t[141]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",null,[e("div",lr,"PKR "+a(s.amount_paid),1),e("div",rr,a(qe(s.payment_date)),1)])]),e("div",nr,[e("div",ir,a(s.payment_mode),1),e("div",dr,"Receipt: "+a(s.receipt_no),1)])]),s.remarks?(i(),n("div",ur,[t[142]||(t[142]=e("div",{class:"text-xs text-gray-500 mb-1 font-medium"},"Remarks",-1)),e("div",cr,a(s.remarks),1)])):x("",!0),e("div",pr,[e("div",fr,[t[143]||(t[143]=h(" Received by: ",-1)),e("span",mr,a(s.received_by_name||"Admin"),1)]),e("div",vr,a(qe(s.payment_date))+" at "+a(_t(s.created_at)),1)])]))),128))]),!we.value&&ae.value.length===0?(i(),n("div",xr,[t[144]||(t[144]=e("div",{class:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[145]||(t[145]=e("h3",{class:"text-base font-bold text-gray-900 mb-2"},"No Payment History",-1)),t[146]||(t[146]=e("p",{class:"text-xs text-gray-500 mb-4"},"No payment records found for this student.",-1)),e("div",gr,[e("button",{onClick:t[32]||(t[32]=s=>Ve(p.value)),class:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-semibold rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-300"}," Make First Payment ")])])):x("",!0)]))])])):x("",!0)]),_:1},8,["modelValue"]),C(d,{modelValue:Z.value,"onUpdate:modelValue":t[37]||(t[37]=s=>Z.value=s),width:"700px","close-on-click-modal":!0,title:f.value==="family"?"Selected Families":"Selected Students"},{default:j(()=>[e("div",hr,[e("div",br,a(f.value==="family"?"Selected Families for Payment":"Selected Students for Payment"),1),e("div",wr,[e("div",_r,[t[150]||(t[150]=e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",kr,[t[149]||(t[149]=e("strong",null,"Note:",-1)),h(" Uncheck "+a(f.value==="family"?"families":"students")+" ki full payment automatically submit ho jayegi. ",1)])])]),e("div",Cr,[f.value==="student"?(i(!0),n(P,{key:0},A(Ue.value,s=>(i(),n("div",{key:s.grNo,class:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:bg-white transition-all"},[e("div",Mr,[e("div",jr,a(s.name),1),e("div",Pr,a(s.classSection),1),e("div",Nr,"Total Fee: PKR "+a(Math.ceil(Number(s.total_fees||0))),1)]),e("div",Fr,[e("button",{onClick:v=>Ve(s),class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white text-sm font-medium rounded-full hover:from-blue-600 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105"}," Pay ",8,$r),e("button",{onClick:v=>Oe(s),class:"px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-700 text-white text-sm font-medium rounded-full hover:from-teal-600 hover:to-teal-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105"}," Partial ",8,Sr)])]))),128)):f.value==="family"?(i(!0),n(P,{key:1},A(He.value,s=>(i(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:bg-white transition-all"},[e("div",Ar,[e("div",Lr,a(s.fatherName),1),e("div",Br,"Family Code: "+a(s.familyCode),1),e("div",Vr,"Children: "+a(s.childrenCount)+" | Total Fee: PKR "+a(Math.ceil(Number(s.totalAmount||0))),1)]),e("div",Rr,[e("button",{onClick:v=>We(s),class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white text-sm font-medium rounded-full hover:from-blue-600 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105"}," Pay ",8,Yr),e("button",{onClick:v=>Je(s),class:"px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-700 text-white text-sm font-medium rounded-full hover:from-teal-600 hover:to-teal-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105"}," Partial ",8,Dr)])]))),128)):x("",!0)]),w.value.filter(s=>s.status==="paid").length>0?(i(),n("div",zr,[e("div",Er,[t[152]||(t[152]=e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Kr,[e("strong",null,a(w.value.filter(s=>s.status==="paid").length)+" "+a(f.value==="family"?"families":"students"),1),t[151]||(t[151]=h(" ki fee already paid hai. Unhe payment list se exclude kiya gaya hai. ",-1))])])])):x("",!0),f.value==="student"&&de.value.length>0||f.value==="family"&&ue.value.length>0?(i(),n("div",Tr,[e("div",Ur,[e("div",null,[t[153]||(t[153]=e("div",{class:"font-medium text-green-800"},"Auto Payment Summary",-1)),e("div",Hr,a(f.value==="student"?de.value.length:ue.value.length)+" "+a(f.value==="family"?"families":"students")+" ki full payment automatically submit hogi ",1)]),e("button",{onClick:t[35]||(t[35]=s=>f.value==="student"?jt():Pt()),disabled:le.value,class:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-700 text-white text-sm font-medium rounded-full hover:from-green-600 hover:to-green-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 disabled:opacity-50"},[le.value?(i(),n("span",qr)):x("",!0),t[154]||(t[154]=h(" Submit Auto Payments ",-1))],8,Or)])])):x("",!0),f.value==="student"&&Ue.value.length===0&&de.value.length===0||f.value==="family"&&He.value.length===0&&ue.value.length===0?(i(),n("div",Gr,[t[155]||(t[155]=e("div",{class:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("h3",Wr,"No "+a(f.value==="family"?"Families":"Students")+" Selected",1),e("p",Jr,"Please select "+a(f.value==="family"?"families":"students")+" from the table to proceed with payment.",1)])):x("",!0),e("div",Qr,[C(m,{onClick:t[36]||(t[36]=s=>Z.value=!1)},{default:j(()=>[...t[156]||(t[156]=[h("Close",-1)])]),_:1})])])]),_:1},8,["modelValue","title"]),C(d,{modelValue:ie.value,"onUpdate:modelValue":t[39]||(t[39]=s=>ie.value=s),width:"900px","close-on-click-modal":!0,class:"enhanced-fee-modal",onClose:Ge},{header:j(()=>[e("div",Xr,[t[158]||(t[158]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])]),e("div",null,[e("h3",{class:"text-base font-bold text-white"},"Family Students"),e("p",{class:"text-xs text-white/80"},"View all students in this family")])],-1)),e("button",{onClick:t[38]||(t[38]=s=>ie.value=!1),class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all"},[...t[157]||(t[157]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),footer:j(()=>[e("div",{class:"flex gap-3 px-6 pb-6 justify-end"},[e("button",{onClick:Ge,class:"px-6 py-2 rounded-full bg-white text-xs font-bold text-gray-900 border border-gray-200 hover:bg-white transition-all duration-200 flex items-center justify-center gap-2"},[...t[175]||(t[175]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),h(" Close ",-1)])])])]),default:j(()=>[V.value?(i(),n("div",Zr,[e("div",Ir,[e("div",en,[e("div",null,[t[164]||(t[164]=e("h4",{class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V5a2 2 0 012-2h4a2 2 0 012 2v2"})]),h(" Family Information ")],-1)),e("div",tn,[e("div",sn,[t[159]||(t[159]=e("span",{class:"text-sm text-gray-600"},"Family Code:",-1)),e("span",on,a(V.value.family_code),1)]),e("div",an,[t[160]||(t[160]=e("span",{class:"text-sm text-gray-600"},"Father Name:",-1)),e("span",ln,a(V.value.father_name),1)]),e("div",rn,[t[161]||(t[161]=e("span",{class:"text-sm text-gray-600"},"Mother Name:",-1)),e("span",nn,a(V.value.mother_name||"N/A"),1)]),e("div",dn,[t[162]||(t[162]=e("span",{class:"text-sm text-gray-600"},"Contact:",-1)),e("span",un,a(V.value.contact_number||"N/A"),1)]),e("div",cn,[t[163]||(t[163]=e("span",{class:"text-sm text-gray-600"},"Address:",-1)),e("span",pn,a(V.value.address||"N/A"),1)])])]),e("div",null,[t[169]||(t[169]=e("h4",{class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),h(" Fee Summary ")],-1)),e("div",fn,[e("div",mn,[t[165]||(t[165]=e("span",{class:"text-sm text-gray-600"},"Students Count:",-1)),e("span",vn,a(V.value.students_count||0),1)]),e("div",xn,[t[166]||(t[166]=e("span",{class:"text-sm text-gray-600"},"Total Amount:",-1)),e("span",gn,"PKR "+a(V.value.total_amount||0),1)]),e("div",yn,[t[167]||(t[167]=e("span",{class:"text-sm text-gray-600"},"Paid Amount:",-1)),e("span",hn,"PKR "+a(V.value.total_paid||0),1)]),e("div",bn,[t[168]||(t[168]=e("span",{class:"text-sm text-gray-600"},"Remaining:",-1)),e("span",wn,"PKR "+a(V.value.total_remaining||0),1)])])])])]),e("div",_n,[e("h4",kn,[t[170]||(t[170]=e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),h(" Students ("+a(Q.value.length)+") ",1)]),je.value?(i(),n("div",Cn,[...t[171]||(t[171]=[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading students...",-1)])])):Q.value.length===0?(i(),n("div",Mn,[...t[172]||(t[172]=[e("svg",{class:"w-12 h-12 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),e("p",{class:"text-gray-500 text-sm"},"No students found in this family",-1)])])):(i(),n("div",jn,[e("table",Pn,[t[174]||(t[174]=e("thead",null,[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"text-left py-3 px-4 font-semibold text-gray-900 text-sm"},"Student"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-900 text-sm"},"Class"),e("th",{class:"text-right py-3 px-4 font-semibold text-gray-900 text-sm"},"Fee"),e("th",{class:"text-right py-3 px-4 font-semibold text-gray-900 text-sm"},"Paid"),e("th",{class:"text-right py-3 px-4 font-semibold text-gray-900 text-sm"},"Remaining"),e("th",{class:"text-center py-3 px-4 font-semibold text-gray-900 text-sm"},"Status")])],-1)),e("tbody",null,[(i(!0),n(P,null,A(Q.value,s=>(i(),n("tr",{key:s.id,class:"border-b border-gray-200 hover:bg-white transition-colors"},[e("td",Nn,[e("div",Fn,[t[173]||(t[173]=e("div",{class:"w-10 h-10 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("div",$n,a(s.name),1),e("div",Sn,"Roll: "+a(s.roll_number||"N/A"),1)])])]),e("td",An,[e("span",Ln,a(s.class_section),1)]),e("td",Bn,[e("span",Vn,"PKR "+a(s.final_amount||0),1)]),e("td",Rn,[e("span",Yn,"PKR "+a(s.paid_amount||0),1)]),e("td",Dn,[e("span",zn,"PKR "+a(s.remaining_amount||0),1)]),e("td",En,[e("span",{class:M(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.payment_status==="paid"?"bg-green-100 text-green-800":s.payment_status==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},a(s.payment_status==="paid"?"Paid":s.payment_status==="partial"?"Partial":"Unpaid"),3)])]))),128))])])]))])])):x("",!0)]),_:1},8,["modelValue"])])}}},Un=et(Kn,[["__scopeId","data-v-ffd261d5"]]);export{Un as default};
