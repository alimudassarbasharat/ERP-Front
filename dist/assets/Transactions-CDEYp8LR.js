import{_ as ve,H as _e,l as m,c as D,y as o,N as fe,a as Q,o as N,d as s,h as e,D as t,i,u as y,U as ge,al as L,t as u,a5 as ye,A as be,V as Ve,f as he,e as W,X as Ce,Z as xe,b as we,L as Te}from"./index-xvPUEXLW.js";import{C as X}from"./CompactDatePicker-xqVnbMy9.js";import"./createVueComponent-mtWgRR3y.js";const De={class:"transactions"},Se={class:"page-header"},Ue={class:"card-header"},ke={class:"card-content"},Pe={class:"card-header"},ze={class:"card-content"},Be={class:"card-header"},Fe={class:"card-content"},Ie={class:"card-header"},Ae={class:"card-content"},$e={class:"table-operations"},Ee={class:"pagination-container"},qe={class:"dialog-footer"},Ne={key:0,class:"transaction-details"},Le={__name:"Transactions",setup(Me){const S=_e(),Z=m(!1),U=m(""),k=m(""),P=m(""),h=m([]),I=m(1),A=m(10),j=m(0),x=m(!1),$=m(!1),c=m(null),d=m({type:"",description:"",amount:0,category:"",date:new Date,status:"pending"}),G={type:[{required:!0,message:"Please select type",trigger:"change"}],description:[{required:!0,message:"Please enter description",trigger:"blur"}],amount:[{required:!0,message:"Please enter amount",trigger:"blur"}],category:[{required:!0,message:"Please select category",trigger:"change"}],date:[{required:!0,message:"Please select date",trigger:"change"}],status:[{required:!0,message:"Please select status",trigger:"change"}]},_=m([{id:1,date:"2024-03-15",description:"Tuition Payment",type:"income",amount:5e3,category:"tuition",status:"completed"},{id:2,date:"2024-03-14",description:"Utility Bill",type:"expense",amount:500,category:"utilities",status:"pending"}]),J=D(()=>{let n=_.value;if(U.value&&(n=n.filter(a=>a.description.toLowerCase().includes(U.value.toLowerCase()))),k.value&&(n=n.filter(a=>a.type===k.value)),P.value&&(n=n.filter(a=>a.status===P.value)),h.value&&h.value.length===2){const a=h.value[0],v=h.value[1];n=n.filter(b=>{const p=new Date(b.date);return p>=a&&p<=v})}return n}),E=D(()=>_.value.filter(n=>n.type==="income"&&n.status==="completed").reduce((n,a)=>n+a.amount,0)),q=D(()=>_.value.filter(n=>n.type==="expense"&&n.status==="completed").reduce((n,a)=>n+a.amount,0)),z=D(()=>E.value-q.value),M=D(()=>_.value.filter(n=>n.status==="pending").length),f=n=>n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),O=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),R=n=>{switch(n){case"completed":return"success";case"pending":return"warning";case"cancelled":return"danger";default:return"info"}},Y=()=>{d.value={type:"",description:"",amount:0,category:"",date:new Date,status:"pending"},x.value=!0},ee=n=>{c.value=n,$.value=!0},te=async n=>{try{await Te.confirm("Are you sure you want to delete this transaction?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"});const a=_.value.findIndex(v=>v.id===n.id);_.value.splice(a,1),S.success("Transaction deleted successfully")}catch(a){a!=="cancel"&&S.error("Failed to delete transaction")}},ae=async()=>{try{_.value.push({id:_.value.length+1,...d.value,date:d.value.date.toISOString().split("T")[0]}),S.success("Transaction created successfully"),x.value=!1}catch{S.error("Failed to create transaction")}},le=n=>{A.value=n},ne=n=>{I.value=n};return(n,a)=>{const v=o("el-icon"),b=o("el-button"),p=o("el-tag"),B=o("el-statistic"),w=o("el-card"),F=o("el-col"),oe=o("el-row"),H=o("el-input"),r=o("el-option"),T=o("el-select"),g=o("el-table-column"),se=o("el-button-group"),ue=o("el-table"),de=o("el-pagination"),C=o("el-form-item"),ie=o("el-input-number"),re=o("el-form"),K=o("el-dialog"),V=o("el-descriptions-item"),ce=o("el-descriptions"),pe=fe("loading");return N(),Q("div",De,[s("div",Se,[a[16]||(a[16]=s("h2",null,"Financial Transactions",-1)),e(b,{type:"primary",onClick:Y},{default:t(()=>[e(v,null,{default:t(()=>[e(y(ge))]),_:1}),a[15]||(a[15]=i(" Add Transaction ",-1))]),_:1})]),e(oe,{gutter:20,class:"summary-cards"},{default:t(()=>[e(F,{span:6},{default:t(()=>[e(w,{shadow:"hover"},{header:t(()=>[s("div",Ue,[a[17]||(a[17]=s("span",null,"Total Income",-1)),e(p,{type:"success"},{default:t(()=>[i("+$"+u(f(E.value)),1)]),_:1})])]),default:t(()=>[s("div",ke,[e(B,{value:f(E.value)},{prefix:t(()=>[e(v,null,{default:t(()=>[e(y(L))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1}),e(F,{span:6},{default:t(()=>[e(w,{shadow:"hover"},{header:t(()=>[s("div",Pe,[a[18]||(a[18]=s("span",null,"Total Expenses",-1)),e(p,{type:"danger"},{default:t(()=>[i("-$"+u(f(q.value)),1)]),_:1})])]),default:t(()=>[s("div",ze,[e(B,{value:f(q.value)},{prefix:t(()=>[e(v,null,{default:t(()=>[e(y(L))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1}),e(F,{span:6},{default:t(()=>[e(w,{shadow:"hover"},{header:t(()=>[s("div",Be,[a[19]||(a[19]=s("span",null,"Net Balance",-1)),e(p,{type:z.value>=0?"success":"danger"},{default:t(()=>[i(u(z.value>=0?"+":"-")+"$"+u(f(Math.abs(z.value))),1)]),_:1},8,["type"])])]),default:t(()=>[s("div",Fe,[e(B,{value:f(z.value)},{prefix:t(()=>[e(v,null,{default:t(()=>[e(y(L))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1}),e(F,{span:6},{default:t(()=>[e(w,{shadow:"hover"},{header:t(()=>[s("div",Ie,[a[20]||(a[20]=s("span",null,"Pending Transactions",-1)),e(p,{type:"warning"},{default:t(()=>[i(u(M.value),1)]),_:1})])]),default:t(()=>[s("div",Ae,[e(B,{value:M.value},{prefix:t(()=>[e(v,null,{default:t(()=>[e(y(ye))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1})]),_:1}),e(w,{class:"transaction-list"},{default:t(()=>[s("div",$e,[e(H,{modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=l=>U.value=l),placeholder:"Search transactions...",class:"search-input","prefix-icon":y(Ve)},null,8,["modelValue","prefix-icon"]),e(T,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=l=>k.value=l),placeholder:"Type",clearable:""},{default:t(()=>[e(r,{label:"Income",value:"income"}),e(r,{label:"Expense",value:"expense"})]),_:1},8,["modelValue"]),e(T,{modelValue:P.value,"onUpdate:modelValue":a[2]||(a[2]=l=>P.value=l),placeholder:"Status",clearable:""},{default:t(()=>[e(r,{label:"Completed",value:"completed"}),e(r,{label:"Pending",value:"pending"}),e(r,{label:"Cancelled",value:"cancelled"})]),_:1},8,["modelValue"]),e(X,{modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=l=>h.value=l),placeholder:""},null,8,["modelValue"])]),be((N(),he(ue,{data:J.value,style:{width:"100%"}},{default:t(()=>[e(g,{prop:"id",label:"ID",width:"80"}),e(g,{prop:"date",label:"Date",width:"120"},{default:t(({row:l})=>[i(u(O(l.date)),1)]),_:1}),e(g,{prop:"description",label:"Description"}),e(g,{prop:"type",label:"Type",width:"100"},{default:t(({row:l})=>[e(p,{type:l.type==="income"?"success":"danger"},{default:t(()=>[i(u(l.type),1)]),_:2},1032,["type"])]),_:1}),e(g,{prop:"amount",label:"Amount",width:"120"},{default:t(({row:l})=>[s("span",{class:W(l.type==="income"?"income":"expense")},u(l.type==="income"?"+":"-")+"$"+u(f(l.amount)),3)]),_:1}),e(g,{prop:"category",label:"Category",width:"120"},{default:t(({row:l})=>[e(p,null,{default:t(()=>[i(u(l.category),1)]),_:2},1024)]),_:1}),e(g,{prop:"status",label:"Status",width:"100"},{default:t(({row:l})=>[e(p,{type:R(l.status)},{default:t(()=>[i(u(l.status),1)]),_:2},1032,["type"])]),_:1}),e(g,{label:"Actions",width:"200",fixed:"right"},{default:t(({row:l})=>[e(se,null,{default:t(()=>[e(b,{type:"primary",size:"small",onClick:me=>ee(l)},{default:t(()=>[e(v,null,{default:t(()=>[e(y(Ce))]),_:1})]),_:1},8,["onClick"]),e(b,{type:"danger",size:"small",onClick:me=>te(l),disabled:l.status==="completed"},{default:t(()=>[e(v,null,{default:t(()=>[e(y(xe))]),_:1})]),_:1},8,["onClick","disabled"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[pe,Z.value]]),s("div",Ee,[e(de,{"current-page":I.value,"onUpdate:currentPage":a[4]||(a[4]=l=>I.value=l),"page-size":A.value,"onUpdate:pageSize":a[5]||(a[5]=l=>A.value=l),"page-sizes":[10,20,50,100],total:j.value,layout:"total, sizes, prev, pager, next",onSizeChange:le,onCurrentChange:ne},null,8,["current-page","page-size","total"])])]),_:1}),e(K,{modelValue:x.value,"onUpdate:modelValue":a[13]||(a[13]=l=>x.value=l),title:"Add Transaction",width:"500px"},{footer:t(()=>[s("span",qe,[e(b,{onClick:a[12]||(a[12]=l=>x.value=!1)},{default:t(()=>[...a[21]||(a[21]=[i("Cancel",-1)])]),_:1}),e(b,{type:"primary",onClick:ae},{default:t(()=>[...a[22]||(a[22]=[i("Create",-1)])]),_:1})])]),default:t(()=>[e(re,{ref_key:"transactionForm",ref:d,model:d.value,rules:G,"label-position":"top"},{default:t(()=>[e(C,{label:"Type",prop:"type"},{default:t(()=>[e(T,{modelValue:d.value.type,"onUpdate:modelValue":a[6]||(a[6]=l=>d.value.type=l),placeholder:"Select type"},{default:t(()=>[e(r,{label:"Income",value:"income"}),e(r,{label:"Expense",value:"expense"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"Description",prop:"description"},{default:t(()=>[e(H,{modelValue:d.value.description,"onUpdate:modelValue":a[7]||(a[7]=l=>d.value.description=l),placeholder:"Enter description"},null,8,["modelValue"])]),_:1}),e(C,{label:"Amount",prop:"amount"},{default:t(()=>[e(ie,{modelValue:d.value.amount,"onUpdate:modelValue":a[8]||(a[8]=l=>d.value.amount=l),min:0,precision:2,step:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(C,{label:"Category",prop:"category"},{default:t(()=>[e(T,{modelValue:d.value.category,"onUpdate:modelValue":a[9]||(a[9]=l=>d.value.category=l),placeholder:"Select category"},{default:t(()=>[e(r,{label:"Tuition",value:"tuition"}),e(r,{label:"Books",value:"books"}),e(r,{label:"Salaries",value:"salaries"}),e(r,{label:"Utilities",value:"utilities"}),e(r,{label:"Maintenance",value:"maintenance"}),e(r,{label:"Other",value:"other"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"Date",prop:"date"},{default:t(()=>[e(X,{modelValue:d.value.date,"onUpdate:modelValue":a[10]||(a[10]=l=>d.value.date=l),placeholder:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(C,{label:"Status",prop:"status"},{default:t(()=>[e(T,{modelValue:d.value.status,"onUpdate:modelValue":a[11]||(a[11]=l=>d.value.status=l),placeholder:"Select status"},{default:t(()=>[e(r,{label:"Completed",value:"completed"}),e(r,{label:"Pending",value:"pending"}),e(r,{label:"Cancelled",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(K,{modelValue:$.value,"onUpdate:modelValue":a[14]||(a[14]=l=>$.value=l),title:"Transaction Details",width:"500px"},{default:t(()=>[c.value?(N(),Q("div",Ne,[e(ce,{column:1,border:""},{default:t(()=>[e(V,{label:"ID"},{default:t(()=>[i(u(c.value.id),1)]),_:1}),e(V,{label:"Date"},{default:t(()=>[i(u(O(c.value.date)),1)]),_:1}),e(V,{label:"Type"},{default:t(()=>[e(p,{type:c.value.type==="income"?"success":"danger"},{default:t(()=>[i(u(c.value.type),1)]),_:1},8,["type"])]),_:1}),e(V,{label:"Description"},{default:t(()=>[i(u(c.value.description),1)]),_:1}),e(V,{label:"Amount"},{default:t(()=>[s("span",{class:W(c.value.type==="income"?"income":"expense")},u(c.value.type==="income"?"+":"-")+"$"+u(f(c.value.amount)),3)]),_:1}),e(V,{label:"Category"},{default:t(()=>[e(p,null,{default:t(()=>[i(u(c.value.category),1)]),_:1})]),_:1}),e(V,{label:"Status"},{default:t(()=>[e(p,{type:R(c.value.status)},{default:t(()=>[i(u(c.value.status),1)]),_:1},8,["type"])]),_:1})]),_:1})])):we("",!0)]),_:1},8,["modelValue"])])}}},Ke=ve(Le,[["__scopeId","data-v-199bb95d"]]);export{Ke as default};
