import{ab as lr,_ as hr,c as k,b as _,d as h,y as ve,n as J,t as R,w as be,v as Le,e as N,K as ye,z as we,F as se,g as ue,f as Ce,$ as ke,V as Et,a5 as dr,j as Y}from"./index-z4YXot-9.js";class et{listenForWhisper(e,i){return this.listen(".client-"+e,i)}notification(e){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",e)}stopListeningForWhisper(e,i){return this.stopListening(".client-"+e,i)}}class Ut{constructor(e){this.namespace=e}format(e){return[".","\\"].includes(e.charAt(0))?e.substring(1):(this.namespace&&(e=this.namespace+"."+e),e.replace(/\./g,"\\"))}setNamespace(e){this.namespace=e}}function fr(r){try{new r}catch(e){if(e instanceof Error&&e.message.includes("is not a constructor"))return!1}return!0}class tt extends et{constructor(e,i,a){super(),this.name=i,this.pusher=e,this.options=a,this.eventFormatter=new Ut(this.options.namespace),this.subscribe()}subscribe(){this.subscription=this.pusher.subscribe(this.name)}unsubscribe(){this.pusher.unsubscribe(this.name)}listen(e,i){return this.on(this.eventFormatter.format(e),i),this}listenToAll(e){return this.subscription.bind_global((i,a)=>{if(i.startsWith("pusher:"))return;let u=String(this.options.namespace??"").replace(/\./g,"\\"),d=i.startsWith(u)?i.substring(u.length+1):"."+i;e(d,a)}),this}stopListening(e,i){return i?this.subscription.unbind(this.eventFormatter.format(e),i):this.subscription.unbind(this.eventFormatter.format(e)),this}stopListeningToAll(e){return e?this.subscription.unbind_global(e):this.subscription.unbind_global(),this}subscribed(e){return this.on("pusher:subscription_succeeded",()=>{e()}),this}error(e){return this.on("pusher:subscription_error",i=>{e(i)}),this}on(e,i){return this.subscription.bind(e,i),this}}class qt extends tt{whisper(e,i){return this.pusher.channels.channels[this.name].trigger(`client-${e}`,i),this}}class pr extends tt{whisper(e,i){return this.pusher.channels.channels[this.name].trigger(`client-${e}`,i),this}}class gr extends qt{here(e){return this.on("pusher:subscription_succeeded",i=>{e(Object.keys(i.members).map(a=>i.members[a]))}),this}joining(e){return this.on("pusher:member_added",i=>{e(i.info)}),this}whisper(e,i){return this.pusher.channels.channels[this.name].trigger(`client-${e}`,i),this}leaving(e){return this.on("pusher:member_removed",i=>{e(i.info)}),this}}class Ht extends et{constructor(e,i,a){super(),this.events={},this.listeners={},this.name=i,this.socket=e,this.options=a,this.eventFormatter=new Ut(this.options.namespace),this.subscribe()}subscribe(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}unsubscribe(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}listen(e,i){return this.on(this.eventFormatter.format(e),i),this}stopListening(e,i){return this.unbindEvent(this.eventFormatter.format(e),i),this}subscribed(e){return this.on("connect",i=>{e(i)}),this}error(e){return this}on(e,i){return this.listeners[e]=this.listeners[e]||[],this.events[e]||(this.events[e]=(a,u)=>{this.name===a&&this.listeners[e]&&this.listeners[e].forEach(d=>d(u))},this.socket.on(e,this.events[e])),this.listeners[e].push(i),this}unbind(){Object.keys(this.events).forEach(e=>{this.unbindEvent(e)})}unbindEvent(e,i){this.listeners[e]=this.listeners[e]||[],i&&(this.listeners[e]=this.listeners[e].filter(a=>a!==i)),(!i||this.listeners[e].length===0)&&(this.events[e]&&(this.socket.removeListener(e,this.events[e]),delete this.events[e]),delete this.listeners[e])}}class Wt extends Ht{whisper(e,i){return this.socket.emit("client event",{channel:this.name,event:`client-${e}`,data:i}),this}}class mr extends Wt{here(e){return this.on("presence:subscribed",i=>{e(i.map(a=>a.user_info))}),this}joining(e){return this.on("presence:joining",i=>e(i.user_info)),this}whisper(e,i){return this.socket.emit("client event",{channel:this.name,event:`client-${e}`,data:i}),this}leaving(e){return this.on("presence:leaving",i=>e(i.user_info)),this}}class Ie extends et{subscribe(){}unsubscribe(){}listen(e,i){return this}listenToAll(e){return this}stopListening(e,i){return this}subscribed(e){return this}error(e){return this}on(e,i){return this}}class Bt extends Ie{whisper(e,i){return this}}class vr extends Ie{whisper(e,i){return this}}class br extends Bt{here(e){return this}joining(e){return this}whisper(e,i){return this}leaving(e){return this}}const zt=class Yt{constructor(e){this.setOptions(e),this.connect()}setOptions(e){this.options={...Yt._defaultOptions,...e,broadcaster:e.broadcaster};let i=this.csrfToken();i&&(this.options.auth.headers["X-CSRF-TOKEN"]=i,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=i),i=this.options.bearerToken,i&&(this.options.auth.headers.Authorization="Bearer "+i,this.options.userAuthentication.headers.Authorization="Bearer "+i)}csrfToken(){var e,i;return typeof window<"u"&&(e=window.Laravel)!=null&&e.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"?((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))??null:null}};zt._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"};let nt=zt;class Ae extends nt{constructor(){super(...arguments),this.channels={}}connect(){if(typeof this.options.client<"u")this.pusher=this.options.client;else if(this.options.Pusher)this.pusher=new this.options.Pusher(this.options.key,this.options);else if(typeof window<"u"&&typeof window.Pusher<"u")this.pusher=new window.Pusher(this.options.key,this.options);else throw new Error("Pusher client not found. Should be globally available or passed via options.client")}signin(){this.pusher.signin()}listen(e,i,a){return this.channel(e).listen(i,a)}channel(e){return this.channels[e]||(this.channels[e]=new tt(this.pusher,e,this.options)),this.channels[e]}privateChannel(e){return this.channels["private-"+e]||(this.channels["private-"+e]=new qt(this.pusher,"private-"+e,this.options)),this.channels["private-"+e]}encryptedPrivateChannel(e){return this.channels["private-encrypted-"+e]||(this.channels["private-encrypted-"+e]=new pr(this.pusher,"private-encrypted-"+e,this.options)),this.channels["private-encrypted-"+e]}presenceChannel(e){return this.channels["presence-"+e]||(this.channels["presence-"+e]=new gr(this.pusher,"presence-"+e,this.options)),this.channels["presence-"+e]}leave(e){[e,"private-"+e,"private-encrypted-"+e,"presence-"+e].forEach(i=>{this.leaveChannel(i)})}leaveChannel(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}socketId(){return this.pusher.connection.socket_id}disconnect(){this.pusher.disconnect()}}class yr extends nt{constructor(){super(...arguments),this.channels={}}connect(){let e=this.getSocketIO();this.socket=e(this.options.host??void 0,this.options),this.socket.io.on("reconnect",()=>{Object.values(this.channels).forEach(i=>{i.subscribe()})})}getSocketIO(){if(typeof this.options.client<"u")return this.options.client;if(typeof window<"u"&&typeof window.io<"u")return window.io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}listen(e,i,a){return this.channel(e).listen(i,a)}channel(e){return this.channels[e]||(this.channels[e]=new Ht(this.socket,e,this.options)),this.channels[e]}privateChannel(e){return this.channels["private-"+e]||(this.channels["private-"+e]=new Wt(this.socket,"private-"+e,this.options)),this.channels["private-"+e]}presenceChannel(e){return this.channels["presence-"+e]||(this.channels["presence-"+e]=new mr(this.socket,"presence-"+e,this.options)),this.channels["presence-"+e]}leave(e){[e,"private-"+e,"presence-"+e].forEach(i=>{this.leaveChannel(i)})}leaveChannel(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}socketId(){return this.socket.id}disconnect(){this.socket.disconnect()}}class Dt extends nt{constructor(){super(...arguments),this.channels={}}connect(){}listen(e,i,a){return new Ie}channel(e){return new Ie}privateChannel(e){return new Bt}encryptedPrivateChannel(e){return new vr}presenceChannel(e){return new br}leave(e){}leaveChannel(e){}socketId(){return"fake-socket-id"}disconnect(){}}class wr{constructor(e){this.options=e,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}channel(e){return this.connector.channel(e)}connect(){if(this.options.broadcaster==="reverb")this.connector=new Ae({...this.options,cluster:""});else if(this.options.broadcaster==="pusher")this.connector=new Ae(this.options);else if(this.options.broadcaster==="ably")this.connector=new Ae({...this.options,cluster:"",broadcaster:"pusher"});else if(this.options.broadcaster==="socket.io")this.connector=new yr(this.options);else if(this.options.broadcaster==="null")this.connector=new Dt(this.options);else if(typeof this.options.broadcaster=="function"&&fr(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error(`Broadcaster ${typeof this.options.broadcaster} ${String(this.options.broadcaster)} is not supported.`)}disconnect(){this.connector.disconnect()}join(e){return this.connector.presenceChannel(e)}leave(e){this.connector.leave(e)}leaveChannel(e){this.connector.leaveChannel(e)}leaveAllChannels(){for(const e in this.connector.channels)this.leaveChannel(e)}listen(e,i,a){return this.connector.listen(e,i,a)}private(e){return this.connector.privateChannel(e)}encryptedPrivate(e){if(this.connectorSupportsEncryptedPrivateChannels(this.connector))return this.connector.encryptedPrivateChannel(e);throw new Error(`Broadcaster ${typeof this.options.broadcaster} ${String(this.options.broadcaster)} does not support encrypted private channels.`)}connectorSupportsEncryptedPrivateChannels(e){return e instanceof Ae||e instanceof Dt}socketId(){return this.connector.socketId()}registerInterceptors(){typeof Vue<"u"&&Vue!=null&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),typeof Turbo=="object"&&this.registerTurboRequestInterceptor()}registerVueRequestInterceptor(){Vue.http.interceptors.push((e,i)=>{this.socketId()&&e.headers.set("X-Socket-ID",this.socketId()),i()})}registerAxiosRequestInterceptor(){axios.interceptors.request.use(e=>(this.socketId()&&(e.headers["X-Socket-Id"]=this.socketId()),e))}registerjQueryAjaxSetup(){typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter((e,i,a)=>{this.socketId()&&a.setRequestHeader("X-Socket-Id",this.socketId())})}registerTurboRequestInterceptor(){document.addEventListener("turbo:before-fetch-request",e=>{e.detail.fetchOptions.headers["X-Socket-Id"]=this.socketId()})}}var $e={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */var Lt;function Cr(){return Lt||(Lt=1,function(r,e){(function(a,u){r.exports=u()})(window,function(){return function(i){var a={};function u(d){if(a[d])return a[d].exports;var l=a[d]={i:d,l:!1,exports:{}};return i[d].call(l.exports,l,l.exports,u),l.l=!0,l.exports}return u.m=i,u.c=a,u.d=function(d,l,w){u.o(d,l)||Object.defineProperty(d,l,{enumerable:!0,get:w})},u.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},u.t=function(d,l){if(l&1&&(d=u(d)),l&8||l&4&&typeof d=="object"&&d&&d.__esModule)return d;var w=Object.create(null);if(u.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:d}),l&2&&typeof d!="string")for(var p in d)u.d(w,p,(function(I){return d[I]}).bind(null,p));return w},u.n=function(d){var l=d&&d.__esModule?function(){return d.default}:function(){return d};return u.d(l,"a",l),l},u.o=function(d,l){return Object.prototype.hasOwnProperty.call(d,l)},u.p="",u(u.s=2)}([function(i,a,u){var d=this&&this.__extends||function(){var b=function(m,v){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,j){O.__proto__=j}||function(O,j){for(var H in j)j.hasOwnProperty(H)&&(O[H]=j[H])},b(m,v)};return function(m,v){b(m,v);function O(){this.constructor=m}m.prototype=v===null?Object.create(v):(O.prototype=v.prototype,new O)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=256,w=function(){function b(m){m===void 0&&(m="="),this._paddingCharacter=m}return b.prototype.encodedLength=function(m){return this._paddingCharacter?(m+2)/3*4|0:(m*8+5)/6|0},b.prototype.encode=function(m){for(var v="",O=0;O<m.length-2;O+=3){var j=m[O]<<16|m[O+1]<<8|m[O+2];v+=this._encodeByte(j>>>3*6&63),v+=this._encodeByte(j>>>2*6&63),v+=this._encodeByte(j>>>1*6&63),v+=this._encodeByte(j>>>0*6&63)}var H=m.length-O;if(H>0){var j=m[O]<<16|(H===2?m[O+1]<<8:0);v+=this._encodeByte(j>>>3*6&63),v+=this._encodeByte(j>>>2*6&63),H===2?v+=this._encodeByte(j>>>1*6&63):v+=this._paddingCharacter||"",v+=this._paddingCharacter||""}return v},b.prototype.maxDecodedLength=function(m){return this._paddingCharacter?m/4*3|0:(m*6+7)/8|0},b.prototype.decodedLength=function(m){return this.maxDecodedLength(m.length-this._getPaddingLength(m))},b.prototype.decode=function(m){if(m.length===0)return new Uint8Array(0);for(var v=this._getPaddingLength(m),O=m.length-v,j=new Uint8Array(this.maxDecodedLength(O)),H=0,W=0,G=0,$=0,X=0,K=0,ne=0;W<O-4;W+=4)$=this._decodeChar(m.charCodeAt(W+0)),X=this._decodeChar(m.charCodeAt(W+1)),K=this._decodeChar(m.charCodeAt(W+2)),ne=this._decodeChar(m.charCodeAt(W+3)),j[H++]=$<<2|X>>>4,j[H++]=X<<4|K>>>2,j[H++]=K<<6|ne,G|=$&l,G|=X&l,G|=K&l,G|=ne&l;if(W<O-1&&($=this._decodeChar(m.charCodeAt(W)),X=this._decodeChar(m.charCodeAt(W+1)),j[H++]=$<<2|X>>>4,G|=$&l,G|=X&l),W<O-2&&(K=this._decodeChar(m.charCodeAt(W+2)),j[H++]=X<<4|K>>>2,G|=K&l),W<O-3&&(ne=this._decodeChar(m.charCodeAt(W+3)),j[H++]=K<<6|ne,G|=ne&l),G!==0)throw new Error("Base64Coder: incorrect characters for decoding");return j},b.prototype._encodeByte=function(m){var v=m;return v+=65,v+=25-m>>>8&6,v+=51-m>>>8&-75,v+=61-m>>>8&-15,v+=62-m>>>8&3,String.fromCharCode(v)},b.prototype._decodeChar=function(m){var v=l;return v+=(42-m&m-44)>>>8&-l+m-43+62,v+=(46-m&m-48)>>>8&-l+m-47+63,v+=(47-m&m-58)>>>8&-l+m-48+52,v+=(64-m&m-91)>>>8&-l+m-65+0,v+=(96-m&m-123)>>>8&-l+m-97+26,v},b.prototype._getPaddingLength=function(m){var v=0;if(this._paddingCharacter){for(var O=m.length-1;O>=0&&m[O]===this._paddingCharacter;O--)v++;if(m.length<4||v>2)throw new Error("Base64Coder: incorrect padding")}return v},b}();a.Coder=w;var p=new w;function I(b){return p.encode(b)}a.encode=I;function P(b){return p.decode(b)}a.decode=P;var C=function(b){d(m,b);function m(){return b!==null&&b.apply(this,arguments)||this}return m.prototype._encodeByte=function(v){var O=v;return O+=65,O+=25-v>>>8&6,O+=51-v>>>8&-75,O+=61-v>>>8&-13,O+=62-v>>>8&49,String.fromCharCode(O)},m.prototype._decodeChar=function(v){var O=l;return O+=(44-v&v-46)>>>8&-l+v-45+62,O+=(94-v&v-96)>>>8&-l+v-95+63,O+=(47-v&v-58)>>>8&-l+v-48+52,O+=(64-v&v-91)>>>8&-l+v-65+0,O+=(96-v&v-123)>>>8&-l+v-97+26,O},m}(w);a.URLSafeCoder=C;var T=new C;function E(b){return T.encode(b)}a.encodeURLSafe=E;function S(b){return T.decode(b)}a.decodeURLSafe=S,a.encodedLength=function(b){return p.encodedLength(b)},a.maxDecodedLength=function(b){return p.maxDecodedLength(b)},a.decodedLength=function(b){return p.decodedLength(b)}},function(i,a,u){Object.defineProperty(a,"__esModule",{value:!0});var d="utf8: invalid string",l="utf8: invalid source encoding";function w(P){for(var C=new Uint8Array(p(P)),T=0,E=0;E<P.length;E++){var S=P.charCodeAt(E);S<128?C[T++]=S:S<2048?(C[T++]=192|S>>6,C[T++]=128|S&63):S<55296?(C[T++]=224|S>>12,C[T++]=128|S>>6&63,C[T++]=128|S&63):(E++,S=(S&1023)<<10,S|=P.charCodeAt(E)&1023,S+=65536,C[T++]=240|S>>18,C[T++]=128|S>>12&63,C[T++]=128|S>>6&63,C[T++]=128|S&63)}return C}a.encode=w;function p(P){for(var C=0,T=0;T<P.length;T++){var E=P.charCodeAt(T);if(E<128)C+=1;else if(E<2048)C+=2;else if(E<55296)C+=3;else if(E<=57343){if(T>=P.length-1)throw new Error(d);T++,C+=4}else throw new Error(d)}return C}a.encodedLength=p;function I(P){for(var C=[],T=0;T<P.length;T++){var E=P[T];if(E&128){var S=void 0;if(E<224){if(T>=P.length)throw new Error(l);var b=P[++T];if((b&192)!==128)throw new Error(l);E=(E&31)<<6|b&63,S=128}else if(E<240){if(T>=P.length-1)throw new Error(l);var b=P[++T],m=P[++T];if((b&192)!==128||(m&192)!==128)throw new Error(l);E=(E&15)<<12|(b&63)<<6|m&63,S=2048}else if(E<248){if(T>=P.length-2)throw new Error(l);var b=P[++T],m=P[++T],v=P[++T];if((b&192)!==128||(m&192)!==128||(v&192)!==128)throw new Error(l);E=(E&15)<<18|(b&63)<<12|(m&63)<<6|v&63,S=65536}else throw new Error(l);if(E<S||E>=55296&&E<=57343)throw new Error(l);if(E>=65536){if(E>1114111)throw new Error(l);E-=65536,C.push(String.fromCharCode(55296|E>>10)),E=56320|E&1023}}C.push(String.fromCharCode(E))}return C.join("")}a.decode=I},function(i,a,u){i.exports=u(3).default},function(i,a,u){u.r(a);class d{constructor(t,n){this.lastId=0,this.prefix=t,this.name=n}create(t){this.lastId++;var n=this.lastId,o=this.prefix+n,c=this.name+"["+n+"]",f=!1,g=function(){f||(t.apply(null,arguments),f=!0)};return this[n]=g,{number:n,id:o,name:c,callback:g}}remove(t){delete this[t.number]}}var l=new d("_pusher_script_","Pusher.ScriptReceivers"),w={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},p=w;class I{constructor(t){this.options=t,this.receivers=t.receivers||l,this.loading={}}load(t,n,o){var c=this;if(c.loading[t]&&c.loading[t].length>0)c.loading[t].push(o);else{c.loading[t]=[o];var f=M.createScriptRequest(c.getPath(t,n)),g=c.receivers.create(function(y){if(c.receivers.remove(g),c.loading[t]){var x=c.loading[t];delete c.loading[t];for(var D=function(U){U||f.cleanup()},L=0;L<x.length;L++)x[L](y,D)}});f.send(g)}}getRoot(t){var n,o=M.getDocument().location.protocol;return t&&t.useTLS||o==="https:"?n=this.options.cdn_https:n=this.options.cdn_http,n.replace(/\/*$/,"")+"/"+this.options.version}getPath(t,n){return this.getRoot(n)+"/"+t+this.options.suffix+".js"}}var P=new d("_pusher_dependencies","Pusher.DependenciesReceivers"),C=new I({cdn_http:p.cdn_http,cdn_https:p.cdn_https,version:p.VERSION,suffix:p.dependency_suffix,receivers:P});const T={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var S={buildLogSuffix:function(s){const t="See:",n=T.urls[s];if(!n)return"";let o;return n.fullUrl?o=n.fullUrl:n.path&&(o=T.baseUrl+n.path),o?`${t} ${o}`:""}},b;(function(s){s.UserAuthentication="user-authentication",s.ChannelAuthorization="channel-authorization"})(b||(b={}));class m extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class v extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class O extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class j extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class H extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class W extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class G extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class $ extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class X extends Error{constructor(t,n){super(n),this.status=t,Object.setPrototypeOf(this,new.target.prototype)}}var ne=function(s,t,n,o,c){const f=M.createXHR();f.open("POST",n.endpoint,!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var g in n.headers)f.setRequestHeader(g,n.headers[g]);if(n.headersProvider!=null){let y=n.headersProvider();for(var g in y)f.setRequestHeader(g,y[g])}return f.onreadystatechange=function(){if(f.readyState===4)if(f.status===200){let y,x=!1;try{y=JSON.parse(f.responseText),x=!0}catch{c(new X(200,`JSON returned from ${o.toString()} endpoint was invalid, yet status code was 200. Data was: ${f.responseText}`),null)}x&&c(null,y)}else{let y="";switch(o){case b.UserAuthentication:y=S.buildLogSuffix("authenticationEndpoint");break;case b.ChannelAuthorization:y=`Clients must be authorized to join private or presence channels. ${S.buildLogSuffix("authorizationEndpoint")}`;break}c(new X(f.status,`Unable to retrieve auth string from ${o.toString()} endpoint - received status: ${f.status} from ${n.endpoint}. ${y}`),null)}},f.send(t),f};function Zt(s){return sn(tn(s))}var fe=String.fromCharCode,xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",en=function(s){var t=s.charCodeAt(0);return t<128?s:t<2048?fe(192|t>>>6)+fe(128|t&63):fe(224|t>>>12&15)+fe(128|t>>>6&63)+fe(128|t&63)},tn=function(s){return s.replace(/[^\x00-\x7F]/g,en)},nn=function(s){var t=[0,2,1][s.length%3],n=s.charCodeAt(0)<<16|(s.length>1?s.charCodeAt(1):0)<<8|(s.length>2?s.charCodeAt(2):0),o=[xe.charAt(n>>>18),xe.charAt(n>>>12&63),t>=2?"=":xe.charAt(n>>>6&63),t>=1?"=":xe.charAt(n&63)];return o.join("")},sn=window.btoa||function(s){return s.replace(/[\s\S]{1,3}/g,nn)};class rn{constructor(t,n,o,c){this.clear=n,this.timer=t(()=>{this.timer&&(this.timer=c(this.timer))},o)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var st=rn;function on(s){window.clearTimeout(s)}function an(s){window.clearInterval(s)}class ie extends st{constructor(t,n){super(setTimeout,on,t,function(o){return n(),null})}}class cn extends st{constructor(t,n){super(setInterval,an,t,function(o){return n(),o})}}var un={now(){return Date.now?Date.now():new Date().valueOf()},defer(s){return new ie(0,s)},method(s,...t){var n=Array.prototype.slice.call(arguments,1);return function(o){return o[s].apply(o,n.concat(arguments))}}},B=un;function z(s,...t){for(var n=0;n<t.length;n++){var o=t[n];for(var c in o)o[c]&&o[c].constructor&&o[c].constructor===Object?s[c]=z(s[c]||{},o[c]):s[c]=o[c]}return s}function ln(){for(var s=["Pusher"],t=0;t<arguments.length;t++)typeof arguments[t]=="string"?s.push(arguments[t]):s.push(Pe(arguments[t]));return s.join(" : ")}function rt(s,t){var n=Array.prototype.indexOf;if(s===null)return-1;if(n&&s.indexOf===n)return s.indexOf(t);for(var o=0,c=s.length;o<c;o++)if(s[o]===t)return o;return-1}function Z(s,t){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(s[n],n,s)}function it(s){var t=[];return Z(s,function(n,o){t.push(o)}),t}function hn(s){var t=[];return Z(s,function(n){t.push(n)}),t}function pe(s,t,n){for(var o=0;o<s.length;o++)t.call(n||window,s[o],o,s)}function ot(s,t){for(var n=[],o=0;o<s.length;o++)n.push(t(s[o],o,s,n));return n}function dn(s,t){var n={};return Z(s,function(o,c){n[c]=t(o)}),n}function at(s,t){t=t||function(c){return!!c};for(var n=[],o=0;o<s.length;o++)t(s[o],o,s,n)&&n.push(s[o]);return n}function ct(s,t){var n={};return Z(s,function(o,c){(t&&t(o,c,s,n)||o)&&(n[c]=o)}),n}function fn(s){var t=[];return Z(s,function(n,o){t.push([o,n])}),t}function ut(s,t){for(var n=0;n<s.length;n++)if(t(s[n],n,s))return!0;return!1}function pn(s,t){for(var n=0;n<s.length;n++)if(!t(s[n],n,s))return!1;return!0}function gn(s){return dn(s,function(t){return typeof t=="object"&&(t=Pe(t)),encodeURIComponent(Zt(t.toString()))})}function mn(s){var t=ct(s,function(o){return o!==void 0}),n=ot(fn(gn(t)),B.method("join","=")).join("&");return n}function vn(s){var t=[],n=[];return function o(c,f){var g,y,x;switch(typeof c){case"object":if(!c)return null;for(g=0;g<t.length;g+=1)if(t[g]===c)return{$ref:n[g]};if(t.push(c),n.push(f),Object.prototype.toString.apply(c)==="[object Array]")for(x=[],g=0;g<c.length;g+=1)x[g]=o(c[g],f+"["+g+"]");else{x={};for(y in c)Object.prototype.hasOwnProperty.call(c,y)&&(x[y]=o(c[y],f+"["+JSON.stringify(y)+"]"))}return x;case"number":case"string":case"boolean":return c}}(s,"$")}function Pe(s){try{return JSON.stringify(s)}catch{return JSON.stringify(vn(s))}}class bn{constructor(){this.globalLog=t=>{window.console&&window.console.log&&window.console.log(t)}}debug(...t){this.log(this.globalLog,t)}warn(...t){this.log(this.globalLogWarn,t)}error(...t){this.log(this.globalLogError,t)}globalLogWarn(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)}globalLogError(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)}log(t,...n){var o=ln.apply(this,arguments);Ve.log?Ve.log(o):Ve.logToConsole&&t.bind(this)(o)}}var F=new bn,yn=function(s,t,n,o,c){(n.headers!==void 0||n.headersProvider!=null)&&F.warn(`To send headers with the ${o.toString()} request, you must use AJAX, rather than JSONP.`);var f=s.nextAuthCallbackID.toString();s.nextAuthCallbackID++;var g=s.getDocument(),y=g.createElement("script");s.auth_callbacks[f]=function(L){c(null,L)};var x="Pusher.auth_callbacks['"+f+"']";y.src=n.endpoint+"?callback="+encodeURIComponent(x)+"&"+t;var D=g.getElementsByTagName("head")[0]||g.documentElement;D.insertBefore(y,D.firstChild)},wn=yn;class Cn{constructor(t){this.src=t}send(t){var n=this,o="Error loading "+n.src;n.script=document.createElement("script"),n.script.id=t.id,n.script.src=n.src,n.script.type="text/javascript",n.script.charset="UTF-8",n.script.addEventListener?(n.script.onerror=function(){t.callback(o)},n.script.onload=function(){t.callback(null)}):n.script.onreadystatechange=function(){(n.script.readyState==="loaded"||n.script.readyState==="complete")&&t.callback(null)},n.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(n.errorScript=document.createElement("script"),n.errorScript.id=t.id+"_error",n.errorScript.text=t.name+"('"+o+"');",n.script.async=n.errorScript.async=!1):n.script.async=!0;var c=document.getElementsByTagName("head")[0];c.insertBefore(n.script,c.firstChild),n.errorScript&&c.insertBefore(n.errorScript,n.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class kn{constructor(t,n){this.url=t,this.data=n}send(t){if(!this.request){var n=mn(this.data),o=this.url+"/"+t.number+"?"+n;this.request=M.createScriptRequest(o),this.request.send(t)}}cleanup(){this.request&&this.request.cleanup()}}var _n=function(s,t){return function(n,o){var c="http"+(t?"s":"")+"://",f=c+(s.host||s.options.host)+s.options.path,g=M.createJSONPRequest(f,n),y=M.ScriptReceivers.create(function(x,D){l.remove(y),g.cleanup(),D&&D.host&&(s.host=D.host),o&&o(x,D)});g.send(y)}},Sn={name:"jsonp",getAgent:_n},Tn=Sn;function Fe(s,t,n){var o=s+(t.useTLS?"s":""),c=t.useTLS?t.hostTLS:t.hostNonTLS;return o+"://"+c+n}function Ue(s,t){var n="/app/"+s,o="?protocol="+p.PROTOCOL+"&client=js&version="+p.VERSION+(t?"&"+t:"");return n+o}var xn={getInitial:function(s,t){var n=(t.httpPath||"")+Ue(s,"flash=false");return Fe("ws",t,n)}},Pn={getInitial:function(s,t){var n=(t.httpPath||"/pusher")+Ue(s);return Fe("http",t,n)}},Mn={getInitial:function(s,t){return Fe("http",t,t.httpPath||"/pusher")},getPath:function(s,t){return Ue(s)}};class On{constructor(){this._callbacks={}}get(t){return this._callbacks[qe(t)]}add(t,n,o){var c=qe(t);this._callbacks[c]=this._callbacks[c]||[],this._callbacks[c].push({fn:n,context:o})}remove(t,n,o){if(!t&&!n&&!o){this._callbacks={};return}var c=t?[qe(t)]:it(this._callbacks);n||o?this.removeCallback(c,n,o):this.removeAllCallbacks(c)}removeCallback(t,n,o){pe(t,function(c){this._callbacks[c]=at(this._callbacks[c]||[],function(f){return n&&n!==f.fn||o&&o!==f.context}),this._callbacks[c].length===0&&delete this._callbacks[c]},this)}removeAllCallbacks(t){pe(t,function(n){delete this._callbacks[n]},this)}}function qe(s){return"_"+s}class ee{constructor(t){this.callbacks=new On,this.global_callbacks=[],this.failThrough=t}bind(t,n,o){return this.callbacks.add(t,n,o),this}bind_global(t){return this.global_callbacks.push(t),this}unbind(t,n,o){return this.callbacks.remove(t,n,o),this}unbind_global(t){return t?(this.global_callbacks=at(this.global_callbacks||[],n=>n!==t),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(t,n,o){for(var c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](t,n);var f=this.callbacks.get(t),g=[];if(o?g.push(n,o):n&&g.push(n),f&&f.length>0)for(var c=0;c<f.length;c++)f[c].fn.apply(f[c].context||window,g);else this.failThrough&&this.failThrough(t,n);return this}}class En extends ee{constructor(t,n,o,c,f){super(),this.initialize=M.transportConnectionInitializer,this.hooks=t,this.name=n,this.priority=o,this.key=c,this.options=f,this.state="new",this.timeline=f.timeline,this.activityTimeout=f.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(n){return B.defer(()=>{this.onError(n),this.changeState("closed")}),!1}return this.bindListeners(),F.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(t){return this.state==="open"?(B.defer(()=>{this.socket&&this.socket.send(t)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))}onClose(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(t){this.emit("message",t)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=t=>{this.onError(t)},this.socket.onclose=t=>{this.onClose(t)},this.socket.onmessage=t=>{this.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(t,n){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:n})),this.emit(t,n)}buildTimelineMessage(t){return z({cid:this.id},t)}}class he{constructor(t){this.hooks=t}isSupported(t){return this.hooks.isSupported(t)}createConnection(t,n,o,c){return new En(this.hooks,t,n,o,c)}}var Dn=new he({urls:xn,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!M.getWebSocketAPI()},isSupported:function(){return!!M.getWebSocketAPI()},getSocket:function(s){return M.createWebSocket(s)}}),lt={urls:Pn,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ht=z({getSocket:function(s){return M.HTTPFactory.createStreamingSocket(s)}},lt),dt=z({getSocket:function(s){return M.HTTPFactory.createPollingSocket(s)}},lt),ft={isSupported:function(){return M.isXHRSupported()}},Ln=new he(z({},ht,ft)),An=new he(z({},dt,ft)),In={ws:Dn,xhr_streaming:Ln,xhr_polling:An},Me=In,Rn=new he({file:"sockjs",urls:Mn,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(s,t){return new window.SockJS(s,null,{js_path:C.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(s,t){s.send(JSON.stringify({path:t}))}}),pt={isSupported:function(s){var t=M.isXDRSupported(s.useTLS);return t}},Nn=new he(z({},ht,pt)),jn=new he(z({},dt,pt));Me.xdr_streaming=Nn,Me.xdr_polling=jn,Me.sockjs=Rn;var Fn=Me;class Un extends ee{constructor(){super();var t=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){t.emit("online")},!1),window.addEventListener("offline",function(){t.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var qn=new Un;class Hn{constructor(t,n,o){this.manager=t,this.transport=n,this.minPingDelay=o.minPingDelay,this.maxPingDelay=o.maxPingDelay,this.pingDelay=void 0}createConnection(t,n,o,c){c=z({},c,{activityTimeout:this.pingDelay});var f=this.transport.createConnection(t,n,o,c),g=null,y=function(){f.unbind("open",y),f.bind("closed",x),g=B.now()},x=D=>{if(f.unbind("closed",x),D.code===1002||D.code===1003)this.manager.reportDeath();else if(!D.wasClean&&g){var L=B.now()-g;L<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(L/2,this.minPingDelay))}};return f.bind("open",y),f}isSupported(t){return this.manager.isAlive()&&this.transport.isSupported(t)}}const gt={decodeMessage:function(s){try{var t=JSON.parse(s.data),n=t.data;if(typeof n=="string")try{n=JSON.parse(t.data)}catch{}var o={event:t.event,channel:t.channel,data:n};return t.user_id&&(o.user_id=t.user_id),o}catch(c){throw{type:"MessageParseError",error:c,data:s.data}}},encodeMessage:function(s){return JSON.stringify(s)},processHandshake:function(s){var t=gt.decodeMessage(s);if(t.event==="pusher:connection_established"){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:t.data.activity_timeout*1e3}}else{if(t.event==="pusher:error")return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"}},getCloseAction:function(s){return s.code<4e3?s.code>=1002&&s.code<=1004?"backoff":null:s.code===4e3?"tls_only":s.code<4100?"refused":s.code<4200?"backoff":s.code<4300?"retry":"refused"},getCloseError:function(s){return s.code!==1e3&&s.code!==1001?{type:"PusherError",data:{code:s.code,message:s.reason||s.message}}:null}};var oe=gt;class Wn extends ee{constructor(t,n){super(),this.id=t,this.transport=n,this.activityTimeout=n.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(t){return this.transport.send(t)}send_event(t,n,o){var c={event:t,data:n};return o&&(c.channel=o),F.debug("Event sent",c),this.send(oe.encodeMessage(c))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var t={message:o=>{var c;try{c=oe.decodeMessage(o)}catch(f){this.emit("error",{type:"MessageParseError",error:f,data:o.data})}if(c!==void 0){switch(F.debug("Event recd",c),c.event){case"pusher:error":this.emit("error",{type:"PusherError",data:c.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",c)}},activity:()=>{this.emit("activity")},error:o=>{this.emit("error",o)},closed:o=>{n(),o&&o.code&&this.handleCloseEvent(o),this.transport=null,this.emit("closed")}},n=()=>{Z(t,(o,c)=>{this.transport.unbind(c,o)})};Z(t,(o,c)=>{this.transport.bind(c,o)})}handleCloseEvent(t){var n=oe.getCloseAction(t),o=oe.getCloseError(t);o&&this.emit("error",o),n&&this.emit(n,{action:n,error:o})}}class Bn{constructor(t,n){this.transport=t,this.callback=n,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=t=>{this.unbindListeners();var n;try{n=oe.processHandshake(t)}catch(o){this.finish("error",{error:o}),this.transport.close();return}n.action==="connected"?this.finish("connected",{connection:new Wn(n.id,this.transport),activityTimeout:n.activityTimeout}):(this.finish(n.action,{error:n.error}),this.transport.close())},this.onClosed=t=>{this.unbindListeners();var n=oe.getCloseAction(t)||"backoff",o=oe.getCloseError(t);this.finish(n,{error:o})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(t,n){this.callback(z({transport:this.transport,action:t},n))}}class zn{constructor(t,n){this.timeline=t,this.options=n||{}}send(t,n){this.timeline.isEmpty()||this.timeline.send(M.TimelineTransport.getAgent(this,t),n)}}class He extends ee{constructor(t,n){super(function(o,c){F.debug("No callbacks on "+t+" for "+o)}),this.name=t,this.pusher=n,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(t,n){return n(null,{auth:""})}trigger(t,n){if(t.indexOf("client-")!==0)throw new m("Event '"+t+"' does not start with 'client-'");if(!this.subscribed){var o=S.buildLogSuffix("triggeringClientEvents");F.warn(`Client event triggered before channel 'subscription_succeeded' event . ${o}`)}return this.pusher.send_event(t,n,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(t){var n=t.event,o=t.data;if(n==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(t);else if(n==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(t);else if(n.indexOf("pusher_internal:")!==0){var c={};this.emit(n,o,c)}}handleSubscriptionSucceededEvent(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)}handleSubscriptionCountEvent(t){t.data.subscription_count&&(this.subscriptionCount=t.data.subscription_count),this.emit("pusher:subscription_count",t.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(t,n)=>{t?(this.subscriptionPending=!1,F.error(t.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:t.message},t instanceof X?{status:t.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class We extends He{authorize(t,n){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:t},n)}}class Yn{constructor(){this.reset()}get(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null}each(t){Z(this.members,(n,o)=>{t(this.get(o))})}setMyID(t){this.myID=t}onSubscription(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)}addMember(t){return this.get(t.user_id)===null&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)}removeMember(t){var n=this.get(t.user_id);return n&&(delete this.members[t.user_id],this.count--),n}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Xn=function(s,t,n,o){function c(f){return f instanceof n?f:new n(function(g){g(f)})}return new(n||(n=Promise))(function(f,g){function y(L){try{D(o.next(L))}catch(U){g(U)}}function x(L){try{D(o.throw(L))}catch(U){g(U)}}function D(L){L.done?f(L.value):c(L.value).then(y,x)}D((o=o.apply(s,t||[])).next())})};class Jn extends We{constructor(t,n){super(t,n),this.members=new Yn}authorize(t,n){super.authorize(t,(o,c)=>Xn(this,void 0,void 0,function*(){if(!o)if(c=c,c.channel_data!=null){var f=JSON.parse(c.channel_data);this.members.setMyID(f.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let g=S.buildLogSuffix("authorizationEndpoint");F.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${g}, or the user should be signed in.`),n("Invalid auth response");return}n(o,c)}))}handleEvent(t){var n=t.event;if(n.indexOf("pusher_internal:")===0)this.handleInternalEvent(t);else{var o=t.data,c={};t.user_id&&(c.user_id=t.user_id),this.emit(n,o,c)}}handleInternalEvent(t){var n=t.event,o=t.data;switch(n){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(t);break;case"pusher_internal:member_added":var c=this.members.addMember(o);this.emit("pusher:member_added",c);break;case"pusher_internal:member_removed":var f=this.members.removeMember(o);f&&this.emit("pusher:member_removed",f);break}}handleSubscriptionSucceededEvent(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Vn=u(1),Be=u(0);class Qn extends We{constructor(t,n,o){super(t,n),this.key=null,this.nacl=o}authorize(t,n){super.authorize(t,(o,c)=>{if(o){n(o,c);return}let f=c.shared_secret;if(!f){n(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Be.decode)(f),delete c.shared_secret,n(null,c)})}trigger(t,n){throw new W("Client events are not currently supported for encrypted channels")}handleEvent(t){var n=t.event,o=t.data;if(n.indexOf("pusher_internal:")===0||n.indexOf("pusher:")===0){super.handleEvent(t);return}this.handleEncryptedEvent(n,o)}handleEncryptedEvent(t,n){if(!this.key){F.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!n.ciphertext||!n.nonce){F.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+n);return}let o=Object(Be.decode)(n.ciphertext);if(o.length<this.nacl.secretbox.overheadLength){F.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${o.length}`);return}let c=Object(Be.decode)(n.nonce);if(c.length<this.nacl.secretbox.nonceLength){F.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${c.length}`);return}let f=this.nacl.secretbox.open(o,c,this.key);if(f===null){F.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(g,y)=>{if(g){F.error(`Failed to make a request to the authEndpoint: ${y}. Unable to fetch new key, so dropping encrypted event`);return}if(f=this.nacl.secretbox.open(o,c,this.key),f===null){F.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(t,this.getDataToEmit(f))});return}this.emit(t,this.getDataToEmit(f))}getDataToEmit(t){let n=Object(Vn.decode)(t);try{return JSON.parse(n)}catch{return n}}}class Gn extends ee{constructor(t,n){super(),this.state="initialized",this.connection=null,this.key=t,this.options=n,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var o=M.getNetwork();o.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),o.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(t){return this.connection?this.connection.send(t):!1}send_event(t,n,o){return this.connection?this.connection.send_event(t,n,o):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var t=(n,o)=>{n?this.runner=this.strategy.connect(0,t):o.action==="error"?(this.emit("error",{type:"HandshakeError",error:o.error}),this.timeline.error({handshakeError:o.error})):(this.abortConnecting(),this.handshakeCallbacks[o.action](o))};this.runner=this.strategy.connect(0,t)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var t=this.abandonConnection();t.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(t){this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new ie(t||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new ie(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new ie(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new ie(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(t){return z({},t,{message:n=>{this.resetActivityCheck(),this.emit("message",n)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:n=>{this.emit("error",n)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(t){return z({},t,{connected:n=>{this.activityTimeout=Math.min(this.options.activityTimeout,n.activityTimeout,n.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(n.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let t=n=>o=>{o.error&&this.emit("error",{type:"WebSocketError",error:o.error}),n(o)};return{tls_only:t(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:t(()=>{this.disconnect()}),backoff:t(()=>{this.retryIn(1e3)}),retry:t(()=>{this.retryIn(0)})}}setConnection(t){this.connection=t;for(var n in this.connectionCallbacks)this.connection.bind(n,this.connectionCallbacks[n]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var t in this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var n=this.connection;return this.connection=null,n}}updateState(t,n){var o=this.state;if(this.state=t,o!==t){var c=t;c==="connected"&&(c+=" with new socket ID "+n.socket_id),F.debug("State changed",o+" -> "+c),this.timeline.info({state:t,params:n}),this.emit("state_change",{previous:o,current:t}),this.emit(t,n)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class $n{constructor(){this.channels={}}add(t,n){return this.channels[t]||(this.channels[t]=Kn(t,n)),this.channels[t]}all(){return hn(this.channels)}find(t){return this.channels[t]}remove(t){var n=this.channels[t];return delete this.channels[t],n}disconnect(){Z(this.channels,function(t){t.disconnect()})}}function Kn(s,t){if(s.indexOf("private-encrypted-")===0){if(t.config.nacl)return te.createEncryptedChannel(s,t,t.config.nacl);let n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",o=S.buildLogSuffix("encryptedChannelSupport");throw new W(`${n}. ${o}`)}else{if(s.indexOf("private-")===0)return te.createPrivateChannel(s,t);if(s.indexOf("presence-")===0)return te.createPresenceChannel(s,t);if(s.indexOf("#")===0)throw new v('Cannot create a channel with name "'+s+'".');return te.createChannel(s,t)}}var Zn={createChannels(){return new $n},createConnectionManager(s,t){return new Gn(s,t)},createChannel(s,t){return new He(s,t)},createPrivateChannel(s,t){return new We(s,t)},createPresenceChannel(s,t){return new Jn(s,t)},createEncryptedChannel(s,t,n){return new Qn(s,t,n)},createTimelineSender(s,t){return new zn(s,t)},createHandshake(s,t){return new Bn(s,t)},createAssistantToTheTransportManager(s,t,n){return new Hn(s,t,n)}},te=Zn;class mt{constructor(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}getAssistant(t){return te.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class ae{constructor(t,n){this.strategies=t,this.loop=!!n.loop,this.failFast=!!n.failFast,this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}isSupported(){return ut(this.strategies,B.method("isSupported"))}connect(t,n){var o=this.strategies,c=0,f=this.timeout,g=null,y=(x,D)=>{D?n(null,D):(c=c+1,this.loop&&(c=c%o.length),c<o.length?(f&&(f=f*2,this.timeoutLimit&&(f=Math.min(f,this.timeoutLimit))),g=this.tryStrategy(o[c],t,{timeout:f,failFast:this.failFast},y)):n(!0))};return g=this.tryStrategy(o[c],t,{timeout:f,failFast:this.failFast},y),{abort:function(){g.abort()},forceMinPriority:function(x){t=x,g&&g.forceMinPriority(x)}}}tryStrategy(t,n,o,c){var f=null,g=null;return o.timeout>0&&(f=new ie(o.timeout,function(){g.abort(),c(!0)})),g=t.connect(n,function(y,x){y&&f&&f.isRunning()&&!o.failFast||(f&&f.ensureAborted(),c(y,x))}),{abort:function(){f&&f.ensureAborted(),g.abort()},forceMinPriority:function(y){g.forceMinPriority(y)}}}}class ze{constructor(t){this.strategies=t}isSupported(){return ut(this.strategies,B.method("isSupported"))}connect(t,n){return es(this.strategies,t,function(o,c){return function(f,g){if(c[o].error=f,f){ts(c)&&n(!0);return}pe(c,function(y){y.forceMinPriority(g.transport.priority)}),n(null,g)}})}}function es(s,t,n){var o=ot(s,function(c,f,g,y){return c.connect(t,n(f,y))});return{abort:function(){pe(o,ns)},forceMinPriority:function(c){pe(o,function(f){f.forceMinPriority(c)})}}}function ts(s){return pn(s,function(t){return!!t.error})}function ns(s){!s.error&&!s.aborted&&(s.abort(),s.aborted=!0)}class ss{constructor(t,n,o){this.strategy=t,this.transports=n,this.ttl=o.ttl||1800*1e3,this.usingTLS=o.useTLS,this.timeline=o.timeline}isSupported(){return this.strategy.isSupported()}connect(t,n){var o=this.usingTLS,c=rs(o),f=c&&c.cacheSkipCount?c.cacheSkipCount:0,g=[this.strategy];if(c&&c.timestamp+this.ttl>=B.now()){var y=this.transports[c.transport];y&&(["ws","wss"].includes(c.transport)||f>3?(this.timeline.info({cached:!0,transport:c.transport,latency:c.latency}),g.push(new ae([y],{timeout:c.latency*2+1e3,failFast:!0}))):f++)}var x=B.now(),D=g.pop().connect(t,function L(U,De){U?(vt(o),g.length>0?(x=B.now(),D=g.pop().connect(t,L)):n(U)):(is(o,De.transport.name,B.now()-x,f),n(null,De))});return{abort:function(){D.abort()},forceMinPriority:function(L){t=L,D&&D.forceMinPriority(L)}}}}function Ye(s){return"pusherTransport"+(s?"TLS":"NonTLS")}function rs(s){var t=M.getLocalStorage();if(t)try{var n=t[Ye(s)];if(n)return JSON.parse(n)}catch{vt(s)}return null}function is(s,t,n,o){var c=M.getLocalStorage();if(c)try{c[Ye(s)]=Pe({timestamp:B.now(),transport:t,latency:n,cacheSkipCount:o})}catch{}}function vt(s){var t=M.getLocalStorage();if(t)try{delete t[Ye(s)]}catch{}}class Oe{constructor(t,{delay:n}){this.strategy=t,this.options={delay:n}}isSupported(){return this.strategy.isSupported()}connect(t,n){var o=this.strategy,c,f=new ie(this.options.delay,function(){c=o.connect(t,n)});return{abort:function(){f.ensureAborted(),c&&c.abort()},forceMinPriority:function(g){t=g,c&&c.forceMinPriority(g)}}}}class ge{constructor(t,n,o){this.test=t,this.trueBranch=n,this.falseBranch=o}isSupported(){var t=this.test()?this.trueBranch:this.falseBranch;return t.isSupported()}connect(t,n){var o=this.test()?this.trueBranch:this.falseBranch;return o.connect(t,n)}}class os{constructor(t){this.strategy=t}isSupported(){return this.strategy.isSupported()}connect(t,n){var o=this.strategy.connect(t,function(c,f){f&&o.abort(),n(c,f)});return o}}function me(s){return function(){return s.isSupported()}}var as=function(s,t,n){var o={};function c(Mt,or,ar,cr,ur){var Ot=n(s,Mt,or,ar,cr,ur);return o[Mt]=Ot,Ot}var f=Object.assign({},t,{hostNonTLS:s.wsHost+":"+s.wsPort,hostTLS:s.wsHost+":"+s.wssPort,httpPath:s.wsPath}),g=Object.assign({},f,{useTLS:!0}),y=Object.assign({},t,{hostNonTLS:s.httpHost+":"+s.httpPort,hostTLS:s.httpHost+":"+s.httpsPort,httpPath:s.httpPath}),x={loop:!0,timeout:15e3,timeoutLimit:6e4},D=new mt({minPingDelay:1e4,maxPingDelay:s.activityTimeout}),L=new mt({lives:2,minPingDelay:1e4,maxPingDelay:s.activityTimeout}),U=c("ws","ws",3,f,D),De=c("wss","ws",3,g,D),tr=c("sockjs","sockjs",1,y),kt=c("xhr_streaming","xhr_streaming",1,y,L),nr=c("xdr_streaming","xdr_streaming",1,y,L),_t=c("xhr_polling","xhr_polling",1,y),sr=c("xdr_polling","xdr_polling",1,y),St=new ae([U],x),rr=new ae([De],x),ir=new ae([tr],x),Tt=new ae([new ge(me(kt),kt,nr)],x),xt=new ae([new ge(me(_t),_t,sr)],x),Pt=new ae([new ge(me(Tt),new ze([Tt,new Oe(xt,{delay:4e3})]),xt)],x),Qe=new ge(me(Pt),Pt,ir),Ge;return t.useTLS?Ge=new ze([St,new Oe(Qe,{delay:2e3})]):Ge=new ze([St,new Oe(rr,{delay:2e3}),new Oe(Qe,{delay:5e3})]),new ss(new os(new ge(me(U),Ge,Qe)),o,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},cs=as,us=function(){var s=this;s.timeline.info(s.buildTimelineMessage({transport:s.name+(s.options.useTLS?"s":"")})),s.hooks.isInitialized()?s.changeState("initialized"):s.hooks.file?(s.changeState("initializing"),C.load(s.hooks.file,{useTLS:s.options.useTLS},function(t,n){s.hooks.isInitialized()?(s.changeState("initialized"),n(!0)):(t&&s.onError(t),s.onClose(),n(!1))})):s.onClose()},ls={getRequest:function(s){var t=new window.XDomainRequest;return t.ontimeout=function(){s.emit("error",new O),s.close()},t.onerror=function(n){s.emit("error",n),s.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&s.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&s.onChunk(200,t.responseText),s.emit("finished",200),s.close()},t},abortRequest:function(s){s.ontimeout=s.onerror=s.onprogress=s.onload=null,s.abort()}},hs=ls;const ds=256*1024;class fs extends ee{constructor(t,n,o){super(),this.hooks=t,this.method=n,this.url=o}start(t){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},M.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)}close(){this.unloader&&(M.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(t,n){for(;;){var o=this.advanceBuffer(n);if(o)this.emit("chunk",{status:t,data:o});else break}this.isBufferTooLong(n)&&this.emit("buffer_too_long")}advanceBuffer(t){var n=t.slice(this.position),o=n.indexOf(`
`);return o!==-1?(this.position+=o+1,n.slice(0,o)):null}isBufferTooLong(t){return this.position===t.length&&t.length>ds}}var Xe;(function(s){s[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSED=3]="CLOSED"})(Xe||(Xe={}));var ce=Xe,ps=1;class gs{constructor(t,n){this.hooks=t,this.session=yt(1e3)+"/"+ys(8),this.location=ms(n),this.readyState=ce.CONNECTING,this.openStream()}send(t){return this.sendRaw(JSON.stringify([t]))}ping(){this.hooks.sendHeartbeat(this)}close(t,n){this.onClose(t,n,!0)}sendRaw(t){if(this.readyState===ce.OPEN)try{return M.createSocketRequest("POST",bt(vs(this.location,this.session))).start(t),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(t,n,o){this.closeStream(),this.readyState=ce.CLOSED,this.onclose&&this.onclose({code:t,reason:n,wasClean:o})}onChunk(t){if(t.status===200){this.readyState===ce.OPEN&&this.onActivity();var n,o=t.data.slice(0,1);switch(o){case"o":n=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(n);break;case"a":n=JSON.parse(t.data.slice(1)||"[]");for(var c=0;c<n.length;c++)this.onEvent(n[c]);break;case"m":n=JSON.parse(t.data.slice(1)||"null"),this.onEvent(n);break;case"h":this.hooks.onHeartbeat(this);break;case"c":n=JSON.parse(t.data.slice(1)||"[]"),this.onClose(n[0],n[1],!0);break}}}onOpen(t){this.readyState===ce.CONNECTING?(t&&t.hostname&&(this.location.base=bs(this.location.base,t.hostname)),this.readyState=ce.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(t){this.readyState===ce.OPEN&&this.onmessage&&this.onmessage({data:t})}onActivity(){this.onactivity&&this.onactivity()}onError(t){this.onerror&&this.onerror(t)}openStream(){this.stream=M.createSocketRequest("POST",bt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",t=>{this.onChunk(t)}),this.stream.bind("finished",t=>{this.hooks.onFinished(this,t)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(t){B.defer(()=>{this.onError(t),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function ms(s){var t=/([^\?]*)\/*(\??.*)/.exec(s);return{base:t[1],queryString:t[2]}}function vs(s,t){return s.base+"/"+t+"/xhr_send"}function bt(s){var t=s.indexOf("?")===-1?"?":"&";return s+t+"t="+ +new Date+"&n="+ps++}function bs(s,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(s);return n[1]+t+n[3]}function yt(s){return M.randomInt(s)}function ys(s){for(var t=[],n=0;n<s;n++)t.push(yt(32).toString(32));return t.join("")}var ws=gs,Cs={getReceiveURL:function(s,t){return s.base+"/"+t+"/xhr_streaming"+s.queryString},onHeartbeat:function(s){s.sendRaw("[]")},sendHeartbeat:function(s){s.sendRaw("[]")},onFinished:function(s,t){s.onClose(1006,"Connection interrupted ("+t+")",!1)}},ks=Cs,_s={getReceiveURL:function(s,t){return s.base+"/"+t+"/xhr"+s.queryString},onHeartbeat:function(){},sendHeartbeat:function(s){s.sendRaw("[]")},onFinished:function(s,t){t===200?s.reconnect():s.onClose(1006,"Connection interrupted ("+t+")",!1)}},Ss=_s,Ts={getRequest:function(s){var t=M.getXHRAPI(),n=new t;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&s.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&s.onChunk(n.status,n.responseText),s.emit("finished",n.status),s.close();break}},n},abortRequest:function(s){s.onreadystatechange=null,s.abort()}},xs=Ts,Ps={createStreamingSocket(s){return this.createSocket(ks,s)},createPollingSocket(s){return this.createSocket(Ss,s)},createSocket(s,t){return new ws(s,t)},createXHR(s,t){return this.createRequest(xs,s,t)},createRequest(s,t,n){return new fs(s,t,n)}},wt=Ps;wt.createXDR=function(s,t){return this.createRequest(hs,s,t)};var Ms=wt,Os={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:l,DependenciesReceivers:P,getDefaultStrategy:cs,Transports:Fn,transportConnectionInitializer:us,HTTPFactory:Ms,TimelineTransport:Tn,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(s){window.Pusher=s;var t=()=>{this.onDocumentBody(s.ready)};window.JSON?t():C.load("json2",{},t)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:ne,jsonp:wn}},onDocumentBody(s){document.body?s():setTimeout(()=>{this.onDocumentBody(s)},0)},createJSONPRequest(s,t){return new kn(s,t)},createScriptRequest(s){return new Cn(s)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var s=this.getXHRAPI();return new s},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return qn},createWebSocket(s){var t=this.getWebSocketAPI();return new t(s)},createSocketRequest(s,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(s,t);if(this.isXDRSupported(t.indexOf("https:")===0))return this.HTTPFactory.createXDR(s,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var s=this.getXHRAPI();return!!s&&new s().withCredentials!==void 0},isXDRSupported(s){var t=s?"https:":"http:",n=this.getProtocol();return!!window.XDomainRequest&&n===t},addUnloadListener(s){window.addEventListener!==void 0?window.addEventListener("unload",s,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",s)},removeUnloadListener(s){window.addEventListener!==void 0?window.removeEventListener("unload",s,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",s)},randomInt(s){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*s)}},M=Os,Je;(function(s){s[s.ERROR=3]="ERROR",s[s.INFO=6]="INFO",s[s.DEBUG=7]="DEBUG"})(Je||(Je={}));var Ee=Je;class Es{constructor(t,n,o){this.key=t,this.session=n,this.events=[],this.options=o||{},this.sent=0,this.uniqueID=0}log(t,n){t<=this.options.level&&(this.events.push(z({},n,{timestamp:B.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(t){this.log(Ee.ERROR,t)}info(t){this.log(Ee.INFO,t)}debug(t){this.log(Ee.DEBUG,t)}isEmpty(){return this.events.length===0}send(t,n){var o=z({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(o,(c,f)=>{c||this.sent++,n&&n(c,f)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class Ds{constructor(t,n,o,c){this.name=t,this.priority=n,this.transport=o,this.options=c||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(t,n){if(this.isSupported()){if(this.priority<t)return Ct(new j,n)}else return Ct(new $,n);var o=!1,c=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),f=null,g=function(){c.unbind("initialized",g),c.connect()},y=function(){f=te.createHandshake(c,function(U){o=!0,L(),n(null,U)})},x=function(U){L(),n(U)},D=function(){L();var U;U=Pe(c),n(new H(U))},L=function(){c.unbind("initialized",g),c.unbind("open",y),c.unbind("error",x),c.unbind("closed",D)};return c.bind("initialized",g),c.bind("open",y),c.bind("error",x),c.bind("closed",D),c.initialize(),{abort:()=>{o||(L(),f?f.close():c.close())},forceMinPriority:U=>{o||this.priority<U&&(f?f.close():c.close())}}}}function Ct(s,t){return B.defer(function(){t(s)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:Ls}=M;var As=function(s,t,n,o,c,f){var g=Ls[n];if(!g)throw new G(n);var y=(!s.enabledTransports||rt(s.enabledTransports,t)!==-1)&&(!s.disabledTransports||rt(s.disabledTransports,t)===-1),x;return y?(c=Object.assign({ignoreNullOrigin:s.ignoreNullOrigin},c),x=new Ds(t,o,f?f.getAssistant(g):g,c)):x=Is,x},Is={isSupported:function(){return!1},connect:function(s,t){var n=B.defer(function(){t(new $)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function Rs(s){if(s==null)throw"You must pass an options object";if(s.cluster==null)throw"Options object must provide a cluster";"disableStats"in s&&F.warn("The disableStats option is deprecated in favor of enableStats")}const Ns=(s,t)=>{var n="socket_id="+encodeURIComponent(s.socketId);for(var o in t.params)n+="&"+encodeURIComponent(o)+"="+encodeURIComponent(t.params[o]);if(t.paramsProvider!=null){let c=t.paramsProvider();for(var o in c)n+="&"+encodeURIComponent(o)+"="+encodeURIComponent(c[o])}return n};var js=s=>{if(typeof M.getAuthorizers()[s.transport]>"u")throw`'${s.transport}' is not a recognized auth transport`;return(t,n)=>{const o=Ns(t,s);M.getAuthorizers()[s.transport](M,o,s,b.UserAuthentication,n)}};const Fs=(s,t)=>{var n="socket_id="+encodeURIComponent(s.socketId);n+="&channel_name="+encodeURIComponent(s.channelName);for(var o in t.params)n+="&"+encodeURIComponent(o)+"="+encodeURIComponent(t.params[o]);if(t.paramsProvider!=null){let c=t.paramsProvider();for(var o in c)n+="&"+encodeURIComponent(o)+"="+encodeURIComponent(c[o])}return n};var Us=s=>{if(typeof M.getAuthorizers()[s.transport]>"u")throw`'${s.transport}' is not a recognized auth transport`;return(t,n)=>{const o=Fs(t,s);M.getAuthorizers()[s.transport](M,o,s,b.ChannelAuthorization,n)}};const qs=(s,t,n)=>{const o={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return(c,f)=>{const g=s.channel(c.channelName);n(g,o).authorize(c.socketId,f)}};function Hs(s,t){let n={activityTimeout:s.activityTimeout||p.activityTimeout,cluster:s.cluster,httpPath:s.httpPath||p.httpPath,httpPort:s.httpPort||p.httpPort,httpsPort:s.httpsPort||p.httpsPort,pongTimeout:s.pongTimeout||p.pongTimeout,statsHost:s.statsHost||p.stats_host,unavailableTimeout:s.unavailableTimeout||p.unavailableTimeout,wsPath:s.wsPath||p.wsPath,wsPort:s.wsPort||p.wsPort,wssPort:s.wssPort||p.wssPort,enableStats:Xs(s),httpHost:Ws(s),useTLS:Ys(s),wsHost:Bs(s),userAuthenticator:Js(s),channelAuthorizer:Qs(s,t)};return"disabledTransports"in s&&(n.disabledTransports=s.disabledTransports),"enabledTransports"in s&&(n.enabledTransports=s.enabledTransports),"ignoreNullOrigin"in s&&(n.ignoreNullOrigin=s.ignoreNullOrigin),"timelineParams"in s&&(n.timelineParams=s.timelineParams),"nacl"in s&&(n.nacl=s.nacl),n}function Ws(s){return s.httpHost?s.httpHost:s.cluster?`sockjs-${s.cluster}.pusher.com`:p.httpHost}function Bs(s){return s.wsHost?s.wsHost:zs(s.cluster)}function zs(s){return`ws-${s}.pusher.com`}function Ys(s){return M.getProtocol()==="https:"?!0:s.forceTLS!==!1}function Xs(s){return"enableStats"in s?s.enableStats:"disableStats"in s?!s.disableStats:!1}function Js(s){const t=Object.assign(Object.assign({},p.userAuthentication),s.userAuthentication);return"customHandler"in t&&t.customHandler!=null?t.customHandler:js(t)}function Vs(s,t){let n;return"channelAuthorization"in s?n=Object.assign(Object.assign({},p.channelAuthorization),s.channelAuthorization):(n={transport:s.authTransport||p.authTransport,endpoint:s.authEndpoint||p.authEndpoint},"auth"in s&&("params"in s.auth&&(n.params=s.auth.params),"headers"in s.auth&&(n.headers=s.auth.headers)),"authorizer"in s&&(n.customHandler=qs(t,n,s.authorizer))),n}function Qs(s,t){const n=Vs(s,t);return"customHandler"in n&&n.customHandler!=null?n.customHandler:Us(n)}class Gs extends ee{constructor(t){super(function(n,o){F.debug(`No callbacks on watchlist events for ${n}`)}),this.pusher=t,this.bindWatchlistInternalEvent()}handleEvent(t){t.data.events.forEach(n=>{this.emit(n.name,n)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",t=>{var n=t.event;n==="pusher_internal:watchlist_events"&&this.handleEvent(t)})}}function $s(){let s,t;return{promise:new Promise((o,c)=>{s=o,t=c}),resolve:s,reject:t}}var Ks=$s;class Zs extends ee{constructor(t){super(function(n,o){F.debug("No callbacks on user for "+n)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(n,o)=>{if(n){F.warn(`Error during signin: ${n}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:o.auth,user_data:o.user_data})},this.pusher=t,this.pusher.connection.bind("state_change",({previous:n,current:o})=>{n!=="connected"&&o==="connected"&&this._signin(),n==="connected"&&o!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new Gs(t),this.pusher.connection.bind("message",n=>{var o=n.event;o==="pusher:signin_success"&&this._onSigninSuccess(n.data),this.serverToUserChannel&&this.serverToUserChannel.name===n.channel&&this.serverToUserChannel.handleEvent(n)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(t){try{this.user_data=JSON.parse(t.user_data)}catch{F.error(`Failed parsing user data after signin: ${t.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){F.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const t=n=>{n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&this.pusher.connection.state==="connected"&&n.subscribe()};this.serverToUserChannel=new He(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((n,o)=>{n.indexOf("pusher_internal:")===0||n.indexOf("pusher:")===0||this.emit(n,o)}),t(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:t,resolve:n}=Ks();t.done=!1;const o=()=>{t.done=!0};t.then(o).catch(o),this.signinDonePromise=t,this._signinDoneResolve=n}}class q{static ready(){q.isReady=!0;for(var t=0,n=q.instances.length;t<n;t++)q.instances[t].connect()}static getClientFeatures(){return it(ct({ws:M.Transports.ws},function(t){return t.isSupported({})}))}constructor(t,n){er(t),Rs(n),this.key=t,this.config=Hs(n,this),this.channels=te.createChannels(),this.global_emitter=new ee,this.sessionID=M.randomInt(1e9),this.timeline=new Es(this.key,this.sessionID,{cluster:this.config.cluster,features:q.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ee.INFO,version:p.VERSION}),this.config.enableStats&&(this.timelineSender=te.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+M.TimelineTransport.name}));var o=c=>M.getDefaultStrategy(this.config,c,As);this.connection=te.createConnectionManager(this.key,{getStrategy:o,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",c=>{var f=c.event,g=f.indexOf("pusher_internal:")===0;if(c.channel){var y=this.channel(c.channel);y&&y.handleEvent(c)}g||this.global_emitter.emit(c.event,c.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",c=>{F.warn(c)}),q.instances.push(this),this.timeline.info({instances:q.instances.length}),this.user=new Zs(this),q.isReady&&this.connect()}channel(t){return this.channels.find(t)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),n=this.timelineSender;this.timelineSenderTimer=new cn(6e4,function(){n.send(t)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(t,n,o){return this.global_emitter.bind(t,n,o),this}unbind(t,n,o){return this.global_emitter.unbind(t,n,o),this}bind_global(t){return this.global_emitter.bind_global(t),this}unbind_global(t){return this.global_emitter.unbind_global(t),this}unbind_all(t){return this.global_emitter.unbind_all(),this}subscribeAll(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)}subscribe(t){var n=this.channels.add(t,this);return n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&this.connection.state==="connected"&&n.subscribe(),n}unsubscribe(t){var n=this.channels.find(t);n&&n.subscriptionPending?n.cancelSubscription():(n=this.channels.remove(t),n&&n.subscribed&&n.unsubscribe())}send_event(t,n,o){return this.connection.send_event(t,n,o)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}q.instances=[],q.isReady=!1,q.logToConsole=!1,q.Runtime=M,q.ScriptReceivers=M.ScriptReceivers,q.DependenciesReceivers=M.DependenciesReceivers,q.auth_callbacks=M.auth_callbacks;var Ve=a.default=q;function er(s){if(s==null)throw"You must pass your app key when you instantiate Pusher."}M.setup(q)}])})}($e)),$e.exports}var kr=Cr();const _r=lr(kr),Xt=6048e5,Sr=864e5,At=Symbol.for("constructDateFrom");function V(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&At in r?r[At](e):r instanceof Date?new r.constructor(e):new Date(e)}function Q(r,e){return V(e||r,r)}function Tr(r,e,i){const a=Q(r,i==null?void 0:i.in);return isNaN(e)?V(r,NaN):(a.setDate(a.getDate()+e),a)}let xr={};function je(){return xr}function Te(r,e){var w,p,I,P;const i=je(),a=(e==null?void 0:e.weekStartsOn)??((p=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:p.weekStartsOn)??i.weekStartsOn??((P=(I=i.locale)==null?void 0:I.options)==null?void 0:P.weekStartsOn)??0,u=Q(r,e==null?void 0:e.in),d=u.getDay(),l=(d<a?7:0)+d-a;return u.setDate(u.getDate()-l),u.setHours(0,0,0,0),u}function Re(r,e){return Te(r,{...e,weekStartsOn:1})}function Jt(r,e){const i=Q(r,e==null?void 0:e.in),a=i.getFullYear(),u=V(i,0);u.setFullYear(a+1,0,4),u.setHours(0,0,0,0);const d=Re(u),l=V(i,0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);const w=Re(l);return i.getTime()>=d.getTime()?a+1:i.getTime()>=w.getTime()?a:a-1}function It(r){const e=Q(r),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+r-+i}function Vt(r,...e){const i=V.bind(null,e.find(a=>typeof a=="object"));return e.map(i)}function Ne(r,e){const i=Q(r,e==null?void 0:e.in);return i.setHours(0,0,0,0),i}function Pr(r,e,i){const[a,u]=Vt(i==null?void 0:i.in,r,e),d=Ne(a),l=Ne(u),w=+d-It(d),p=+l-It(l);return Math.round((w-p)/Sr)}function Mr(r,e){const i=Jt(r,e),a=V(r,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),Re(a)}function Qt(r){return V(r,Date.now())}function Gt(r,e,i){const[a,u]=Vt(i==null?void 0:i.in,r,e);return+Ne(a)==+Ne(u)}function Or(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Er(r){return!(!Or(r)&&typeof r!="number"||isNaN(+Q(r)))}function Dr(r,e){const i=Q(r,e==null?void 0:e.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const Lr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ar=(r,e,i)=>{let a;const u=Lr[r];return typeof u=="string"?a=u:e===1?a=u.one:a=u.other.replace("{{count}}",e.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+a:a+" ago":a};function Ke(r){return(e={})=>{const i=e.width?String(e.width):r.defaultWidth;return r.formats[i]||r.formats[r.defaultWidth]}}const Ir={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Nr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jr={date:Ke({formats:Ir,defaultWidth:"full"}),time:Ke({formats:Rr,defaultWidth:"full"}),dateTime:Ke({formats:Nr,defaultWidth:"full"})},Fr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ur=(r,e,i,a)=>Fr[r];function _e(r){return(e,i)=>{const a=i!=null&&i.context?String(i.context):"standalone";let u;if(a==="formatting"&&r.formattingValues){const l=r.defaultFormattingWidth||r.defaultWidth,w=i!=null&&i.width?String(i.width):l;u=r.formattingValues[w]||r.formattingValues[l]}else{const l=r.defaultWidth,w=i!=null&&i.width?String(i.width):r.defaultWidth;u=r.values[w]||r.values[l]}const d=r.argumentCallback?r.argumentCallback(e):e;return u[d]}}const qr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Hr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Br={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xr=(r,e)=>{const i=Number(r),a=i%100;if(a>20||a<10)switch(a%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},Jr={ordinalNumber:Xr,era:_e({values:qr,defaultWidth:"wide"}),quarter:_e({values:Hr,defaultWidth:"wide",argumentCallback:r=>r-1}),month:_e({values:Wr,defaultWidth:"wide"}),day:_e({values:Br,defaultWidth:"wide"}),dayPeriod:_e({values:zr,defaultWidth:"wide",formattingValues:Yr,defaultFormattingWidth:"wide"})};function Se(r){return(e,i={})=>{const a=i.width,u=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],d=e.match(u);if(!d)return null;const l=d[0],w=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],p=Array.isArray(w)?Qr(w,C=>C.test(l)):Vr(w,C=>C.test(l));let I;I=r.valueCallback?r.valueCallback(p):p,I=i.valueCallback?i.valueCallback(I):I;const P=e.slice(l.length);return{value:I,rest:P}}}function Vr(r,e){for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&e(r[i]))return i}function Qr(r,e){for(let i=0;i<r.length;i++)if(e(r[i]))return i}function Gr(r){return(e,i={})=>{const a=e.match(r.matchPattern);if(!a)return null;const u=a[0],d=e.match(r.parsePattern);if(!d)return null;let l=r.valueCallback?r.valueCallback(d[0]):d[0];l=i.valueCallback?i.valueCallback(l):l;const w=e.slice(u.length);return{value:l,rest:w}}}const $r=/^(\d+)(th|st|nd|rd)?/i,Kr=/\d+/i,Zr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ei={any:[/^b/i,/^(a|c)/i]},ti={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ni={any:[/1/i,/2/i,/3/i,/4/i]},si={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ri={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ii={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},oi={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ai={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ci={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ui={ordinalNumber:Gr({matchPattern:$r,parsePattern:Kr,valueCallback:r=>parseInt(r,10)}),era:Se({matchPatterns:Zr,defaultMatchWidth:"wide",parsePatterns:ei,defaultParseWidth:"any"}),quarter:Se({matchPatterns:ti,defaultMatchWidth:"wide",parsePatterns:ni,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Se({matchPatterns:si,defaultMatchWidth:"wide",parsePatterns:ri,defaultParseWidth:"any"}),day:Se({matchPatterns:ii,defaultMatchWidth:"wide",parsePatterns:oi,defaultParseWidth:"any"}),dayPeriod:Se({matchPatterns:ai,defaultMatchWidth:"any",parsePatterns:ci,defaultParseWidth:"any"})},li={code:"en-US",formatDistance:Ar,formatLong:jr,formatRelative:Ur,localize:Jr,match:ui,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hi(r,e){const i=Q(r,e==null?void 0:e.in);return Pr(i,Dr(i))+1}function di(r,e){const i=Q(r,e==null?void 0:e.in),a=+Re(i)-+Mr(i);return Math.round(a/Xt)+1}function $t(r,e){var P,C,T,E;const i=Q(r,e==null?void 0:e.in),a=i.getFullYear(),u=je(),d=(e==null?void 0:e.firstWeekContainsDate)??((C=(P=e==null?void 0:e.locale)==null?void 0:P.options)==null?void 0:C.firstWeekContainsDate)??u.firstWeekContainsDate??((E=(T=u.locale)==null?void 0:T.options)==null?void 0:E.firstWeekContainsDate)??1,l=V((e==null?void 0:e.in)||r,0);l.setFullYear(a+1,0,d),l.setHours(0,0,0,0);const w=Te(l,e),p=V((e==null?void 0:e.in)||r,0);p.setFullYear(a,0,d),p.setHours(0,0,0,0);const I=Te(p,e);return+i>=+w?a+1:+i>=+I?a:a-1}function fi(r,e){var w,p,I,P;const i=je(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((P=(I=i.locale)==null?void 0:I.options)==null?void 0:P.firstWeekContainsDate)??1,u=$t(r,e),d=V((e==null?void 0:e.in)||r,0);return d.setFullYear(u,0,a),d.setHours(0,0,0,0),Te(d,e)}function pi(r,e){const i=Q(r,e==null?void 0:e.in),a=+Te(i,e)-+fi(i,e);return Math.round(a/Xt)+1}function A(r,e){const i=r<0?"-":"",a=Math.abs(r).toString().padStart(e,"0");return i+a}const re={y(r,e){const i=r.getFullYear(),a=i>0?i:1-i;return A(e==="yy"?a%100:a,e.length)},M(r,e){const i=r.getMonth();return e==="M"?String(i+1):A(i+1,2)},d(r,e){return A(r.getDate(),e.length)},a(r,e){const i=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(r,e){return A(r.getHours()%12||12,e.length)},H(r,e){return A(r.getHours(),e.length)},m(r,e){return A(r.getMinutes(),e.length)},s(r,e){return A(r.getSeconds(),e.length)},S(r,e){const i=e.length,a=r.getMilliseconds(),u=Math.trunc(a*Math.pow(10,i-3));return A(u,e.length)}},de={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Rt={G:function(r,e,i){const a=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(a,{width:"abbreviated"});case"GGGGG":return i.era(a,{width:"narrow"});case"GGGG":default:return i.era(a,{width:"wide"})}},y:function(r,e,i){if(e==="yo"){const a=r.getFullYear(),u=a>0?a:1-a;return i.ordinalNumber(u,{unit:"year"})}return re.y(r,e)},Y:function(r,e,i,a){const u=$t(r,a),d=u>0?u:1-u;if(e==="YY"){const l=d%100;return A(l,2)}return e==="Yo"?i.ordinalNumber(d,{unit:"year"}):A(d,e.length)},R:function(r,e){const i=Jt(r);return A(i,e.length)},u:function(r,e){const i=r.getFullYear();return A(i,e.length)},Q:function(r,e,i){const a=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return A(a,2);case"Qo":return i.ordinalNumber(a,{unit:"quarter"});case"QQQ":return i.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,e,i){const a=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return A(a,2);case"qo":return i.ordinalNumber(a,{unit:"quarter"});case"qqq":return i.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,e,i){const a=r.getMonth();switch(e){case"M":case"MM":return re.M(r,e);case"Mo":return i.ordinalNumber(a+1,{unit:"month"});case"MMM":return i.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(a,{width:"wide",context:"formatting"})}},L:function(r,e,i){const a=r.getMonth();switch(e){case"L":return String(a+1);case"LL":return A(a+1,2);case"Lo":return i.ordinalNumber(a+1,{unit:"month"});case"LLL":return i.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(a,{width:"wide",context:"standalone"})}},w:function(r,e,i,a){const u=pi(r,a);return e==="wo"?i.ordinalNumber(u,{unit:"week"}):A(u,e.length)},I:function(r,e,i){const a=di(r);return e==="Io"?i.ordinalNumber(a,{unit:"week"}):A(a,e.length)},d:function(r,e,i){return e==="do"?i.ordinalNumber(r.getDate(),{unit:"date"}):re.d(r,e)},D:function(r,e,i){const a=hi(r);return e==="Do"?i.ordinalNumber(a,{unit:"dayOfYear"}):A(a,e.length)},E:function(r,e,i){const a=r.getDay();switch(e){case"E":case"EE":case"EEE":return i.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(a,{width:"short",context:"formatting"});case"EEEE":default:return i.day(a,{width:"wide",context:"formatting"})}},e:function(r,e,i,a){const u=r.getDay(),d=(u-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(d);case"ee":return A(d,2);case"eo":return i.ordinalNumber(d,{unit:"day"});case"eee":return i.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(u,{width:"short",context:"formatting"});case"eeee":default:return i.day(u,{width:"wide",context:"formatting"})}},c:function(r,e,i,a){const u=r.getDay(),d=(u-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(d);case"cc":return A(d,e.length);case"co":return i.ordinalNumber(d,{unit:"day"});case"ccc":return i.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(u,{width:"narrow",context:"standalone"});case"cccccc":return i.day(u,{width:"short",context:"standalone"});case"cccc":default:return i.day(u,{width:"wide",context:"standalone"})}},i:function(r,e,i){const a=r.getDay(),u=a===0?7:a;switch(e){case"i":return String(u);case"ii":return A(u,e.length);case"io":return i.ordinalNumber(u,{unit:"day"});case"iii":return i.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(a,{width:"short",context:"formatting"});case"iiii":default:return i.day(a,{width:"wide",context:"formatting"})}},a:function(r,e,i){const u=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},b:function(r,e,i){const a=r.getHours();let u;switch(a===12?u=de.noon:a===0?u=de.midnight:u=a/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(r,e,i){const a=r.getHours();let u;switch(a>=17?u=de.evening:a>=12?u=de.afternoon:a>=4?u=de.morning:u=de.night,e){case"B":case"BB":case"BBB":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(r,e,i){if(e==="ho"){let a=r.getHours()%12;return a===0&&(a=12),i.ordinalNumber(a,{unit:"hour"})}return re.h(r,e)},H:function(r,e,i){return e==="Ho"?i.ordinalNumber(r.getHours(),{unit:"hour"}):re.H(r,e)},K:function(r,e,i){const a=r.getHours()%12;return e==="Ko"?i.ordinalNumber(a,{unit:"hour"}):A(a,e.length)},k:function(r,e,i){let a=r.getHours();return a===0&&(a=24),e==="ko"?i.ordinalNumber(a,{unit:"hour"}):A(a,e.length)},m:function(r,e,i){return e==="mo"?i.ordinalNumber(r.getMinutes(),{unit:"minute"}):re.m(r,e)},s:function(r,e,i){return e==="so"?i.ordinalNumber(r.getSeconds(),{unit:"second"}):re.s(r,e)},S:function(r,e){return re.S(r,e)},X:function(r,e,i){const a=r.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return jt(a);case"XXXX":case"XX":return le(a);case"XXXXX":case"XXX":default:return le(a,":")}},x:function(r,e,i){const a=r.getTimezoneOffset();switch(e){case"x":return jt(a);case"xxxx":case"xx":return le(a);case"xxxxx":case"xxx":default:return le(a,":")}},O:function(r,e,i){const a=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Nt(a,":");case"OOOO":default:return"GMT"+le(a,":")}},z:function(r,e,i){const a=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Nt(a,":");case"zzzz":default:return"GMT"+le(a,":")}},t:function(r,e,i){const a=Math.trunc(+r/1e3);return A(a,e.length)},T:function(r,e,i){return A(+r,e.length)}};function Nt(r,e=""){const i=r>0?"-":"+",a=Math.abs(r),u=Math.trunc(a/60),d=a%60;return d===0?i+String(u):i+String(u)+e+A(d,2)}function jt(r,e){return r%60===0?(r>0?"-":"+")+A(Math.abs(r)/60,2):le(r,e)}function le(r,e=""){const i=r>0?"-":"+",a=Math.abs(r),u=A(Math.trunc(a/60),2),d=A(a%60,2);return i+u+e+d}const Ft=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Kt=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gi=(r,e)=>{const i=r.match(/(P+)(p+)?/)||[],a=i[1],u=i[2];if(!u)return Ft(r,e);let d;switch(a){case"P":d=e.dateTime({width:"short"});break;case"PP":d=e.dateTime({width:"medium"});break;case"PPP":d=e.dateTime({width:"long"});break;case"PPPP":default:d=e.dateTime({width:"full"});break}return d.replace("{{date}}",Ft(a,e)).replace("{{time}}",Kt(u,e))},mi={p:Kt,P:gi},vi=/^D+$/,bi=/^Y+$/,yi=["D","DD","YY","YYYY"];function wi(r){return vi.test(r)}function Ci(r){return bi.test(r)}function ki(r,e,i){const a=_i(r,e,i);if(console.warn(a),yi.includes(r))throw new RangeError(a)}function _i(r,e,i){const a=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${a} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Si=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ti=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xi=/^'([^]*?)'?$/,Pi=/''/g,Mi=/[a-zA-Z]/;function Ze(r,e,i){var P,C,T,E;const a=je(),u=a.locale??li,d=a.firstWeekContainsDate??((C=(P=a.locale)==null?void 0:P.options)==null?void 0:C.firstWeekContainsDate)??1,l=a.weekStartsOn??((E=(T=a.locale)==null?void 0:T.options)==null?void 0:E.weekStartsOn)??0,w=Q(r,i==null?void 0:i.in);if(!Er(w))throw new RangeError("Invalid time value");let p=e.match(Ti).map(S=>{const b=S[0];if(b==="p"||b==="P"){const m=mi[b];return m(S,u.formatLong)}return S}).join("").match(Si).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const b=S[0];if(b==="'")return{isToken:!1,value:Oi(S)};if(Rt[b])return{isToken:!0,value:S};if(b.match(Mi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:S}});u.localize.preprocessor&&(p=u.localize.preprocessor(w,p));const I={firstWeekContainsDate:d,weekStartsOn:l,locale:u};return p.map(S=>{if(!S.isToken)return S.value;const b=S.value;(Ci(b)||wi(b))&&ki(b,e,String(r));const m=Rt[b[0]];return m(w,b,u.localize,I)}).join("")}function Oi(r){const e=r.match(xi);return e?e[1].replace(Pi,"'"):r}function Ei(r,e){return Gt(V(r,r),Qt(r))}function Di(r,e,i){return Tr(r,-1,i)}function Li(r,e){return Gt(V(r,r),Di(Qt(r)))}window.Pusher=_r;const Ai={name:"TeamChat",data(){return{sidebarCollapsed:!1,showRightSidebar:!1,showConversationInfo:!1,workspaceName:"Student ERP",currentUser:{id:null,name:"",avatar:null,status:"online"},searchQuery:"",sectionsExpanded:{channels:!0,directMessages:!0},channels:[],directMessages:[],activeConversation:null,messages:[],groupedMessages:{},messagesLoading:!1,messagesPagination:null,messageText:"",uploadedFiles:[],showFormatting:!1,replyingTo:null,sending:!1,echo:null,typingUsers:[],typingTimeout:null,presenceChannel:null,activeThread:null,unreadThreads:0,showCreateChannelModal:!1,showBrowseChannelsModal:!1,showNewDirectMessageModal:!1,showNewMessageModal:!1,showMainEmojiPicker:!1,newChannel:{name:"",description:"",isPrivate:!1}}},computed:{user(){const r=localStorage.getItem("user");if(r)try{return JSON.parse(r)}catch(e){return console.error("Error parsing user data:",e),null}return null},canSendMessage(){return this.messageText.trim()||this.uploadedFiles.length>0}},mounted(){this.initializeUser(),this.setupEcho(),this.loadConversations(),this.startPresenceHeartbeat()},beforeUnmount(){this.echo&&this.echo.disconnect(),this.heartbeatInterval&&clearInterval(this.heartbeatInterval)},methods:{initializeUser(){this.user?this.currentUser={id:this.user.id,name:this.user.name,avatar:this.user.avatar,status:"online"}:(console.error("No user data found"),this.$router.push("/login"))},setupEcho(){try{this.echo=new wr({broadcaster:"pusher",key:"local123456",cluster:"mt1",wsHost:"127.0.0.1",wsPort:"6001",wssPort:"6001",forceTLS:!1,enabledTransports:["ws","wss"],auth:{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}}})}catch(r){console.warn("Real-time messaging not configured. Messages will need manual refresh.",r)}},async loadConversations(){try{const r=await Y.get("/api/channels");this.channels=r.data.data.joined_channels;const e=await Y.get("/api/direct-messages/conversations");this.directMessages=e.data.data,!this.activeConversation&&this.channels.length>0&&this.selectChannel(this.channels[0])}catch(r){console.error("Error loading conversations:",r),this.$toast.error("Failed to load conversations")}},async selectChannel(r){if(this.activeConversation={...r,type:"channel"},this.showRightSidebar=!1,this.activeThread=null,this.echo){this.presenceChannel&&this.echo.leave(this.presenceChannel.name);try{this.presenceChannel=this.echo.join(`presence-channel.${r.id}`).here(e=>{console.log("Users in channel:",e)}).joining(e=>{console.log("User joined:",e)}).leaving(e=>{console.log("User left:",e)}).listenForWhisper("typing",e=>{this.handleTypingIndicator(e.user,!0)}).listen("MessageSent",e=>{this.handleNewMessage(e.message)})}catch(e){console.warn("Could not join presence channel:",e)}}await this.loadMessages()},async selectDirectMessage(r){if(this.activeConversation={...r,type:"dm"},this.showRightSidebar=!1,this.activeThread=null,this.echo){this.presenceChannel&&this.echo.leave(this.presenceChannel.name);try{this.presenceChannel=this.echo.join(`presence-dm.${r.id}`).listenForWhisper("typing",e=>{this.handleTypingIndicator(e.user,!0)}).listen("DirectMessageSent",e=>{this.handleNewDirectMessage(e.message)})}catch(e){console.warn("Could not join DM presence channel:",e)}}await this.loadDirectMessages()},async loadMessages(){this.messagesLoading=!0,this.messages=[];try{const r=await Y.get(`/api/channels/${this.activeConversation.id}`);this.messages=r.data.data.messages.data,this.messagesPagination=r.data.data.messages,this.groupMessagesByDate(),this.$nextTick(()=>{this.scrollToBottom()})}catch(r){console.error("Error loading messages:",r),this.$toast.error("Failed to load messages")}finally{this.messagesLoading=!1}},async loadDirectMessages(){this.messagesLoading=!0,this.messages=[];try{const r=await Y.get(`/api/direct-messages/conversations/${this.activeConversation.id}`);this.messages=r.data.data.messages.data,this.messagesPagination=r.data.data.messages,this.groupMessagesByDate(),this.$nextTick(()=>{this.scrollToBottom()})}catch(r){console.error("Error loading messages:",r),this.$toast.error("Failed to load messages")}finally{this.messagesLoading=!1}},async sendMessage(){var e,i,a,u;if(!this.canSendMessage||this.sending)return;this.sending=!0;const r=new FormData;r.append("content",this.messageText),this.replyingTo&&r.append("parent_id",this.replyingTo.id),this.uploadedFiles.forEach((d,l)=>{r.append(`attachments[${l}]`,d)});try{let d;this.activeConversation.type==="channel"?d=await Y.post(`/api/messages/channels/${this.activeConversation.id}`,r,{headers:{"Content-Type":"multipart/form-data"}}):d=await Y.post(`/api/direct-messages/conversations/${this.activeConversation.id}/messages`,r,{headers:{"Content-Type":"multipart/form-data"}}),d.data.success&&d.data.data&&(this.messages.push(d.data.data),this.groupMessagesByDate(),this.$nextTick(()=>this.scrollToBottom())),this.messageText="",this.uploadedFiles=[],this.replyingTo=null,this.showFormatting=!1,this.$refs.messageInput&&this.$refs.messageInput.focus()}catch(d){console.error("Error sending message:",d);let l="Failed to send message";if((i=(e=d.response)==null?void 0:e.data)!=null&&i.message)l=d.response.data.message;else if((u=(a=d.response)==null?void 0:a.data)!=null&&u.errors){const w=Object.values(d.response.data.errors)[0];l=Array.isArray(w)?w[0]:w}window.$toast?window.$toast.error(l):alert(l)}finally{this.sending=!1}},handleMessageInput(){this.handleTyping();const r=this.$refs.messageInput;r&&(r.style.height="auto",r.style.height=Math.min(r.scrollHeight,120)+"px")},handleTyping(){this.typingTimeout&&clearTimeout(this.typingTimeout),Y.post("/api/presence/typing",{type:this.activeConversation.type,id:this.activeConversation.id}),this.typingTimeout=setTimeout(()=>{Y.post("/api/presence/stop-typing",{type:this.activeConversation.type,id:this.activeConversation.id})},3e3)},handleNewMessage(r){if(this.messages.push(r),this.groupMessagesByDate(),r.user.id!==this.currentUser.id){const e=this.channels.find(i=>i.id===r.channel_id);e&&(e.unread_count=(e.unread_count||0)+1),this.showNotification(r)}this.$nextTick(()=>{this.isNearBottom()&&this.scrollToBottom()})},async createChannel(){try{const r=await Y.post("/api/channels",{name:this.newChannel.name,description:this.newChannel.description,type:this.newChannel.isPrivate?"private":"public"});this.channels.unshift(r.data.data),this.showCreateChannelModal=!1,this.newChannel={name:"",description:"",isPrivate:!1},this.selectChannel(r.data.data),this.$toast.success("Channel created successfully")}catch(r){console.error("Error creating channel:",r),this.$toast.error("Failed to create channel")}},async toggleReaction(r,e){try{this.hasUserReacted(r,e)?await Y.delete(`/api/messages/${r.id}/reactions`,{data:{emoji:e}}):await Y.post(`/api/messages/${r.id}/reactions`,{emoji:e})}catch(i){console.error("Error toggling reaction:",i),this.$toast.error("Failed to update reaction")}},hasUserReacted(r,e){var a,u;const i=(a=r.reactions_summary)==null?void 0:a.find(d=>d.emoji===e);return(u=i==null?void 0:i.users)==null?void 0:u.some(d=>d.id===this.currentUser.id)},formatMessageContent(r){return r.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/~~(.*?)~~/g,"<del>$1</del>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")},formatDateSeparator(r){const e=new Date(r);return Ei(e)?"Today":Li(e)?"Yesterday":Ze(e,"EEEE, MMMM d")},formatMessageTime(r){return Ze(new Date(r),"h:mm a")},formatFileSize(r){const e=["Bytes","KB","MB","GB"];if(r===0)return"0 Bytes";const i=Math.floor(Math.log(r)/Math.log(1024));return Math.round(r/Math.pow(1024,i)*100)/100+" "+e[i]},groupMessagesByDate(){this.groupedMessages=this.messages.reduce((r,e)=>{const i=Ze(new Date(e.created_at),"yyyy-MM-dd");return r[i]||(r[i]=[]),r[i].push(e),r},{})},scrollToBottom(){const r=this.$refs.messagesContainer;r&&(r.scrollTop=r.scrollHeight)},isNearBottom(){const r=this.$refs.messagesContainer;return r?r.scrollHeight-r.scrollTop-r.clientHeight<100:!0},getDefaultAvatar(r){const e=(r==null?void 0:r.name)||"User";return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=random`},getDmAvatar(r){var i;const e=(i=r.participants)==null?void 0:i.find(a=>a.id!==this.currentUser.id);return(e==null?void 0:e.avatar)||this.getDefaultAvatar(e||{name:r.display_name})},getDmPresence(r){var i,a;const e=(i=r.participants)==null?void 0:i.find(u=>u.id!==this.currentUser.id);return((a=e==null?void 0:e.presence)==null?void 0:a.status)||"offline"},getDmStatusText(r){var i,a;const e=(i=r.participants)==null?void 0:i.find(u=>u.id!==this.currentUser.id);return((a=e==null?void 0:e.presence)==null?void 0:a.status_text)||""},getAttachmentIcon(r){return r.isImage()?"ti-image":r.isVideo()?"ti-video-camera":r.isAudio()?"ti-music-alt":r.isPdf()?"ti-file":"ti-clip"},getFileIcon(r){return r.startsWith("image/")?"ti-image":r.startsWith("video/")?"ti-video-camera":r.startsWith("audio/")?"ti-music-alt":r==="application/pdf"?"ti-file":"ti-clip"},handleFileUpload(r){const e=Array.from(r.target.files);this.uploadedFiles.push(...e)},removeFile(r){this.uploadedFiles.splice(r,1)},toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed},toggleSection(r){this.sectionsExpanded[r]=!this.sectionsExpanded[r]},startPresenceHeartbeat(){this.heartbeatInterval=setInterval(()=>{Y.post("/api/presence/heartbeat")},3e4),Y.post("/api/presence/status",{status:"online"})}}},Ii={class:"team-chat-container"},Ri={class:"chat-layout"},Ni={class:"workspace-header"},ji={class:"workspace-info"},Fi={class:"workspace-name"},Ui={class:"user-status"},qi={class:"status-text"},Hi={class:"sidebar-search"},Wi={class:"sidebar-sections"},Bi={class:"sidebar-section"},zi={key:0,class:"badge"},Yi={class:"sidebar-section"},Xi={key:0,class:"section-content"},Ji=["onClick"],Vi={class:"channel-name"},Qi={key:0,class:"unread-count"},Gi={class:"sidebar-section"},$i={key:0,class:"section-content"},Ki=["onClick"],Zi={class:"user-avatar"},eo=["src","alt"],to={class:"dm-info"},no={class:"dm-name"},so={key:0,class:"dm-status"},ro={key:0,class:"unread-count"},io={class:"chat-main"},oo={key:0,class:"chat-header"},ao={class:"header-left"},co={class:"conversation-title"},uo={key:0},lo={key:0,class:"header-info"},ho={class:"member-count"},fo={class:"channel-description"},po={class:"header-actions"},go={key:0,class:"messages-loading"},mo={key:1,class:"messages-list"},vo={class:"date-separator"},bo={class:"message-avatar"},yo=["src","alt"],wo={class:"message-content"},Co={class:"message-header"},ko={class:"message-author"},_o={class:"message-time"},So={key:0,class:"message-edited"},To={key:0,class:"message-body"},xo=["innerHTML"],Po={key:0,class:"message-attachments"},Mo=["onClick"],Oo={class:"attachment-icon"},Eo={class:"attachment-info"},Do={class:"attachment-name"},Lo={class:"attachment-size"},Ao={key:1,class:"message-deleted"},Io={key:2,class:"message-reactions"},Ro=["onClick"],No={class:"reaction-emoji"},jo={class:"reaction-count"},Fo=["onClick"],Uo={class:"message-actions"},qo=["onClick"],Ho=["onClick"],Wo={key:0},Bo=["onClick"],zo=["onClick"],Yo=["onClick"],Xo={key:0,class:"typing-indicator"},Jo={class:"typing-text"},Vo={key:2,class:"empty-state"},Qo={key:3,class:"message-input-container"},Go={key:0,class:"reply-preview"},$o={class:"reply-info"},Ko={class:"reply-content"},Zo={key:1,class:"upload-preview"},ea={class:"upload-icon"},ta={class:"upload-info"},na={class:"upload-name"},sa={class:"upload-size"},ra=["onClick"],ia={class:"message-input-wrapper"},oa={class:"input-field-wrapper"},aa=["placeholder"],ca={key:0,class:"char-counter"},ua={class:"input-actions"},la=["disabled"],ha={key:0,class:"ti-location-arrow"},da={key:1,class:"spinner-small"},fa={key:0,class:"formatting-toolbar"},pa={key:0,class:"chat-right-sidebar"},ga={key:0,class:"thread-view"},ma={class:"thread-header"},va={key:1,class:"conversation-info"},ba={class:"info-header"},ya={class:"modal"},wa={class:"modal-header"},Ca={class:"modal-body"},ka={class:"form-group"},_a={class:"form-group"},Sa={class:"form-group"},Ta={class:"checkbox-label"},xa={class:"form-help"},Pa={class:"modal-footer"},Ma=["disabled"];function Oa(r,e,i,a,u,d){return _(),k("div",Ii,[h("div",Ri,[h("div",{class:J(["chat-sidebar",{"sidebar-collapsed":u.sidebarCollapsed}])},[h("div",Ni,[h("div",ji,[h("h2",Fi,R(u.workspaceName),1),h("div",Ui,[h("div",{class:J(["status-indicator",`status-${u.currentUser.status}`])},null,2),h("span",qi,R(u.currentUser.name),1)])]),h("button",{class:"compose-btn",onClick:e[0]||(e[0]=l=>u.showNewMessageModal=!0)},e[44]||(e[44]=[h("i",{class:"ti-pencil-alt"},null,-1)]))]),h("div",Hi,[be(h("input",{type:"text",placeholder:"Search conversations...","onUpdate:modelValue":e[1]||(e[1]=l=>u.searchQuery=l),onInput:e[2]||(e[2]=(...l)=>r.searchConversations&&r.searchConversations(...l))},null,544),[[Le,u.searchQuery]]),e[45]||(e[45]=h("i",{class:"ti-search"},null,-1))]),h("div",Wi,[h("div",Bi,[h("button",{class:"section-item",onClick:e[3]||(e[3]=(...l)=>r.showThreads&&r.showThreads(...l))},[e[46]||(e[46]=h("i",{class:"ti-comments"},null,-1)),e[47]||(e[47]=h("span",null,"Threads",-1)),u.unreadThreads>0?(_(),k("span",zi,R(u.unreadThreads),1)):N("",!0)])]),h("div",Yi,[h("div",{class:"section-header",onClick:e[5]||(e[5]=l=>d.toggleSection("channels"))},[h("i",{class:J(["ti-angle-down",{rotated:!u.sectionsExpanded.channels}])},null,2),e[49]||(e[49]=h("span",null,"Channels",-1)),h("button",{class:"add-btn",onClick:e[4]||(e[4]=ye(l=>u.showCreateChannelModal=!0,["stop"]))},e[48]||(e[48]=[h("i",{class:"ti-plus"},null,-1)]))]),ve(ke,{name:"slide"},{default:we(()=>[u.sectionsExpanded.channels?(_(),k("div",Xi,[(_(!0),k(se,null,ue(u.channels,l=>{var w,p;return _(),k("div",{key:l.id,class:J(["channel-item",{active:((w=u.activeConversation)==null?void 0:w.type)==="channel"&&((p=u.activeConversation)==null?void 0:p.id)===l.id,unread:l.unread_count>0}]),onClick:I=>d.selectChannel(l)},[e[50]||(e[50]=h("span",{class:"channel-prefix"},"#",-1)),h("span",Vi,R(l.name),1),l.unread_count>0?(_(),k("span",Qi,R(l.unread_count),1)):N("",!0)],10,Ji)}),128)),h("button",{class:"browse-channels",onClick:e[6]||(e[6]=l=>u.showBrowseChannelsModal=!0)},e[51]||(e[51]=[h("i",{class:"ti-plus"},null,-1),Ce(" Browse channels ")]))])):N("",!0)]),_:1})]),h("div",Gi,[h("div",{class:"section-header",onClick:e[8]||(e[8]=l=>d.toggleSection("directMessages"))},[h("i",{class:J(["ti-angle-down",{rotated:!u.sectionsExpanded.directMessages}])},null,2),e[53]||(e[53]=h("span",null,"Direct Messages",-1)),h("button",{class:"add-btn",onClick:e[7]||(e[7]=ye(l=>u.showNewDirectMessageModal=!0,["stop"]))},e[52]||(e[52]=[h("i",{class:"ti-plus"},null,-1)]))]),ve(ke,{name:"slide"},{default:we(()=>[u.sectionsExpanded.directMessages?(_(),k("div",$i,[(_(!0),k(se,null,ue(u.directMessages,l=>{var w,p;return _(),k("div",{key:l.id,class:J(["dm-item",{active:((w=u.activeConversation)==null?void 0:w.type)==="dm"&&((p=u.activeConversation)==null?void 0:p.id)===l.id,unread:l.unread_count>0}]),onClick:I=>d.selectDirectMessage(l)},[h("div",Zi,[h("img",{src:d.getDmAvatar(l),alt:l.display_name},null,8,eo),h("div",{class:J(["presence-indicator",`status-${d.getDmPresence(l)}`])},null,2)]),h("div",to,[h("span",no,R(l.display_name),1),d.getDmPresence(l)!=="offline"?(_(),k("span",so,R(d.getDmStatusText(l)),1)):N("",!0)]),l.unread_count>0?(_(),k("span",ro,R(l.unread_count),1)):N("",!0)],10,Ki)}),128))])):N("",!0)]),_:1})])])],2),h("div",io,[u.activeConversation?(_(),k("div",oo,[h("div",ao,[h("button",{class:"mobile-menu-toggle",onClick:e[9]||(e[9]=(...l)=>d.toggleSidebar&&d.toggleSidebar(...l))},e[54]||(e[54]=[h("i",{class:"ti-menu"},null,-1)])),h("h3",co,[u.activeConversation.type==="channel"?(_(),k("span",uo,"#")):N("",!0),Ce(" "+R(u.activeConversation.name||u.activeConversation.display_name),1)]),u.activeConversation.type==="channel"?(_(),k("div",lo,[h("span",ho,[e[55]||(e[55]=h("i",{class:"ti-user"},null,-1)),Ce(" "+R(u.activeConversation.member_count),1)]),e[56]||(e[56]=h("span",{class:"divider"},"|",-1)),h("span",fo,R(u.activeConversation.description),1)])):N("",!0)]),h("div",po,[h("button",{class:"header-btn",onClick:e[10]||(e[10]=l=>u.showConversationInfo=!0)},e[57]||(e[57]=[h("i",{class:"ti-info-alt"},null,-1)])),h("button",{class:"header-btn",onClick:e[11]||(e[11]=(...l)=>r.toggleStarred&&r.toggleStarred(...l))},[h("i",{class:J(["ti-star",{starred:u.activeConversation.is_starred}])},null,2)]),h("button",{class:"header-btn",onClick:e[12]||(e[12]=(...l)=>r.searchInConversation&&r.searchInConversation(...l))},e[58]||(e[58]=[h("i",{class:"ti-search"},null,-1)]))])])):N("",!0),u.activeConversation?(_(),k("div",{key:1,class:"messages-container",ref:"messagesContainer",onScroll:e[13]||(e[13]=(...l)=>r.handleScroll&&r.handleScroll(...l))},[u.messagesLoading?(_(),k("div",go,e[59]||(e[59]=[h("div",{class:"spinner"},null,-1),h("span",null,"Loading messages...",-1)]))):(_(),k("div",mo,[(_(!0),k(se,null,ue(u.groupedMessages,(l,w)=>(_(),k(se,{key:w},[h("div",vo,[h("span",null,R(d.formatDateSeparator(w)),1)]),(_(!0),k(se,null,ue(l,p=>{var I,P;return _(),k("div",{key:p.id,class:J(["message-wrapper",{"own-message":p.user.id===u.currentUser.id}])},[h("div",bo,[h("img",{src:p.user.avatar||d.getDefaultAvatar(p.user),alt:p.user.name},null,8,yo)]),h("div",wo,[h("div",Co,[h("span",ko,R(p.user.name),1),h("span",_o,R(d.formatMessageTime(p.created_at)),1),p.is_edited?(_(),k("span",So,"(edited)")):N("",!0)]),p.is_deleted?(_(),k("div",Ao," This message was deleted ")):(_(),k("div",To,[h("div",{class:"message-text",innerHTML:d.formatMessageContent(p.content)},null,8,xo),(I=p.attachments)!=null&&I.length?(_(),k("div",Po,[(_(!0),k(se,null,ue(p.attachments,C=>(_(),k("div",{key:C.id,class:"attachment-item",onClick:T=>r.viewAttachment(C)},[h("div",Oo,[h("i",{class:J(d.getAttachmentIcon(C))},null,2)]),h("div",Eo,[h("span",Do,R(C.filename),1),h("span",Lo,R(d.formatFileSize(C.file_size)),1)])],8,Mo))),128))])):N("",!0)])),(P=p.reactions_summary)!=null&&P.length?(_(),k("div",Io,[(_(!0),k(se,null,ue(p.reactions_summary,C=>(_(),k("div",{key:C.emoji,class:J(["reaction-item",{"user-reacted":d.hasUserReacted(p,C.emoji)}]),onClick:T=>d.toggleReaction(p,C.emoji)},[h("span",No,R(C.emoji),1),h("span",jo,R(C.count),1)],10,Ro))),128)),h("button",{class:"add-reaction-btn",onClick:C=>r.showEmojiPicker(p)},e[60]||(e[60]=[h("i",{class:"ti-face-smile"},null,-1)]),8,Fo)])):N("",!0),h("div",Uo,[h("button",{onClick:C=>r.addReaction(p),title:"Add reaction"},e[61]||(e[61]=[h("i",{class:"ti-face-smile"},null,-1)]),8,qo),h("button",{onClick:C=>r.replyToMessage(p),title:"Reply in thread"},[e[62]||(e[62]=h("i",{class:"ti-comment"},null,-1)),p.reply_count>0?(_(),k("span",Wo,R(p.reply_count),1)):N("",!0)],8,Ho),h("button",{onClick:C=>r.shareMessage(p),title:"Share message"},e[63]||(e[63]=[h("i",{class:"ti-share"},null,-1)]),8,Bo),p.user.id===u.currentUser.id?(_(),k("button",{key:0,onClick:C=>r.editMessage(p),title:"Edit message"},e[64]||(e[64]=[h("i",{class:"ti-pencil"},null,-1)]),8,zo)):N("",!0),r.canDeleteMessage(p)?(_(),k("button",{key:1,onClick:C=>r.deleteMessage(p),title:"Delete message"},e[65]||(e[65]=[h("i",{class:"ti-trash"},null,-1)]),8,Yo)):N("",!0)])])],2)}),128))],64))),128)),u.typingUsers.length>0?(_(),k("div",Xo,[e[66]||(e[66]=h("div",{class:"typing-dots"},[h("span"),h("span"),h("span")],-1)),h("span",Jo,R(r.formatTypingUsers(u.typingUsers)),1)])):N("",!0)]))],544)):u.activeConversation?N("",!0):(_(),k("div",Vo,[e[68]||(e[68]=h("div",{class:"empty-icon"},[h("i",{class:"ti-comments"})],-1)),e[69]||(e[69]=h("h3",null,"Welcome to Team Chat",-1)),e[70]||(e[70]=h("p",null,"Select a channel or start a direct message to begin chatting",-1)),h("button",{class:"btn btn-primary",onClick:e[14]||(e[14]=l=>u.showNewMessageModal=!0)},e[67]||(e[67]=[h("i",{class:"ti-pencil-alt"},null,-1),Ce(" Start a conversation ")]))])),u.activeConversation?(_(),k("div",Qo,[u.replyingTo?(_(),k("div",Go,[h("div",$o,[e[71]||(e[71]=h("i",{class:"ti-corner-up-left"},null,-1)),h("span",null,"Replying to "+R(u.replyingTo.user.name),1)]),h("div",Ko,R(u.replyingTo.content),1),h("button",{class:"reply-close",onClick:e[15]||(e[15]=(...l)=>r.cancelReply&&r.cancelReply(...l))},e[72]||(e[72]=[h("i",{class:"ti-close"},null,-1)]))])):N("",!0),u.uploadedFiles.length>0?(_(),k("div",Zo,[(_(!0),k(se,null,ue(u.uploadedFiles,(l,w)=>(_(),k("div",{key:w,class:"upload-item"},[h("div",ea,[h("i",{class:J(d.getFileIcon(l.type))},null,2)]),h("div",ta,[h("span",na,R(l.name),1),h("span",sa,R(d.formatFileSize(l.size)),1)]),h("button",{class:"upload-remove",onClick:p=>d.removeFile(w)},e[73]||(e[73]=[h("i",{class:"ti-close"},null,-1)]),8,ra)]))),128))])):N("",!0),h("div",ia,[h("button",{class:"input-action",onClick:e[17]||(e[17]=l=>r.$refs.fileInput.click())},[e[74]||(e[74]=h("i",{class:"ti-paperclip"},null,-1)),h("input",{ref:"fileInput",type:"file",multiple:"",onChange:e[16]||(e[16]=(...l)=>d.handleFileUpload&&d.handleFileUpload(...l)),style:{display:"none"}},null,544)]),h("div",oa,[be(h("textarea",{ref:"messageInput","onUpdate:modelValue":e[18]||(e[18]=l=>u.messageText=l),onKeydown:[e[19]||(e[19]=Et(ye((...l)=>d.sendMessage&&d.sendMessage(...l),["exact","prevent"]),["enter"])),e[20]||(e[20]=Et(ye(l=>u.messageText+=`
`,["shift","prevent"]),["enter"]))],onInput:e[21]||(e[21]=(...l)=>d.handleMessageInput&&d.handleMessageInput(...l)),placeholder:`Message ${u.activeConversation.type==="channel"?"#"+u.activeConversation.name:u.activeConversation.display_name}`,rows:"1",maxlength:"5000"},null,40,aa),[[Le,u.messageText]]),u.messageText.length>4900?(_(),k("div",ca,R(5e3-u.messageText.length)+" characters remaining ",1)):N("",!0),h("div",ua,[h("button",{class:"emoji-btn",onClick:e[22]||(e[22]=l=>u.showMainEmojiPicker=!0)},e[75]||(e[75]=[h("i",{class:"ti-face-smile"},null,-1)])),h("button",{class:"format-btn",onClick:e[23]||(e[23]=l=>u.showFormatting=!u.showFormatting)},e[76]||(e[76]=[h("i",{class:"ti-text"},null,-1)]))])]),h("button",{class:"send-btn",disabled:!d.canSendMessage||u.sending,onClick:e[24]||(e[24]=(...l)=>d.sendMessage&&d.sendMessage(...l)),"aria-label":"Send message"},[u.sending?(_(),k("div",da)):(_(),k("i",ha))],8,la)]),ve(ke,{name:"slide"},{default:we(()=>[u.showFormatting?(_(),k("div",fa,[h("button",{onClick:e[25]||(e[25]=l=>r.formatText("bold")),title:"Bold"},e[77]||(e[77]=[h("i",{class:"ti-bold"},null,-1)])),h("button",{onClick:e[26]||(e[26]=l=>r.formatText("italic")),title:"Italic"},e[78]||(e[78]=[h("i",{class:"ti-italic"},null,-1)])),h("button",{onClick:e[27]||(e[27]=l=>r.formatText("strike")),title:"Strikethrough"},e[79]||(e[79]=[h("i",{class:"ti-strikethrough"},null,-1)])),e[86]||(e[86]=h("div",{class:"toolbar-separator"},null,-1)),h("button",{onClick:e[28]||(e[28]=l=>r.formatText("link")),title:"Link"},e[80]||(e[80]=[h("i",{class:"ti-link"},null,-1)])),h("button",{onClick:e[29]||(e[29]=l=>r.formatText("code")),title:"Code"},e[81]||(e[81]=[h("i",{class:"ti-code"},null,-1)])),h("button",{onClick:e[30]||(e[30]=l=>r.formatText("code-block")),title:"Code block"},e[82]||(e[82]=[h("i",{class:"ti-file-code"},null,-1)])),e[87]||(e[87]=h("div",{class:"toolbar-separator"},null,-1)),h("button",{onClick:e[31]||(e[31]=l=>r.formatText("list-bullet")),title:"Bullet list"},e[83]||(e[83]=[h("i",{class:"ti-list"},null,-1)])),h("button",{onClick:e[32]||(e[32]=l=>r.formatText("list-number")),title:"Numbered list"},e[84]||(e[84]=[h("i",{class:"ti-list-ol"},null,-1)])),h("button",{onClick:e[33]||(e[33]=l=>r.formatText("quote")),title:"Quote"},e[85]||(e[85]=[h("i",{class:"ti-quote-left"},null,-1)]))])):N("",!0)]),_:1})])):N("",!0)]),ve(ke,{name:"slide-right"},{default:we(()=>[u.showRightSidebar?(_(),k("div",pa,[u.activeThread?(_(),k("div",ga,[h("div",ma,[e[89]||(e[89]=h("h3",null,"Thread",-1)),h("button",{class:"close-btn",onClick:e[34]||(e[34]=(...l)=>r.closeThread&&r.closeThread(...l))},e[88]||(e[88]=[h("i",{class:"ti-close"},null,-1)]))]),e[90]||(e[90]=h("div",{class:"thread-parent"},null,-1)),e[91]||(e[91]=h("div",{class:"thread-messages"},null,-1)),e[92]||(e[92]=h("div",{class:"thread-input"},null,-1))])):u.showConversationInfo?(_(),k("div",va,[h("div",ba,[h("h3",null,R(u.activeConversation.type==="channel"?"Channel":"Conversation")+" Details",1),h("button",{class:"close-btn",onClick:e[35]||(e[35]=l=>u.showConversationInfo=!1)},e[93]||(e[93]=[h("i",{class:"ti-close"},null,-1)]))]),e[94]||(e[94]=h("div",{class:"info-content"},null,-1))])):N("",!0)])):N("",!0)]),_:1})]),ve(ke,{name:"modal"},{default:we(()=>[u.showCreateChannelModal?(_(),k("div",{key:0,class:"modal-overlay",onClick:e[43]||(e[43]=ye(l=>u.showCreateChannelModal=!1,["self"]))},[h("div",ya,[h("div",wa,[e[96]||(e[96]=h("h3",null,"Create a channel",-1)),h("button",{class:"modal-close",onClick:e[36]||(e[36]=l=>u.showCreateChannelModal=!1)},e[95]||(e[95]=[h("i",{class:"ti-close"},null,-1)]))]),h("div",Ca,[h("div",ka,[e[97]||(e[97]=h("label",null,"Channel name",-1)),be(h("input",{"onUpdate:modelValue":e[37]||(e[37]=l=>u.newChannel.name=l),type:"text",placeholder:"e.g. marketing",onInput:e[38]||(e[38]=l=>u.newChannel.name=u.newChannel.name.toLowerCase().replace(/\s+/g,"-"))},null,544),[[Le,u.newChannel.name]])]),h("div",_a,[e[98]||(e[98]=h("label",null,[Ce("Description "),h("span",{class:"optional"},"(optional)")],-1)),be(h("textarea",{"onUpdate:modelValue":e[39]||(e[39]=l=>u.newChannel.description=l),placeholder:"What's this channel about?",rows:"3"},null,512),[[Le,u.newChannel.description]])]),h("div",Sa,[h("label",Ta,[be(h("input",{"onUpdate:modelValue":e[40]||(e[40]=l=>u.newChannel.isPrivate=l),type:"checkbox"},null,512),[[dr,u.newChannel.isPrivate]]),e[99]||(e[99]=h("span",null,"Make private",-1))]),h("p",xa,R(u.newChannel.isPrivate?"Only people you invite can see this channel":"Anyone in your workspace can view and join this channel"),1)])]),h("div",Pa,[h("button",{class:"btn btn-secondary",onClick:e[41]||(e[41]=l=>u.showCreateChannelModal=!1)}," Cancel "),h("button",{class:"btn btn-primary",onClick:e[42]||(e[42]=(...l)=>d.createChannel&&d.createChannel(...l)),disabled:!u.newChannel.name}," Create Channel ",8,Ma)])])])):N("",!0)]),_:1})])}const Aa=hr(Ai,[["render",Oa],["__scopeId","data-v-183fcdb7"]]);export{Aa as default};
