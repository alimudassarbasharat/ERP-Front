import{_ as Pt,u as Nt,s as ae,c as i,b as d,d as e,y as M,F as N,g as V,e as g,n as j,A as o,f as h,t as l,U as Ft,z as P,K as At,w as T,a2 as b,h as I,v as Qe,V as Xe,i as St,$ as $t}from"./index-z4YXot-9.js";const Lt={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex flex-col items-center p-4 sm:p-6 lg:p-8"},Bt={class:"w-full max-w-7xl mx-auto mb-6 flex justify-end"},Vt={class:"flex bg-white rounded-full shadow-lg p-1 border border-purple-100"},Rt=["onClick"],Yt={class:"relative z-10 flex items-center gap-2"},Dt={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},zt={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},Et={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},Ut={key:3,class:"px-2 py-0.5 rounded-full text-xs font-bold bg-white text-purple-700 border border-purple-200 ml-1"},Kt={key:0,class:"absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 opacity-20 animate-pulse rounded-full"},Tt={key:0,class:"h-6 w-px bg-purple-200 mx-1 self-center"},Ht={class:"w-full max-w-7xl mx-auto mt-2 mb-4 flex items-center justify-between bg-white/90 rounded-lg shadow-lg py-2 px-5 transition-all duration-500 border border-gray-200"},Ot={class:"text-base font-medium text-gray-600 tracking-tight flex items-center gap-2"},Gt={class:"flex flex-wrap lg:flex-nowrap items-end gap-x-4 gap-y-2"},Wt={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},qt={class:"relative"},Jt=["value"],Qt={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},Xt={class:"relative"},Zt=["value"],It={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},es={class:"relative"},ts=["value"],ss={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},os={class:"relative"},as=["value"],ls={class:"flex flex-col w-full sm:w-auto sm:min-w-[160px] sm:max-w-[200px] lg:flex-1"},rs={class:"relative"},ns=["value"],is={class:"w-full max-w-7xl mx-auto flex items-center justify-between mb-8"},ds={class:"flex flex-col items-start"},us={class:"text-base font-medium text-gray-600 tracking-tight flex items-center gap-2"},cs={class:"flex-1 flex justify-center"},fs={class:"relative w-full max-w-xs flex items-center"},ps={class:"flex items-center gap-2 ml-4"},ms={key:0,class:"flex items-center gap-2 cursor-pointer group relative"},xs=["checked"],gs={key:0,class:"absolute left-1 top-1"},vs={class:"relative"},ys={key:0,class:"w-full max-w-7xl mx-auto"},hs={key:1,class:"w-full max-w-7xl mx-auto rounded-lg"},bs=["onClick"],ws={key:0,class:"ml-2 flex-shrink-0"},_s={key:0,class:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},ks={key:1,class:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},Cs={key:2,class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},Ms={key:0},js=["colspan"],Ps={class:"flex flex-col items-center justify-center"},Ns={class:"text-center max-w-xs mx-auto"},Fs={class:"text-lg font-light text-gray-500 mb-1"},As={class:"text-gray-500 text-base font-light mb-2"},Ss={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},$s={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Ls={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Bs={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Vs={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Rs={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Ys={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Ds={class:"flex flex-col gap-1"},zs={key:0,class:"flex items-center gap-1"},Es={class:"text-green-600 text-xs"},Us={key:1,class:"flex items-center gap-1"},Ks={class:"text-red-600 text-xs"},Ts={key:2,class:"text-gray-500 text-xs"},Hs={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Os={class:"py-2 px-2"},Gs={class:"py-2 px-2 text-right"},Ws={class:"flex items-center justify-end"},qs={class:"relative flex items-center mr-2"},Js=["checked","onChange"],Qs={key:0,class:"absolute left-1 top-1 pointer-events-none"},Xs=["onClick","disabled"],Zs=["onClick","disabled"],Is=["onClick"],eo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},to={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},so={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},oo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},ao={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},lo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},ro={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},no={class:"py-2 px-2"},io={class:"py-2 px-2 text-right"},uo={class:"flex items-center justify-end gap-2"},co=["onClick","disabled"],fo={key:0,class:"inline-block h-3 w-3 animate-spin rounded-full border-2 border-gray-200 border-t-transparent mr-1"},po={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},mo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},xo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},go={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},vo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},yo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},ho={class:"flex flex-col gap-1"},bo={key:0,class:"flex items-center gap-1"},wo={class:"text-green-600 text-xs"},_o={key:1,class:"flex items-center gap-1"},ko={class:"text-red-600 text-xs"},Co={key:2,class:"text-gray-500 text-xs"},Mo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},jo={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},Po={class:"py-2 px-2 text-gray-900 font-normal text-xs #ffffffspace-nowrap"},No={class:"py-2 px-2"},Fo={class:"py-2 px-2 text-right"},Ao={class:"flex items-center justify-end"},So={class:"relative flex items-center mr-2"},$o=["checked","onChange"],Lo={key:0,class:"absolute left-1 top-1 pointer-events-none"},Bo=["onClick","disabled"],Vo=["onClick","disabled"],Ro=["onClick"],Yo={class:"w-full max-w-7xl mx-auto mt-8 flex flex-row items-center justify-between"},Do={class:"text-gray-600 text-sm font-medium px-2"},zo={class:"flex items-center gap-4"},Eo={class:"text-sm text-gray-600 font-medium flex items-center gap-1"},Uo=["value"],Ko={class:"text-sm text-gray-600 font-medium flex items-center gap-1"},To=["max"],Ho={class:"w-full max-w-7xl mx-auto mt-2 flex justify-center"},Oo={class:"flex items-center gap-2"},Go=["disabled"],Wo={class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-600 text-white text-base font-bold shadow-md"},qo=["disabled"],Jo={class:"w-full flex items-center justify-between px-6 py-4 rounded-t-2xl bg-gradient-to-r from-purple-600 via-pink-500 to-purple-700"},Qo={key:0,class:"bg-gradient-to-br from-gray-50 to-#ffffff rounded-b-2xl p-6"},Xo={class:"bg-white rounded-xl p-4 mb-6 shadow-sm border border-gray-200"},Zo={class:"flex items-center gap-4"},Io={class:"flex-1"},ea={class:"text-base font-bold text-gray-900"},ta={class:"text-xs text-gray-600"},sa={class:"text-xs text-gray-500"},oa={class:"text-right"},aa={class:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},la={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200"},ra={class:"text-sm font-bold text-blue-800"},na={class:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200"},ia={class:"text-sm font-bold text-yellow-800"},da={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200"},ua={class:"text-sm font-bold text-green-800"},ca={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border border-red-200"},fa={class:"text-sm font-bold text-red-800"},pa={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},ma={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},xa={class:"space-y-4"},ga={class:"space-y-4"},va={class:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200"},ya={class:"flex justify-between items-center mb-2"},ha={class:"text-sm font-bold text-purple-700"},ba={class:"flex justify-between items-center mb-2"},wa={class:"text-sm font-semibold text-blue-600"},_a={class:"border-t border-purple-200 pt-2"},ka={class:"flex justify-between items-center"},Ca={class:"text-sm font-bold text-red-600"},Ma={class:"relative"},ja={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},Pa={class:"flex items-center gap-2"},Na={class:"text-sm text-red-700"},Fa={key:0,class:"flex gap-3 px-6 pb-6 justify-end"},Aa=["disabled"],Sa={key:0,class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-gray-200 border-t-transparent"},$a={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},La={class:"w-full flex items-center justify-between px-6 py-4 rounded-t-2xl bg-gradient-to-r from-blue-600 via-purple-500 to-blue-700"},Ba={key:0,class:"bg-gradient-to-br from-gray-50 to-#ffffff rounded-b-2xl p-6"},Va={class:"bg-white rounded-xl p-4 mb-6 shadow-sm border border-gray-200"},Ra={class:"flex items-center gap-4"},Ya={class:"flex-1"},Da={class:"text-base font-bold text-gray-900"},za={class:"text-xs text-gray-600"},Ea={class:"text-xs text-gray-500"},Ua={class:"text-right"},Ka={class:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Ta={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200"},Ha={class:"text-sm font-bold text-blue-800"},Oa={class:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200"},Ga={class:"text-sm font-bold text-yellow-800"},Wa={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200"},qa={class:"text-sm font-bold text-green-800"},Ja={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border border-red-200"},Qa={class:"text-sm font-bold text-red-800"},Xa={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},Za={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ia={class:"space-y-4"},el={class:"relative"},tl={class:"space-y-4"},sl={class:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200"},ol={class:"flex justify-between items-center mb-2"},al={class:"text-sm font-bold text-blue-700"},ll={class:"flex justify-between items-center mb-2"},rl={class:"text-sm font-semibold text-orange-600"},nl={class:"flex justify-between items-center mb-2"},il={class:"text-sm font-semibold text-green-600"},dl={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},ul={class:"flex items-center gap-2"},cl={class:"text-xs text-red-700"},fl={key:0,class:"flex gap-3 px-6 pb-6 justify-end"},pl=["disabled"],ml={key:0,class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-gray-200 border-t-transparent"},xl={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},gl={class:"w-full flex items-center justify-between px-6 py-4 rounded-t-2xl bg-gradient-to-r from-indigo-600 via-purple-500 to-indigo-700"},vl={key:0,class:"bg-gradient-to-br from-gray-50 to-#ffffff rounded-b-2xl p-6"},yl={class:"bg-white rounded-xl p-6 mb-6 shadow-sm border border-gray-200"},hl={class:"flex items-center gap-4"},bl={class:"flex-1"},wl={class:"text-base font-bold text-gray-900"},_l={class:"text-xs text-gray-600"},kl={class:"text-xs text-gray-500"},Cl={class:"text-right"},Ml={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},jl={class:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200 shadow-sm"},Pl={class:"flex items-center gap-3 mb-3"},Nl={class:"text-sm font-bold text-green-700"},Fl={class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200 shadow-sm"},Al={class:"flex items-center gap-3 mb-3"},Sl={class:"text-sm font-bold text-blue-700"},$l={class:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200 shadow-sm"},Ll={class:"flex items-center gap-3 mb-3"},Bl={class:"text-sm font-bold text-purple-700"},Vl={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},Rl={key:0,class:"py-12"},Yl={key:1},Dl={class:"space-y-3 max-h-80 overflow-y-auto"},zl={class:"flex items-center justify-between mb-3"},El={class:"flex items-center gap-4"},Ul={class:"font-bold text-gray-900 text-sm"},Kl={class:"text-xs text-gray-500"},Tl={class:"text-right"},Hl={class:"text-xs font-semibold text-gray-900 mb-1"},Ol={class:"text-xs text-gray-500"},Gl={key:0,class:"bg-white rounded-lg p-3 border border-gray-200 mb-3"},Wl={class:"text-xs text-gray-900"},ql={class:"flex items-center justify-between pt-3 border-t border-gray-200"},Jl={class:"text-xs text-gray-500"},Ql={class:"font-semibold text-gray-900"},Xl={class:"text-xs text-gray-500"},Zl={key:0,class:"text-center py-12"},Il={class:"flex justify-center"},er={key:0,class:"flex justify-end gap-3 px-6 pb-6"},tr={class:"p-4"},sr={class:"text-base font-semibold mb-4 text-purple-700"},or={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4"},ar={class:"flex items-center gap-2"},lr={class:"text-sm text-yellow-800"},rr={class:"space-y-3 max-h-96 overflow-y-auto"},nr={class:"flex-1"},ir={class:"font-medium text-gray-900"},dr={class:"text-sm text-gray-600"},ur={class:"text-xs text-gray-500"},cr={class:"flex gap-2"},fr=["onClick"],pr=["onClick"],mr={class:"flex-1"},xr={class:"font-medium text-gray-900"},gr={class:"text-sm text-gray-600"},vr={class:"text-xs text-gray-500"},yr={class:"flex gap-2"},hr=["onClick"],br=["onClick"],wr={key:0,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},_r={class:"flex items-center gap-2"},kr={class:"text-sm text-green-800"},Cr={key:1,class:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg"},Mr={class:"flex items-center justify-between"},jr={class:"text-sm text-green-600"},Pr=["disabled"],Nr={key:0,class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-gray-200 border-t-transparent mr-2"},Fr={key:2,class:"text-center py-8"},Ar={class:"text-lg font-medium text-gray-900 mb-2"},Sr={class:"text-gray-500"},$r={class:"flex gap-2 justify-end mt-4 pt-4 border-t border-gray-200"},Lr={class:"w-full flex items-center justify-between px-6 py-4 rounded-t-2xl bg-gradient-to-r from-indigo-600 via-purple-500 to-indigo-700"},Br={key:0,class:"bg-gradient-to-br from-gray-50 to-#ffffff rounded-b-2xl p-6"},Vr={class:"bg-white rounded-xl p-6 mb-6 shadow-sm border border-gray-200"},Rr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Yr={class:"space-y-3"},Dr={class:"flex justify-between items-center"},zr={class:"text-sm font-semibold text-gray-900"},Er={class:"flex justify-between items-center"},Ur={class:"text-sm font-semibold text-gray-900"},Kr={class:"flex justify-between items-center"},Tr={class:"text-sm font-semibold text-gray-900"},Hr={class:"flex justify-between items-center"},Or={class:"text-sm font-semibold text-gray-900"},Gr={class:"flex justify-between items-start"},Wr={class:"text-sm font-semibold text-gray-900 text-right max-w-xs"},qr={class:"space-y-3"},Jr={class:"flex justify-between items-center"},Qr={class:"text-sm font-semibold text-gray-900"},Xr={class:"flex justify-between items-center"},Zr={class:"text-sm font-semibold text-blue-600"},Ir={class:"flex justify-between items-center"},en={class:"text-sm font-semibold text-green-600"},tn={class:"flex justify-between items-center"},sn={class:"text-sm font-semibold text-red-600"},on={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},an={class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},ln={key:0,class:"flex items-center justify-center py-8"},rn={key:1,class:"text-center py-8"},nn={key:2,class:"overflow-x-auto"},dn={class:"w-full"},un={class:"py-4 px-4"},cn={class:"flex items-center gap-3"},fn={class:"font-semibold text-gray-900 text-sm"},pn={class:"text-xs text-gray-500"},mn={class:"py-4 px-4"},xn={class:"text-sm text-gray-900"},gn={class:"py-4 px-4 text-right"},vn={class:"text-sm font-semibold text-blue-600"},yn={class:"py-4 px-4 text-right"},hn={class:"text-sm font-semibold text-green-600"},bn={class:"py-4 px-4 text-right"},wn={class:"text-sm font-semibold text-red-600"},_n={class:"py-4 px-4 text-center"},kn={__name:"PayFee",setup(Cn){const c=Nt(),m=ref(null),F=ref(0),A=ref(0),D=ref(0),le=ref(""),Ne=ref(""),Fe=ref(""),W=ref(!1),ee=ref(!1),k=ref(!1);watch(m,a=>{if(a&&typeof a=="object")try{F.value=Number(a.discount_fee||0),A.value=Number(a.late_fee||0)}catch(t){console.error("Error updating editable fields:",t),F.value=0,A.value=0}});const De=computed(()=>{if(!m.value)return 0;const a=Number(m.value.base_fee||0),t=Number(m.value.carry_forward||0),n=Number(F.value||0),r=Number(A.value||0),u=Math.ceil(a+t-n+r);return Math.max(u,0)}),$=computed(()=>{if(!m.value)return 0;try{const a=Number(m.value.partial_fee||0),t=Number(F.value||0),n=Number(A.value||0),r=Math.ceil(a-t+n);return Math.max(r,0)}catch(a){return console.error("Error in computedRemainingAmount:",a),0}}),C=api,Ze=["2022-2023","2023-2024","2024-2025"],Ie=["January","February","March","April","May","June","July","August","September","October","November","December"],q=ref("2024-2025"),pe=ref(""),ve=ref(""),J=ref("January");ref("All");const re=ref([]),ye=ref([]),y=ref([]),et=ref(null),tt=["Paid","Unpaid","All"],Q=ref("All"),st=ref(!1);ref([]),ref([]);const w=ref(1),L=ref(0),me=ref(""),H=ref(!1),O=ref("name"),U=ref("asc"),X=ref(10),he=computed(()=>L.value>0?Math.ceil(L.value/X.value):1);computed(()=>{const a=[],t=he.value,n=w.value;if(t<=4){for(let r=1;r<=t;r++)a.push({type:"page",page:r,key:`page-${r}`});return a}return a.push({type:"page",page:1,key:"page-1"}),n===1?(a.push({type:"page",page:2,key:"page-2"}),t>3&&a.push({type:"ellipsis",key:"ellipsis-1"})):n===2?(a.push({type:"page",page:2,key:"page-2"}),a.push({type:"page",page:3,key:"page-3"}),t>4&&a.push({type:"ellipsis",key:"ellipsis-2"})):n>=t-1?(t>4&&a.push({type:"ellipsis",key:"ellipsis-3"}),a.push({type:"page",page:t-2,key:`page-${t-2}`}),a.push({type:"page",page:t-1,key:`page-${t-1}`})):(a.push({type:"ellipsis",key:"ellipsis-4"}),a.push({type:"page",page:n,key:`page-${n}`}),a.push({type:"page",page:n+1,key:`page-${n+1}`}),a.push({type:"ellipsis",key:"ellipsis-5"})),a.push({type:"page",page:t,key:`page-${t}`}),a}),ref(!1),ref(!1),ref(!1);const te=ref(""),ot=ref(!1),ne=ref(null),ie=ref(!1),R=ref(null),se=ref([]),Ae=ref(!1);watch(ot,a=>{a?y.value.forEach(t=>{t.isSelected=!0}):y.value.forEach(t=>{t.isSelected=!1})}),onMounted(async()=>{try{const a=await C.get("http://localhost:8000/api/classes");a.data.success&&Array.isArray(a.data.result)?(re.value=a.data.result,re.value.length>0&&(pe.value=re.value[0].id)):re.value=[]}catch{re.value=[],c.error("Failed to fetch classes")}try{const a=await C.get("http://localhost:8000/api/sections");a.data.success&&Array.isArray(a.data.result)?ye.value=a.data.result:ye.value=[]}catch{ye.value=[],c.error("Failed to fetch sections")}window.addEventListener("click",ze),window.addEventListener("click",Ee),await B()}),onBeforeUnmount(()=>{window.removeEventListener("click",ze),window.removeEventListener("click",Ee)});async function B(a=1){H.value=!0;try{if(f.value==="student"){const t={class_id:pe.value||"",section_id:ve.value||"",fee_status:Q.value==="All"?"":Q.value,page:a,per_page:X.value,sort_by:O.value,sort_direction:U.value,session:q.value,month:J.value},n=await C.get("http://localhost:8000/api/students",{params:t});n.data.status?(y.value=(n.data.result.data||[]).map(r=>(console.log("Student status from backend:",r.status,"Type:",typeof r.status),{grNo:r.id||r.gr_no,name:`${r.first_name} ${r.last_name||""} / ${r.family_father_name||""}`,familyCode:r.merchant_id||"",classSection:[r.class_name,r.section_name].filter(Boolean).join(" / ")||"â€”",carry_forward:r.prev_amount||0,partial_fee:r.remaining_amount||0,base_fee:r.monthly_fee||0,discount_fee:r.discount_amount||0,late_fee:r.late_fee||0,total_fee:r.total_amount||0,accumulated_paid:r.accumulated_paid||0,status:r.status||"unpaid",contactEmail:r.contact_email||"",fatherName:r.family_father_name||"",motherName:r.family_mother_name||"",isSelected:!1,class_id:r.class_id,section_id:r.section_id})),L.value=n.data.result.total||0,w.value=n.data.result.current_page||1):(y.value=[],w.value=1,c.error(n.data.message||"Failed to fetch students"))}else f.value==="class"?await Le():f.value==="family"&&await Be()}catch(t){console.error("Error fetching data:",t),f.value==="student"?(y.value=[],w.value=1,c.error("Failed to fetch students")):f.value==="class"?(K.value=[],L.value=0,c.error("Failed to fetch class-wise data")):f.value==="family"&&(z.value=[],L.value=0,c.error("Failed to fetch family-wise data"))}finally{H.value=!1}}function at(){et.value=null}function ze(a){a.target.closest(".action-menu-wrap")||at()}function Ee(a){a.target.closest(".modern-multiselect")||(st.value=!1)}function Ue(a){a<1||a>he.value||a===w.value||B(a)}function lt(a){a!=="action"&&(O.value===a?U.value=U.value==="asc"?"desc":"asc":(O.value=a,U.value="asc"),B())}function rt(){}const f=ref("student"),K=ref([]),z=ref([]),Se=computed(()=>[{key:"student",label:"Student Wise",icon:"User",count:nt()},{key:"class",label:"Class Wise",icon:"AcademicCap",count:it()},{key:"family",label:"Family Wise",icon:"Users",count:dt()}]);function nt(){return Array.isArray(y.value)?y.value.length:0}function it(){return Array.isArray(K.value)?K.value.length:0}function dt(){return Array.isArray(z.value)?z.value.length:0}const ut=computed(()=>{const a=Se.value.find(t=>t.key===f.value);return a?a.label:"Student Wise"}),be=computed(()=>{switch(f.value){case"student":return"Student List";case"class":return"Class List";case"family":return"Family List";default:return"Student List"}}),$e=computed(()=>{switch(f.value){case"student":return y.value;case"class":return K.value;case"family":return z.value;default:return y.value}}),_=computed(()=>{if(!te.value)switch(f.value){case"student":return y.value.filter(t=>t.status!=="paid");case"class":return K.value.filter(t=>{const n=!we.value||t.id==we.value,r=!_e.value||t.sectionId&&t.sectionId==_e.value;return n&&r});case"family":return z.value.filter(t=>t.status!=="paid");default:return $e.value}const a=te.value.toLowerCase();switch(f.value){case"student":return y.value.filter(t=>t.status!=="paid"&&(t.name.toLowerCase().includes(a)||t.familyCode.toLowerCase().includes(a)||t.classSection.toLowerCase().includes(a)));case"class":return K.value.filter(t=>{const n=t.name.toLowerCase().includes(a),r=!we.value||t.id==we.value,u=!_e.value||t.sectionId&&t.sectionId==_e.value;return n&&r&&u});case"family":return z.value.filter(t=>t.status!=="paid"&&(t.fatherName.toLowerCase().includes(a)||t.familyCode.toLowerCase().includes(a)));default:return $e.value}}),Ke=computed(()=>{switch(f.value){case"student":return[{key:"grNo",label:"GR. No",width:"80px"},{key:"name",label:"Student / Father",width:"180px"},{key:"classSection",label:"Class",width:"80px"},{key:"carry_forward",label:"Prev Dues",width:"80px"},{key:"base_fee",label:"Monthly",width:"80px"},{key:"partial_fee",label:"Remaining",width:"80px"},{key:"discount_late",label:"D/L Fee",width:"80px"},{key:"total_fee",label:"Total",width:"80px"},{key:"status",label:"Status",width:"80px"},{key:"action",label:"Action",width:"250px"}];case"class":return[{key:"name",label:"Class Name"},{key:"studentCount",label:"Total Students"},{key:"totalFee",label:"Total Fee"},{key:"paidStudents",label:"Paid Students"},{key:"remainingStudents",label:"Remaining Students"},{key:"totalPaidFees",label:"Paid Fee"},{key:"totalRemainingFees",label:"Remaining Fee"},{key:"status",label:"Status"},{key:"action",label:"Action"}];case"family":return[{key:"familyCode",label:"Family Code",width:"100px"},{key:"fatherName",label:"Father Name",width:"150px"},{key:"childrenCount",label:"Children",width:"80px"},{key:"totalBalance",label:"Prev Dues",width:"80px"},{key:"monthlyFees",label:"Monthly",width:"80px"},{key:"discount_late",label:"D/L Fee",width:"80px"},{key:"totalAmount",label:"Total",width:"80px"},{key:"totalPaid",label:"Paid",width:"80px"},{key:"remainingAmount",label:"Remaining",width:"80px"},{key:"status",label:"Status",width:"80px"},{key:"action",label:"Action",width:"120px"}];default:return[]}});function ct(a){f.value!==a&&(H.value=!0,setTimeout(()=>{f.value=a,a==="class"?Le():a==="family"?Be():B(),H.value=!1},300))}async function Le(){var a,t;H.value=!0;try{const n={};q.value&&(n.session=q.value),J.value&&(n.month=J.value),O.value&&(n.sort_by=O.value),U.value&&(n.sort_direction=U.value);const r=await C.get("http://localhost:8000/api/class-fee-summaries",{params:n});r.data.status&&Array.isArray(r.data.result)?(K.value=r.data.result.map(u=>({id:u.class_id,class_id:u.class_id,section_id:u.section_id,name:u.class_name+(u.section_name?` - ${u.section_name}`:""),studentCount:u.total_students,totalFee:u.total_fees||0,paidStudents:u.paid_students,remainingStudents:u.remaining_students,totalPaidFees:u.total_paid_fees,totalRemainingFees:u.total_remaining_fees,status:u.status,isSelected:!1})),L.value=K.value.length):(K.value=[],L.value=0,r.data.status===!1&&c.error(r.data.message||"Failed to fetch class-wise data"))}catch(n){console.error("Class data fetch error:",n),K.value=[],L.value=0,c.error(((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to fetch class-wise data")}finally{H.value=!1}}async function Be(){var a,t;H.value=!0;try{const n={page:w.value,per_page:X.value};q.value&&(n.session=q.value),J.value&&(n.month=J.value),O.value&&(n.sort_by=O.value),U.value&&(n.sort_direction=U.value),te.value&&(n.search=te.value),Q.value&&Q.value!=="All"&&(n.fee_status=Q.value);const r=await C.get("http://localhost:8000/api/family-fee-summaries",{params:n});if(r.data.status&&r.data.result){const u=r.data.result,x=Array.isArray(u)?u:u.data||[];z.value=x.map(p=>({id:p.family_id,familyCode:p.family_code,fatherName:p.father_name,motherName:p.mother_name,contactNumber:p.contact_number,address:p.address,childrenCount:p.children_count,totalBalance:p.total_balance,monthlyFees:p.monthly_fees,totalAmount:p.total_amount,totalPaid:p.total_paid,remainingAmount:p.remaining_amount,totalDiscount:p.total_discount,totalLateFee:p.total_late_fee,paidStudents:p.paid_students,unpaidStudents:p.unpaid_students,status:p.status,isSelected:!1})),Array.isArray(u)?L.value=z.value.length:(L.value=u.total||0,w.value=u.current_page||1)}else z.value=[],L.value=0,r.data.status===!1&&c.error(r.data.message||"Failed to fetch family-wise data")}catch(n){console.error("Family data fetch error:",n),z.value=[],L.value=0,c.error(((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to fetch family-wise data")}finally{H.value=!1}}const we=ref(""),_e=ref(""),Ve=computed(()=>f.value==="student"?_.value.length>0&&_.value.every(a=>a.isSelected):f.value==="class"?_.value.length>0&&_.value.every(a=>a.isSelected):f.value==="family"?_.value.length>0&&_.value.every(a=>a.isSelected):!1),ft=a=>{f.value==="student"?_.value.forEach(t=>t.isSelected=a):f.value==="class"?_.value.forEach(t=>t.isSelected=a):f.value==="family"&&_.value.forEach(t=>t.isSelected=a)},Te=computed(()=>f.value==="student"?_.value.filter(a=>a.isSelected&&a.status!=="paid"):[]),xe=computed(()=>f.value==="student"?_.value.filter(a=>!a.isSelected&&a.status!=="paid"):[]),He=computed(()=>f.value==="family"?_.value.filter(a=>a.isSelected&&a.status!=="paid"):[]),ge=computed(()=>f.value==="family"?_.value.filter(a=>!a.isSelected&&a.status!=="paid"):[]);ref([]),ref([]),ref([]);const Z=ref(!1),de=ref(""),Re=ref(""),ke=ref("Cash"),Ce=ref("Cash");function Ye(a){if(a.status==="paid"){c.warning(`${a.name} ki fee already paid hai.`);return}a.isSelected?(m.value=a,de.value="",Re.value="",Z.value=!0,ue(a.grNo).then(t=>{if(t){const n=t.total_due||0;if(n>0){const r=y.value.findIndex(u=>u.grNo===a.grNo);r!==-1&&(y.value[r].partial_fee=n)}}})):pt(a)}const pt=async a=>{var t,n;k.value=!0;try{const r=dayjs().format("YYYY-MM-01"),u=y.value.find(S=>S.grNo===a.grNo);if(!u){c.error("Could not find student data to process payment."),k.value=!1;return}const x=Math.ceil(Number(u.partial_fee||0));if(x<=0){c.warning(`No fee due for ${a.name}. Remaining amount is ${x}.`),k.value=!1;return}const p={student_id:u.grNo,class_id:u.class_id,month_for:r,base_fee:Math.ceil(Number(u.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(u.carry_forward||0)),final_amount:x,amount_paid:x,payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Auto Payment",remarks:`Auto full payment of ${x} submitted.`,received_by:1},v=await C.post("http://localhost:8000/api/fee-full-payment",p);v.data.status?(c.success(`Full payment submitted for ${a.name}!`),await ue(u.grNo),await B(w.value)):c.error(v.data.message||"Failed to submit payment.")}catch(r){console.error("Error submitting auto full payment:",r),c.error(((n=(t=r.response)==null?void 0:t.data)==null?void 0:n.message)||"An unexpected error occurred.")}finally{k.value=!1}},ue=async a=>{try{const t=await C.get(`http://localhost:8000/api/fee-payment-history/${a}`);if(t.data.status){const n=t.data.result,r=y.value.findIndex(u=>u.grNo===a);return r!==-1&&n.fee_summary&&(y.value[r]={...y.value[r],...n.fee_summary}),n}return null}catch(t){return console.error("Error fetching fee summary:",t),null}};function Oe(a){if(a.status==="paid"){c.warning(`${a.name} ki fee already paid hai.`);return}a.isSelected?(m.value=a,D.value=0,le.value="",Ne.value="",W.value=!0,ue(a.grNo).then(t=>{if(t){const n=t.total_due||0;if(n>0){const r=y.value.findIndex(u=>u.grNo===a.grNo);r!==-1&&(y.value[r].partial_fee=n)}}})):mt(a)}const mt=async a=>{var t,n;k.value=!0;try{const r=dayjs().format("YYYY-MM-01"),u=y.value.find(s=>s.grNo===a.grNo);if(!u){c.error("Could not find student data to process payment."),k.value=!1;return}const x=Math.ceil(Number(u.partial_fee||0));if(x<=0){c.warning(`No fee due for ${a.name}. Remaining amount is ${x}.`),k.value=!1;return}const p=Math.ceil(x*.5),v={student_id:u.grNo,class_id:u.class_id,month_for:r,base_fee:Math.ceil(Number(u.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(u.carry_forward||0)),final_amount:x,amount_paid:p,payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Auto Payment",remarks:`Auto partial payment of ${p} (50% of ${x}) submitted.`,received_by:1},S=await C.post("http://localhost:8000/api/fee-partial-payment",v);S.data.status?(c.success(`Partial payment submitted for ${a.name}!`),await ue(u.grNo),await B(w.value)):c.error(S.data.message||"Failed to submit payment.")}catch(r){console.error("Error submitting auto partial payment:",r),c.error(((n=(t=r.response)==null?void 0:t.data)==null?void 0:n.message)||"An unexpected error occurred.")}finally{k.value=!1}},xt=async()=>{var n,r;const a=$.value;if(a<=0){c.warning("No fee due for this student. Remaining amount is 0.");return}const t=Math.max(100,a*.1);if(D.value<t||D.value>a){c.error(`Invalid amount. Please enter a value between ${t} and ${a}`);return}k.value=!0;try{const u=dayjs().format("YYYY-MM-01"),x=y.value.find(S=>S.grNo===m.value.grNo);if(!x){c.error("Could not find student data to process payment."),k.value=!1;return}const p={student_id:x.grNo,class_id:x.class_id,month_for:u,base_fee:Math.ceil(Number(x.base_fee||0)),discount_amount:Math.ceil(Number(F.value||0)),late_fee:Math.ceil(Number(A.value||0)),carry_forward:Math.ceil(Number(x.carry_forward||0)),final_amount:Math.ceil(Number(a||0)),amount_paid:Math.ceil(Number(D.value||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:Ce.value,remarks:le.value||`Partial payment of ${D.value} received.`,received_by:1},v=await C.post("http://localhost:8000/api/fee-partial-payment",p);v.data.status?(c.success(`Partial payment of PKR ${D.value} saved successfully!`),await ue(x.grNo),W.value=!1,D.value=0,le.value="",F.value=0,A.value=0,await B(w.value)):c.error(v.data.message||"Failed to save payment.")}catch(u){console.error("Error submitting partial payment:",u);const x=((r=(n=u.response)==null?void 0:n.data)==null?void 0:r.message)||"An unexpected error occurred.";c.error(x)}finally{k.value=!1}},gt=async()=>{var a,t;k.value=!0;try{const n=dayjs().format("YYYY-MM-01"),r=y.value.find(p=>p.grNo===m.value.grNo);if(!r){c.error("Could not find student data to process payment."),k.value=!1;return}const u={student_id:r.grNo,class_id:r.class_id,month_for:n,base_fee:Math.ceil(Number(r.base_fee||0)),discount_amount:Math.ceil(Number(F.value||0)),late_fee:Math.ceil(Number(A.value||0)),carry_forward:Math.ceil(Number(r.carry_forward||0)),final_amount:Math.ceil(Number(De.value||0)),amount_paid:Math.ceil(Number($.value||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:ke.value,remarks:de.value||`Full payment of ${$.value} received.`,received_by:1},x=await C.post("http://localhost:8000/api/fee-full-payment",u);x.data.status?(c.success(`Full payment of PKR ${$.value} saved successfully!`),await ue(r.grNo),Z.value=!1,de.value="",F.value=0,A.value=0,await B(w.value)):c.error(x.data.message||"Failed to save payment.")}catch(n){console.error("Error submitting full payment:",n);const r=((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"An unexpected error occurred.";c.error(r)}finally{k.value=!1}},oe=ref(!1),ce=ref([]),Me=ref(0),je=ref(0),Pe=ref(!1);function vt(a){m.value=a,oe.value=!0,Pe.value=!0,yt()}async function yt(){try{const a=await C.get(`http://localhost:8000/api/fee-payment-history/${m.value.grNo}`);if(a.data.status){const t=a.data.result;if(ce.value=t.payments||[],Me.value=t.total_paid||0,je.value=t.total_due||0,t.student_info&&(m.value={...m.value,...t.student_info}),t.fee_summary){const n=y.value.findIndex(r=>r.grNo===m.value.grNo);n!==-1&&(y.value[n]={...y.value[n],...t.fee_summary})}}else ce.value=[],Me.value=0,je.value=0,c.error(a.data.message||"Failed to fetch payment history")}catch(a){console.error("Error fetching payment history:",a),ce.value=[],Me.value=0,je.value=0,c.error("Failed to fetch payment history")}finally{Pe.value=!1}}function Ge(a){return dayjs(a).format("DD MMM YYYY HH:mm")}function ht(a){return dayjs(a).format("HH:mm")}function G(a){return Math.ceil(Number(a||0))}function bt(){W.value=!1,setTimeout(()=>{m.value=null},300)}function wt(){Z.value=!1,setTimeout(()=>{m.value=null},300)}function _t(){oe.value=!1,setTimeout(()=>{m.value=null},300)}const fe=ref(!1),kt=async()=>{if(xe.value.length===0){c.warning("No uncheck students found for auto payment.");return}fe.value=!0;let a=0,t=0;try{for(const n of xe.value)try{const r=dayjs().format("YYYY-MM-01"),u={student_id:n.grNo,class_id:n.class_id,month_for:r,base_fee:Math.ceil(Number(n.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(n.carry_forward||0)),final_amount:Math.ceil(Number(n.total_fee||0)),amount_paid:Math.ceil(Number(n.total_fee||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Auto Payment",remarks:`Auto payment of ${Math.ceil(Number(n.total_fee||0))} submitted.`,received_by:1};if((await C.post("http://localhost:8000/api/fee-full-payment",u)).data.status){a++;const p=y.value.findIndex(v=>v.grNo===n.grNo);p!==-1&&(y.value[p].status="Paid",y.value[p].carry_forward=0)}else t++}catch(r){console.error(`Error processing auto payment for ${n.name}:`,r),t++}a>0?(c.success(`Auto payment completed! ${a} successful, ${t} failed.`),ee.value=!1,await B(w.value)):c.error("All auto payments failed. Please try again.")}catch(n){console.error("Error in auto payment process:",n),c.error("Auto payment process failed. Please try again.")}finally{fe.value=!1}},Ct=async()=>{if(ge.value.length===0){c.warning("No uncheck families found for auto payment.");return}fe.value=!0;let a=0,t=0;try{for(const n of ge.value)try{const r=await C.get(`http://localhost:8000/api/family/${n.id}/students`);if(r.data.status){const u=r.data.result.students||[];let x=0,p=0;for(const v of u)if(v.payment_status!=="paid"&&v.remaining_amount>0)try{const S={student_id:v.id,class_id:v.class_id,month_for:dayjs().format("YYYY-MM-01"),base_fee:Math.ceil(Number(v.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(v.carry_forward||0)),final_amount:Math.ceil(Number(v.remaining_amount||0)),amount_paid:Math.ceil(Number(v.remaining_amount||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Auto Family Payment",remarks:`Auto family payment for ${n.fatherName}`,received_by:1};(await C.post("http://localhost:8000/api/fee-full-payment",S)).data.status?x++:p++}catch(S){console.error(`Error processing auto payment for student ${v.name}:`,S),p++}if(x>0){a++;const v=z.value.findIndex(S=>S.id===n.id);v!==-1&&(z.value[v].status="Paid")}else t++}else t++}catch(r){console.error(`Error processing auto payment for family ${n.fatherName}:`,r),t++}a>0?(c.success(`Auto family payment completed! ${a} families successful, ${t} failed.`),ee.value=!1,f.value==="family"&&await Be()):c.error("All auto family payments failed. Please try again.")}catch(n){console.error("Error in auto family payment process:",n),c.error("Auto family payment process failed. Please try again.")}finally{fe.value=!1}};async function Mt(a){try{await ElMessageBox.confirm(`Are you sure you want to pay fees for all ${a.studentCount} students in ${a.name}?`,"Pay Class Fees",{confirmButtonText:"Yes, Pay All",cancelButtonText:"Cancel",type:"warning"}),ne.value=a.id;const t={class_id:a.class_id||a.id,section_id:a.section_id,payment_mode:"cash",payment_date:dayjs().format("YYYY-MM-DD"),received_by:1,remarks:`Bulk payment for class ${a.name}`},n=await C.post(`http://localhost:8000/api/class/${a.id}/pay-fees`,t);n.data.status?(c.success(`${n.data.result.success_count} students paid successfully!`),f.value==="class"&&Le()):c.error(n.data.message||"Failed to pay class fees")}catch(t){t!=="cancel"&&(console.error("Error paying class fees:",t),c.error("Failed to pay class fees"))}finally{ne.value=null}}async function jt(a){R.value=a,ie.value=!0,Ae.value=!0;try{const t=await C.get(`http://localhost:8000/api/family/${a.id}/students`);t.data.status?(se.value=t.data.result.students||[],R.value={...R.value,...t.data.result.family,total_amount:t.data.result.total_amount,total_paid:t.data.result.total_paid,total_remaining:t.data.result.total_remaining,students_count:t.data.result.students_count}):(c.error("Failed to fetch family students"),se.value=[])}catch(t){console.error("Error fetching family students:",t),c.error("Failed to fetch family students"),se.value=[]}finally{Ae.value=!1}}function We(){ie.value=!1,setTimeout(()=>{R.value=null,se.value=[]},300)}async function qe(a){try{await ElMessageBox.confirm(`Are you sure you want to pay full fees (PKR ${G(a.remainingAmount)}) for ${a.fatherName}'s family?`,"Pay Family Full Fees",{confirmButtonText:"Yes, Pay Full",cancelButtonText:"Cancel",type:"warning"});const t=await C.get(`http://localhost:8000/api/family/${a.id}/students`);if(t.data.status){const n=t.data.result.students||[];let r=0,u=0;for(const x of n)if(x.payment_status!=="paid"&&x.remaining_amount>0)try{const p={student_id:x.id,class_id:x.class_id,month_for:dayjs().format("YYYY-MM-01"),base_fee:Math.ceil(Number(x.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(x.carry_forward||0)),final_amount:Math.ceil(Number(x.remaining_amount||0)),amount_paid:Math.ceil(Number(x.remaining_amount||0)),payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Family Payment",remarks:`Family full payment for ${a.fatherName}`,received_by:1};(await C.post("http://localhost:8000/api/fee-full-payment",p)).data.status?r++:u++}catch(p){console.error(`Error paying for student ${x.name}:`,p),u++}r>0?(c.success(`Family payment completed! ${r} students paid successfully, ${u} failed.`),await B(w.value)):c.error("All family payments failed. Please try again.")}else c.error("Failed to fetch family students for payment")}catch(t){t!=="cancel"&&(console.error("Error paying family fees:",t),c.error("Failed to pay family fees"))}}async function Je(a){try{const t=Math.ceil(Number(a.remainingAmount||0)*.5);await ElMessageBox.confirm(`Are you sure you want to pay partial fees (PKR ${G(t)}) for ${a.fatherName}'s family?`,"Pay Family Partial Fees",{confirmButtonText:"Yes, Pay Partial",cancelButtonText:"Cancel",type:"warning"});const n=await C.get(`http://localhost:8000/api/family/${a.id}/students`);if(n.data.status){const r=n.data.result.students||[];let u=0,x=0;for(const p of r)if(p.payment_status!=="paid"&&p.remaining_amount>0)try{const v=Math.ceil(Number(p.remaining_amount||0)*.5),S={student_id:p.id,class_id:p.class_id,month_for:dayjs().format("YYYY-MM-01"),base_fee:Math.ceil(Number(p.base_fee||0)),discount_amount:0,late_fee:0,carry_forward:Math.ceil(Number(p.carry_forward||0)),final_amount:Math.ceil(Number(p.remaining_amount||0)),amount_paid:v,payment_date:dayjs().format("YYYY-MM-DD"),payment_mode:"Family Partial Payment",remarks:`Family partial payment for ${a.fatherName}`,received_by:1};(await C.post("http://localhost:8000/api/fee-partial-payment",S)).data.status?u++:x++}catch(v){console.error(`Error paying partial for student ${p.name}:`,v),x++}u>0?(c.success(`Family partial payment completed! ${u} students paid successfully, ${x} failed.`),await B(w.value)):c.error("All family partial payments failed. Please try again.")}else c.error("Failed to fetch family students for payment")}catch(t){t!=="cancel"&&(console.error("Error paying family partial fees:",t),c.error("Failed to pay family partial fees"))}}return(a,t)=>{const n=ae("UiCard"),r=ae("LoadingStudents"),u=ae("UiTable"),x=ae("el-input-number"),p=ae("el-input"),v=ae("el-dialog"),S=ae("el-button");return d(),i("div",Lt,[e("div",Bt,[e("div",Vt,[(d(!0),i(N,null,V(o(Se),(s,Y)=>(d(),i(N,{key:s.key},[e("button",{onClick:E=>ct(s.key),class:j([o(f)===s.key?"px-3":"px-4","py-2 rounded-full text-sm font-medium transition-all duration-300 ease-in-out transform relative overflow-hidden",o(f)===s.key?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md scale-105":"text-purple-600 hover:text-purple-700 hover:bg-purple-50 hover:scale-102"])},[e("span",Yt,[s.icon==="User"?(d(),i("svg",Dt,t[40]||(t[40]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)]))):s.icon==="AcademicCap"?(d(),i("svg",zt,t[41]||(t[41]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 14l9-5-9-5-9 5 9 5z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"},null,-1)]))):s.icon==="Users"?(d(),i("svg",Et,t[42]||(t[42]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},null,-1)]))):g("",!0),h(" "+l(s.label)+" ",1),s.count!==null?(d(),i("span",Ut,l(s.count),1)):g("",!0)]),o(f)===s.key?(d(),i("div",Kt)):g("",!0)],10,Rt),Y<o(Se).length-1?(d(),i("div",Tt)):g("",!0)],64))),128))])]),e("div",Ht,[e("h2",Ot,[t[43]||(t[43]=e("div",{class:"w-2 h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"},null,-1)),h(" Pay Fee - "+l(o(ut)),1)]),t[44]||(t[44]=Ft('<nav class="flex items-center gap-2 text-base font-medium text-gray-500" data-v-65f9e4c1><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-65f9e4c1>Fee Management</span><span class="mx-2" data-v-65f9e4c1>|</span><span class="hover:text-purple-600 cursor-pointer transition-colors duration-200" data-v-65f9e4c1>Fee Collection</span><span class="mx-2" data-v-65f9e4c1>|</span><span class="text-gray-900 font-bold" data-v-65f9e4c1>Pay Fee</span></nav>',1))]),t[176]||(t[176]=e("div",{class:"w-full max-w-7xl mx-auto mb-2"},[e("div",{class:"flex flex-col items-start"},[e("h3",{class:"text-base font-medium text-gray-900 tracking-tight"},"Select Criteria"),e("div",{class:"h-[2px] bg-purple-200 w-full transition-all duration-300",style:{"max-width":"110px"}})])],-1)),M(n,{class:"w-full max-w-7xl mx-auto rounded-lg transition-all duration-500 ease-in-out transform hover:shadow-lg"},{default:P(()=>[e("form",{class:"w-full",onSubmit:At(B,["prevent"])},[e("div",Gt,[e("div",Wt,[t[47]||(t[47]=e("label",{class:"mb-1 text-xs font-semibold text-gnavyray-500 uppercase tracking-wider"},"Session",-1)),e("div",qt,[T(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>b(q)?q.value=s:null),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[(d(),i(N,null,V(Ze,s=>e("option",{key:s,value:s},l(s),9,Jt)),64))],512),[[I,o(q)]]),t[45]||(t[45]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[46]||(t[46]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",Qt,[t[50]||(t[50]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Class",-1)),e("div",Xt,[T(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>b(pe)?pe.value=s:null),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[(d(!0),i(N,null,V(o(re),s=>(d(),i("option",{key:s.id,value:s.id},l(s.name),9,Zt))),128))],512),[[I,o(pe)]]),t[48]||(t[48]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[49]||(t[49]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",It,[t[54]||(t[54]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Section",-1)),e("div",es,[T(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>b(ve)?ve.value=s:null),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[t[51]||(t[51]=e("option",{value:""},"All",-1)),(d(!0),i(N,null,V(o(ye),s=>(d(),i("option",{key:s.id,value:s.id},l(s.name),9,ts))),128))],512),[[I,o(ve)]]),t[52]||(t[52]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[53]||(t[53]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",ss,[t[57]||(t[57]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Challan Month",-1)),e("div",os,[T(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>b(J)?J.value=s:null),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[(d(),i(N,null,V(Ie,s=>e("option",{key:s,value:s},l(s),9,as)),64))],512),[[I,o(J)]]),t[55]||(t[55]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[56]||(t[56]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",ls,[t[60]||(t[60]=e("label",{class:"mb-1 text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Fee Status",-1)),e("div",rs,[T(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>b(Q)?Q.value=s:null),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},[(d(),i(N,null,V(tt,s=>e("option",{key:s,value:s},l(s),9,ns)),64))],512),[[I,o(Q)]]),t[58]||(t[58]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[59]||(t[59]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])])]),t[61]||(t[61]=e("div",{class:"flex justify-end mt-2"},[e("button",{type:"submit",class:"h-9 px-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-sm font-bold text-white shadow hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105"},"Filter")],-1))],32)]),_:1}),e("div",is,[e("div",ds,[e("h3",us,[t[62]||(t[62]=e("div",{class:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 animate-bounce"},null,-1)),h(" "+l(o(be))+" ("+l(o(L))+") ",1)]),t[63]||(t[63]=e("div",{class:"h-[2px] bg-purple-200 w-full transition-all duration-500",style:{"max-width":"120px"}},null,-1))]),e("div",cs,[e("div",fs,[t[64]||(t[64]=e("span",{class:"absolute left-0 top-1/2 -translate-y-1/2 pl-2 text-purple-400"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),T(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>b(te)?te.value=s:null),onKeyup:Xe(rt,["enter"]),type:"text",placeholder:"QUICK SEARCH",class:"w-full border-0 bg-transparent pl-10 pr-0 py-2 text-gray-900 font-medium text-xs tracking-wider uppercase focus:ring-0 focus:outline-none transition placeholder:text-gray-600 placeholder:font-medium placeholder:opacity-100 placeholder:text-xs shadow-none",style:{"letter-spacing":"0.08em"}},null,544),[[Qe,o(te)]]),t[65]||(t[65]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[1.5px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",ps,[o(f)!=="class"?(d(),i("label",ms,[e("input",{type:"checkbox",checked:o(Ve),onChange:t[6]||(t[6]=s=>ft(s.target.checked)),class:"w-5 h-5 border-2 border-purple-200 rounded-md transition-all duration-200 group-hover:border-purple-400 checked:border-purple-500 checked:bg-purple-500 focus:ring-purple-500 appearance-none flex items-center justify-center"},null,40,xs),o(Ve)?(d(),i("span",gs,t[66]||(t[66]=[e("svg",{class:"w-3.5 h-3.5 text-white animate-pulse",fill:"none",stroke:"currentColor","stroke-width":"3",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)]))):g("",!0),e("div",vs,[o(Ve)?g("",!0):(d(),i(N,{key:0},[t[67]||(t[67]=e("span",{class:"text-sm font-medium text-gray-600 group-hover:text-purple-600 transition-all duration-300 block"}," Show Modal ",-1)),t[68]||(t[68]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[1.5px] bg-purple-200 transition-all duration-300"},null,-1))],64))])])):g("",!0),o(f)==="student"||o(f)==="family"?(d(),i("button",{key:1,onClick:t[7]||(t[7]=s=>ee.value=!0),class:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm font-medium rounded-full hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-sm hover:shadow-md transform origin-left hover:scale-105",style:{animation:"slideIn 0.3s ease-out forwards"}}," Show Modal ")):g("",!0)])]),t[177]||(t[177]=e("div",{class:"w-full max-w-7xl mx-auto"},[e("div",{class:"h-[2px] w-full bg-purple-200 mb-4"})],-1)),o(H)?(d(),i("div",ys,[M(r,{title:"Loading Data",message:`Please wait while we fetch ${o(be).toLowerCase()}...`},null,8,["message"])])):(d(),i("div",hs,[M($t,{name:"fade-slide",mode:"out-in"},{default:P(()=>[(d(),i("div",{key:o(f),class:"w-full"},[M(u,{class:"min-w-full table-fixed"},{head:P(()=>[e("tr",null,[(d(!0),i(N,null,V(o(Ke),s=>(d(),i("th",{key:s.key,onClick:Y=>s.key!=="action"?lt(s.key):null,style:St({width:s.width||"auto",minWidth:s.width||"auto"}),class:j(["py-2 px-2 font-medium text-gray-600 text-sm tracking-wider border-b-2 border-purple-400 relative #ffffffspace-nowrap",s.key!=="action"?"cursor-pointer select-none group transition-all duration-150 hover:bg-purple-50":""])},[e("span",{class:j(["flex items-center justify-between",s.key!=="action"?"group-hover:text-purple-600 transition-colors duration-150":""])},[e("span",null,l(s.label),1),s.key!=="action"?(d(),i("span",ws,[o(O)===s.key&&o(U)==="asc"?(d(),i("svg",_s,t[69]||(t[69]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 19V5m0 0l-7 7m7-7l7 7"},null,-1)]))):o(O)===s.key&&o(U)==="desc"?(d(),i("svg",ks,t[70]||(t[70]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"},null,-1)]))):(d(),i("svg",Cs,t[71]||(t[71]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"},null,-1)])))])):g("",!0)],2)],14,bs))),128))])]),default:P(()=>[o($e).length===0?(d(),i("tr",Ms,[e("td",{colspan:o(Ke).length,class:"py-16"},[e("div",Ps,[t[73]||(t[73]=e("div",{class:"relative mb-4"},[e("div",{class:"w-16 h-16 bg-gradient-to-br from-purple-100 to-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-purple-300",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",{class:"absolute -top-2 -right-2 w-4 h-4 bg-purple-100 rounded-full animate-ping opacity-20"}),e("div",{class:"absolute -bottom-2 -left-2 w-3 h-3 bg-indigo-100 rounded-full animate-pulse"})],-1)),e("div",Ns,[e("div",Fs,"No "+l(o(be))+" Found",1),e("div",As,"We couldn't find any "+l(o(be).toLowerCase())+" matching your current filters.",1),t[72]||(t[72]=e("div",{class:"flex flex-wrap justify-center gap-2 text-xs text-gray-500 font-light"},[e("span",{class:"px-2 py-1 bg-white rounded-full"},"â€¢ Check filters"),e("span",{class:"px-2 py-1 bg-white rounded-full"},"â€¢ Clear search")],-1))])])],8,js)])):g("",!0),o(f)==="student"?(d(!0),i(N,{key:1},V(o(_),(s,Y)=>(d(),i("tr",{key:s.grNo,class:j(["hover:bg-indigo-50 transition-colors","border-b border-purple-200",Y===o(_).length-1?"border-b-2 border-purple-400":""])},[e("td",Ss,l(s.grNo),1),e("td",$s,l(s.name),1),e("td",Ls,l(s.classSection),1),e("td",Bs,l(Math.ceil(Number(s.carry_forward||0))),1),e("td",Vs,l(Math.ceil(Number(s.base_fee||0))),1),e("td",Rs,l(Math.ceil(Number(s.partial_fee||0))),1),e("td",Ys,[e("div",Ds,[s.discount_fee&&s.discount_fee>0?(d(),i("div",zs,[t[74]||(t[74]=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),e("span",Es,"-"+l(Math.ceil(Number(s.discount_fee))),1)])):g("",!0),s.late_fee&&s.late_fee>0?(d(),i("div",Us,[t[75]||(t[75]=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1)),e("span",Ks,"+"+l(Math.ceil(Number(s.late_fee))),1)])):g("",!0),(!s.discount_fee||s.discount_fee<=0)&&(!s.late_fee||s.late_fee<=0)?(d(),i("div",Ts,"-")):g("",!0)])]),e("td",Hs,l(Math.ceil(Number(s.total_fee||0))),1),e("td",Os,[e("span",{class:j(["text-xs font-medium",(s.status||"").toLowerCase()==="paid"?"text-green-700":(s.status||"").toLowerCase()==="partial"?"text-yellow-700":((s.status||"").toLowerCase()==="pending","text-red-700")])},l(s.status),3)]),e("td",Gs,[e("div",Ws,[e("label",qs,[e("input",{type:"checkbox",checked:s.isSelected,onChange:E=>s.isSelected=E.target.checked,class:"w-5 h-5 border-2 border-purple-200 rounded-md transition-all duration-200 group-hover:border-purple-400 checked:border-purple-500 checked:bg-purple-500 focus:ring-purple-500 appearance-none flex items-center justify-center"},null,40,Js),s.isSelected?(d(),i("span",Qs,t[76]||(t[76]=[e("svg",{class:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor","stroke-width":"3",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)]))):g("",!0)]),e("button",{onClick:E=>Ye(s),disabled:(s.status||"").toLowerCase()==="paid",class:j(["px-3 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 mr-2",(s.status||"").toLowerCase()==="paid"?"bg-gradient-to-r from-blue-300 to-blue-500 cursor-not-allowed opacity-60":"bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800"]),style:{"min-width":"70px"}},l((s.status||"").toLowerCase()==="paid"?"Paid":"Pay"),11,Xs),e("button",{onClick:E=>Oe(s),disabled:(s.status||"").toLowerCase()==="paid",class:j(["px-3 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 mr-2",(s.status||"").toLowerCase()==="paid"?"bg-gradient-to-r from-teal-300 to-teal-500 cursor-not-allowed opacity-60":"bg-gradient-to-r from-teal-500 to-teal-700 hover:from-teal-600 hover:to-teal-800"]),style:{"min-width":"70px"}},l((s.status||"").toLowerCase()==="paid"?"Paid":"Partial"),11,Zs),e("button",{onClick:E=>vt(s),class:"px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs font-medium rounded-full hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105",style:{"min-width":"70px"}}," History ",8,Is)])])],2))),128)):o(f)==="class"?(d(!0),i(N,{key:2},V(o(_),(s,Y)=>(d(),i("tr",{key:s.id,class:j(["hover:bg-indigo-50 transition-colors","border-b border-purple-200",Y===o(_).length-1?"border-b-2 border-purple-400":""])},[e("td",eo,l(s.name),1),e("td",to,l(s.studentCount),1),e("td",so,"PKR "+l(Math.ceil(Number(s.totalFee||0))),1),e("td",oo,l(s.paidStudents),1),e("td",ao,l(s.remainingStudents),1),e("td",lo,"PKR "+l(Math.ceil(Number(s.totalPaidFees||0))),1),e("td",ro,"PKR "+l(Math.ceil(Number(s.totalRemainingFees||0))),1),e("td",no,[e("span",{class:j(["text-xs font-medium",s.status==="Complete"?"text-green-700":"text-yellow-700"])},l(s.status),3)]),e("td",io,[e("div",uo,[e("button",{onClick:E=>Mt(s),disabled:o(ne)===s.id||s.status==="Complete",class:j(["px-3 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105",s.status==="Complete"?"bg-gradient-to-r from-green-400 to-green-600 cursor-not-allowed opacity-70":o(ne)===s.id?"bg-gradient-to-r from-gray-400 to-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"]),style:{"min-width":"80px"}},[o(ne)===s.id?(d(),i("span",fo)):g("",!0),h(" "+l(o(ne)===s.id?"Paying...":s.status==="Complete"?"Paid":"Pay All"),1)],10,co)])])],2))),128)):o(f)==="family"?(d(!0),i(N,{key:3},V(o(_),(s,Y)=>(d(),i("tr",{key:s.id,class:j(["hover:bg-indigo-50 transition-colors","border-b border-purple-200",Y===o(_).length-1?"border-b-2 border-purple-400":""])},[e("td",po,l(s.familyCode||"N/A"),1),e("td",mo,l(s.fatherName||"N/A"),1),e("td",xo,l(s.childrenCount||0),1),e("td",go,l(G(s.totalBalance||0)),1),e("td",vo,l(G(s.monthlyFees||0)),1),e("td",yo,[e("div",ho,[s.totalDiscount&&s.totalDiscount>0?(d(),i("div",bo,[t[77]||(t[77]=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),e("span",wo,"-"+l(G(s.totalDiscount)),1)])):g("",!0),s.totalLateFee&&s.totalLateFee>0?(d(),i("div",_o,[t[78]||(t[78]=e("span",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1)),e("span",ko,"+"+l(G(s.totalLateFee)),1)])):g("",!0),(!s.totalDiscount||s.totalDiscount<=0)&&(!s.totalLateFee||s.totalLateFee<=0)?(d(),i("div",Co,"-")):g("",!0)])]),e("td",Mo,l(G(s.totalAmount||0)),1),e("td",jo,l(G(s.totalPaid||0)),1),e("td",Po,l(G(s.remainingAmount||0)),1),e("td",No,[e("span",{class:j(["text-xs font-medium px-2 py-1 rounded-full",(s.status||"").toLowerCase()==="paid"?"bg-green-100 text-green-700":(s.status||"").toLowerCase()==="partial"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"])},l(s.status||"Unpaid"),3)]),e("td",Fo,[e("div",Ao,[e("label",So,[e("input",{type:"checkbox",checked:s.isSelected,onChange:E=>s.isSelected=E.target.checked,class:"w-5 h-5 border-2 border-purple-200 rounded-md transition-all duration-200 group-hover:border-purple-400 checked:border-purple-500 checked:bg-purple-500 focus:ring-purple-500 appearance-none flex items-center justify-center"},null,40,$o),s.isSelected?(d(),i("span",Lo,t[79]||(t[79]=[e("svg",{class:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor","stroke-width":"3",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)]))):g("",!0)]),e("button",{onClick:E=>qe(s),disabled:(s.status||"").toLowerCase()==="paid",class:j(["px-2 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 mr-1",(s.status||"").toLowerCase()==="paid"?"bg-gradient-to-r from-blue-300 to-blue-500 cursor-not-allowed opacity-60":"bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800"]),style:{"min-width":"60px"}},l((s.status||"").toLowerCase()==="paid"?"Paid":"Pay"),11,Bo),e("button",{onClick:E=>Je(s),disabled:(s.status||"").toLowerCase()==="paid",class:j(["px-2 py-1 text-white text-xs font-medium rounded-full transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 mr-1",(s.status||"").toLowerCase()==="paid"?"bg-gradient-to-r from-teal-300 to-teal-500 cursor-not-allowed opacity-60":"bg-gradient-to-r from-teal-500 to-teal-700 hover:from-teal-600 hover:to-teal-800"]),style:{"min-width":"60px"}},l((s.status||"").toLowerCase()==="paid"?"Paid":"Partial"),11,Vo),e("button",{onClick:E=>jt(s),class:"px-2 py-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs font-medium rounded-full hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105",style:{"min-width":"60px"}}," View ",8,Ro)])])],2))),128)):g("",!0)]),_:1}),e("div",Yo,[e("div",Do," Showing "+l((o(w)-1)*o(X)+1)+" to "+l(Math.min(o(w)*o(X),o(L)))+" of "+l(o(L))+" entries ",1),e("div",zo,[e("label",Eo,[t[80]||(t[80]=h(" Per page: ")),T(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>b(X)?X.value=s:null),onChange:t[9]||(t[9]=s=>B(1)),class:"rounded-md border border-purple-200 bg-white px-2 py-1 text-xs font-semibold text-purple-700 focus:ring-2 focus:ring-purple-300"},[(d(),i(N,null,V([10,20,50,100],s=>e("option",{key:s,value:s},l(s),9,Uo)),64))],544),[[I,o(X)]])]),e("label",Ko,[t[81]||(t[81]=h(" Go to page: ")),T(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>b(me)?me.value=s:null),type:"number",min:"1",max:o(he),class:"w-16 rounded-md border border-purple-200 px-2 py-1 text-xs font-semibold text-purple-700 focus:ring-2 focus:ring-purple-300",onKeyup:t[11]||(t[11]=Xe(s=>Ue(o(me)),["enter"]))},null,40,To),[[Qe,o(me),void 0,{number:!0}]]),e("button",{onClick:t[12]||(t[12]=s=>Ue(o(me))),class:"ml-1 px-2 py-1 rounded-md bg-purple-500 text-white text-xs font-semibold hover:bg-purple-600 transition-all"},"Go")])])]),e("div",Ho,[e("div",Oo,[e("button",{class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 text-xl font-bold shadow-sm transition-all duration-200 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:o(w)===1,onClick:t[13]||(t[13]=s=>B(o(w)-1)),"aria-label":"Previous"},t[82]||(t[82]=[e("span",null,"â†",-1)]),8,Go),e("span",Wo,l(o(w)),1),e("button",{class:"w-9 h-9 flex items-center justify-center rounded-lg bg-purple-50 text-purple-500 text-xl font-bold shadow-sm transition-all duration-200 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:o(w)===o(he),onClick:t[14]||(t[14]=s=>B(o(w)+1)),"aria-label":"Next"},t[83]||(t[83]=[e("span",null,"â†’",-1)]),8,qo)])])]))]),_:1})])),M(v,{modelValue:o(W),"onUpdate:modelValue":t[22]||(t[22]=s=>b(W)?W.value=s:null),width:"800px","close-on-click-modal":!0,class:"enhanced-fee-modal",onClose:bt},{header:P(()=>[e("div",Jo,[t[85]||(t[85]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])]),e("div",null,[e("h3",{class:"text-base font-bold text-white"},"Partial Payment"),e("p",{class:"text-xs text-white/80"},"Enter partial payment details")])],-1)),e("button",{onClick:t[15]||(t[15]=s=>W.value=!1),class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all"},t[84]||(t[84]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),footer:P(()=>[o(m)?(d(),i("div",Fa,[e("button",{onClick:t[21]||(t[21]=s=>W.value=!1),class:"px-6 py-2 rounded-full bg-white text-xs font-bold text-gray-900 border border-gray-200 hover:bg-white transition-all duration-200 flex items-center justify-center gap-2"},t[105]||(t[105]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),h(" Cancel ")])),e("button",{onClick:xt,disabled:o(k),class:"px-6 py-2 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 text-xs font-bold text-white shadow-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[o(k)?(d(),i("span",Sa)):(d(),i("svg",$a,t[106]||(t[106]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)]))),h(" "+l(o(k)?"Processing...":"Submit"),1)],8,Aa)])):g("",!0)]),default:P(()=>[o(m)?(d(),i("div",Qo,[e("div",Xo,[e("div",Zo,[t[87]||(t[87]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",Io,[e("h4",ea,l(o(m).name),1),e("p",ta,l(o(m).classSection),1),e("p",sa,"GR No: "+l(o(m).grNo),1)]),e("div",oa,[t[86]||(t[86]=e("div",{class:"text-xs text-gray-500"},"Current Status",-1)),e("div",{class:j(["text-xs font-bold px-3 py-1 rounded-full inline-block w-fit",(o(m).status||"").toLowerCase()==="paid"?"text-green-700 bg-green-100":(o(m).status||"").toLowerCase()==="partial"?"text-yellow-700 bg-yellow-100":((o(m).status||"").toLowerCase()==="pending","text-red-700 bg-red-100")])},l(o(m).status),3)])])]),e("div",aa,[e("div",la,[t[88]||(t[88]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),e("span",{class:"text-xs font-semibold text-blue-700"},"Monthly Fee")],-1)),e("div",ra,"PKR "+l(Math.ceil(Number(o(m).base_fee||0))),1)]),e("div",na,[t[89]||(t[89]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-yellow-700"},"Previous Month Remaining")],-1)),e("div",ia,"PKR "+l(Math.ceil(Number(o(m).carry_forward||0))),1)]),e("div",da,[t[90]||(t[90]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-green-700"},"Discount")],-1)),e("div",ua,"PKR "+l(o(F)),1)]),e("div",ca,[t[91]||(t[91]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-red-700"},"Late Fee")],-1)),e("div",fa,"PKR "+l(o(A)),1)])]),e("div",pa,[t[104]||(t[104]=e("h5",{class:"text-base font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),h(" Payment Details ")],-1)),e("div",ma,[e("div",xa,[e("div",null,[t[92]||(t[92]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Discount Amount",-1)),M(x,{modelValue:o(F),"onUpdate:modelValue":t[16]||(t[16]=s=>b(F)?F.value=s:null),min:0,max:o($),class:"w-full enhanced-input-number",size:"large",placeholder:"Enter discount amount"},null,8,["modelValue","max"])]),e("div",null,[t[93]||(t[93]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Late Fee Amount",-1)),M(x,{modelValue:o(A),"onUpdate:modelValue":t[17]||(t[17]=s=>b(A)?A.value=s:null),min:0,class:"w-full enhanced-input-number",size:"large",placeholder:"Enter late fee amount"},null,8,["modelValue"])]),e("div",null,[t[94]||(t[94]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Partial Amount",-1)),M(x,{modelValue:o(D),"onUpdate:modelValue":t[18]||(t[18]=s=>b(D)?D.value=s:null),min:o($)>0?Math.min(Math.max(100,o($)*.1),o($)):0,max:o($)>0?o($):0,class:"w-full enhanced-input-number",size:"large",placeholder:"Enter partial amount"},null,8,["modelValue","min","max"])])]),e("div",ga,[e("div",va,[e("div",ya,[t[95]||(t[95]=e("span",{class:"text-xs font-semibold text-gray-900"},"Remaining Amount",-1)),e("span",ha,"PKR "+l(o($)),1)]),e("div",ba,[t[96]||(t[96]=e("span",{class:"text-xs text-gray-600"},"Partial Amount",-1)),e("span",wa,"PKR "+l(o(D)),1)]),e("div",_a,[e("div",ka,[t[97]||(t[97]=e("span",{class:"text-xs font-semibold text-gray-900"},"After Payment",-1)),e("span",Ca,"PKR "+l(o($)-o(D)),1)])])]),e("div",null,[t[101]||(t[101]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Payment Method",-1)),e("div",Ma,[T(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>b(Ce)?Ce.value=s:null),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},t[98]||(t[98]=[e("option",{value:"Cash"},"ðŸ’µ Cash",-1),e("option",{value:"Cheque"},"ðŸ¦ Cheque",-1),e("option",{value:"Online"},"ðŸ’³ Online",-1),e("option",{value:"Bank Transfer"},"ðŸ›ï¸ Bank Transfer",-1)]),512),[[I,o(Ce)]]),t[99]||(t[99]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[100]||(t[100]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])]),e("div",null,[t[102]||(t[102]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Remarks (Optional)",-1)),M(p,{modelValue:o(le),"onUpdate:modelValue":t[20]||(t[20]=s=>b(le)?le.value=s:null),type:"textarea",rows:"3",placeholder:"Add any additional notes or remarks...",class:"w-full enhanced-input",size:"large"},null,8,["modelValue"])])])]),o(Ne)?(d(),i("div",ja,[e("div",Pa,[t[103]||(t[103]=e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("span",Na,l(o(Ne)),1)])])):g("",!0)])])):g("",!0)]),_:1},8,["modelValue"]),M(v,{modelValue:o(Z),"onUpdate:modelValue":t[30]||(t[30]=s=>b(Z)?Z.value=s:null),width:"800px","close-on-click-modal":!0,class:"enhanced-fee-modal",onClose:wt},{header:P(()=>[e("div",La,[t[108]||(t[108]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",null,[e("h3",{class:"text-base font-bold text-white"},"Full Payment"),e("p",{class:"text-xs text-white/80"},"Complete payment for all dues")])],-1)),e("button",{onClick:t[23]||(t[23]=s=>Z.value=!1),class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all"},t[107]||(t[107]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),footer:P(()=>[o(m)?(d(),i("div",fl,[e("button",{onClick:t[29]||(t[29]=s=>Z.value=!1),class:"px-6 py-2 rounded-full bg-white text-xs font-bold text-gray-900 border border-gray-200 hover:bg-white transition-all duration-200 flex items-center justify-center gap-2"},t[129]||(t[129]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),h(" Cancel ")])),e("button",{onClick:gt,disabled:o(k),class:"px-6 py-2 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 text-xs font-bold text-white shadow-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[o(k)?(d(),i("span",ml)):(d(),i("svg",xl,t[130]||(t[130]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)]))),h(" "+l(o(k)?"Processing...":"Submit"),1)],8,pl)])):g("",!0)]),default:P(()=>[o(m)?(d(),i("div",Ba,[e("div",Va,[e("div",Ra,[t[110]||(t[110]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",Ya,[e("h4",Da,l(o(m).name),1),e("p",za,l(o(m).classSection),1),e("p",Ea,"GR No: "+l(o(m).grNo),1)]),e("div",Ua,[t[109]||(t[109]=e("div",{class:"text-xs text-gray-500"},"Current Status",-1)),e("div",{class:j(["text-xs font-bold px-3 py-1 rounded-full inline-block w-fit",(o(m).status||"").toLowerCase()==="paid"?"text-green-700 bg-green-100":(o(m).status||"").toLowerCase()==="partial"?"text-yellow-700 bg-yellow-100":((o(m).status||"").toLowerCase()==="pending","text-red-700 bg-red-100")])},l(o(m).status),3)])])]),e("div",Ka,[e("div",Ta,[t[111]||(t[111]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),e("span",{class:"text-xs font-semibold text-blue-700"},"Monthly Fee")],-1)),e("div",Ha,"PKR "+l(Math.ceil(Number(o(m).base_fee||0))),1)]),e("div",Oa,[t[112]||(t[112]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-yellow-700"},"Previous Month Remaining")],-1)),e("div",Ga,"PKR "+l(Math.ceil(Number(o(m).carry_forward||0))),1)]),e("div",Wa,[t[113]||(t[113]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-green-700"},"Discount")],-1)),e("div",qa,"PKR "+l(o(F)),1)]),e("div",Ja,[t[114]||(t[114]=e("div",{class:"flex items-center gap-2 mb-2"},[e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-semibold text-red-700"},"Late Fee")],-1)),e("div",Qa,"PKR "+l(o(A)),1)])]),e("div",Xa,[t[128]||(t[128]=e("h5",{class:"text-base font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),h(" Complete Payment Details ")],-1)),e("div",Za,[e("div",Ia,[e("div",null,[t[115]||(t[115]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Discount Amount",-1)),M(x,{modelValue:o(F),"onUpdate:modelValue":t[24]||(t[24]=s=>b(F)?F.value=s:null),min:0,max:o($),class:"w-full enhanced-input-number",size:"large",placeholder:"Enter discount amount"},null,8,["modelValue","max"])]),e("div",null,[t[116]||(t[116]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Late Fee Amount",-1)),M(x,{modelValue:o(A),"onUpdate:modelValue":t[25]||(t[25]=s=>b(A)?A.value=s:null),min:0,class:"w-full enhanced-input-number",size:"large",placeholder:"Enter late fee amount"},null,8,["modelValue"])]),e("div",null,[t[120]||(t[120]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Payment Method",-1)),e("div",el,[T(e("select",{"onUpdate:modelValue":t[26]||(t[26]=s=>b(ke)?ke.value=s:null),class:"h-10 border-0 bg-transparent px-0 text-sm font-light text-gray-600 focus:ring-0 focus:outline-none w-full appearance-none pr-8"},t[117]||(t[117]=[e("option",{value:"Cash"},"ðŸ’µ Cash",-1),e("option",{value:"Cheque"},"ðŸ¦ Cheque",-1),e("option",{value:"Online"},"ðŸ’³ Online",-1),e("option",{value:"Bank Transfer"},"ðŸ›ï¸ Bank Transfer",-1)]),512),[[I,o(ke)]]),t[118]||(t[118]=e("div",{class:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 5v14m0 0l-5-5m5 5l5-5"})])],-1)),t[119]||(t[119]=e("div",{class:"absolute left-0 right-0 bottom-0 h-[2px] bg-purple-200 pointer-events-none"},null,-1))])])]),e("div",tl,[e("div",sl,[e("div",ol,[t[121]||(t[121]=e("span",{class:"text-xs font-semibold text-gray-900"},"Total Fee",-1)),e("span",al,"PKR "+l(o(De)),1)]),e("div",ll,[t[122]||(t[122]=e("span",{class:"text-xs text-gray-600"},"Remaining Amount",-1)),e("span",rl,"PKR "+l(o($)),1)]),e("div",nl,[t[123]||(t[123]=e("span",{class:"text-xs text-gray-600"},"Payment Amount",-1)),e("span",il,"PKR "+l(o($)),1)]),t[124]||(t[124]=e("div",{class:"border-t border-blue-200 pt-2"},[e("div",{class:"flex justify-between items-center"},[e("span",{class:"text-xs font-semibold text-gray-900"},"After Payment"),e("span",{class:"text-sm font-bold text-green-600"},"PKR 0")])],-1))]),e("div",null,[t[125]||(t[125]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Receipt Number (Optional)",-1)),M(p,{modelValue:o(Fe),"onUpdate:modelValue":t[27]||(t[27]=s=>b(Fe)?Fe.value=s:null),placeholder:"Enter receipt number if available",class:"w-full enhanced-input",size:"large"},null,8,["modelValue"])]),e("div",null,[t[126]||(t[126]=e("label",{class:"block text-xs font-semibold text-gray-900 mb-2"},"Remarks (Optional)",-1)),M(p,{modelValue:o(de),"onUpdate:modelValue":t[28]||(t[28]=s=>b(de)?de.value=s:null),type:"textarea",rows:"3",placeholder:"Add any additional notes or remarks...",class:"w-full enhanced-input",size:"large"},null,8,["modelValue"])])])]),o(Re)?(d(),i("div",dl,[e("div",ul,[t[127]||(t[127]=e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("span",cl,l(o(Re)),1)])])):g("",!0)])])):g("",!0)]),_:1},8,["modelValue"]),M(v,{modelValue:o(oe),"onUpdate:modelValue":t[34]||(t[34]=s=>b(oe)?oe.value=s:null),width:"900px","close-on-click-modal":!0,class:"enhanced-history-modal",onClose:_t},{header:P(()=>[e("div",gl,[t[132]||(t[132]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",null,[e("h3",{class:"text-base font-bold text-white"},"Payment History"),e("p",{class:"text-xs text-white/80"},"Complete payment records")])],-1)),e("button",{onClick:t[31]||(t[31]=s=>oe.value=!1),class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all"},t[131]||(t[131]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),footer:P(()=>[o(m)?(d(),i("div",er,[e("button",{onClick:t[33]||(t[33]=s=>oe.value=!1),class:"h-9 px-8 rounded-full bg-white text-xs font-bold text-gray-900 border border-gray-200 hover:bg-white transition-all duration-200 flex items-center justify-center gap-2"},t[148]||(t[148]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),h(" Close ")]))])):g("",!0)]),default:P(()=>[o(m)?(d(),i("div",vl,[e("div",yl,[e("div",hl,[t[134]||(t[134]=e("div",{class:"w-16 h-16 bg-gradient-to-r from-indigo-100 to-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",bl,[e("h3",wl,l(o(m).name),1),e("p",_l,l(o(m).classSection),1),e("p",kl,"GR No: "+l(o(m).grNo),1)]),e("div",Cl,[t[133]||(t[133]=e("div",{class:"text-xs text-gray-500 mb-1"},"Current Status",-1)),e("div",{class:j(["text-xs font-bold px-4 py-2 rounded-full inline-block w-fit",(o(m).status||"").toLowerCase()==="paid"?"text-green-700 bg-green-100":(o(m).status||"").toLowerCase()==="partial"?"text-yellow-700 bg-yellow-100":((o(m).status||"").toLowerCase()==="pending","text-red-700 bg-red-100")])},l(o(m).status),3)])])]),e("div",Ml,[e("div",jl,[e("div",Pl,[t[136]||(t[136]=e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",null,[t[135]||(t[135]=e("div",{class:"text-xs text-green-600 font-medium"},"Total Paid",-1)),e("div",Nl,"PKR "+l(o(Me)),1)])])]),e("div",Fl,[e("div",Al,[t[138]||(t[138]=e("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[137]||(t[137]=e("div",{class:"text-xs text-blue-600 font-medium"},"Total Due",-1)),e("div",Sl,"PKR "+l(o(je)),1)])])]),e("div",$l,[e("div",Ll,[t[140]||(t[140]=e("div",{class:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",null,[t[139]||(t[139]=e("div",{class:"text-xs text-purple-600 font-medium"},"Total Payments",-1)),e("div",Bl,l(o(ce).length),1)])])])]),e("div",Vl,[t[147]||(t[147]=e("h5",{class:"text-base font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),h(" Payment Records ")],-1)),o(Pe)?(d(),i("div",Rl,[M(r,{title:"Loading Payment History",message:"Please wait while we fetch payment records..."})])):(d(),i("div",Yl,[e("div",Dl,[(d(!0),i(N,null,V(o(ce),(s,Y)=>(d(),i("div",{key:Y,class:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all duration-300 transform hover:scale-[1.02]"},[e("div",zl,[e("div",El,[t[141]||(t[141]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",null,[e("div",Ul,"PKR "+l(s.amount_paid),1),e("div",Kl,l(Ge(s.payment_date)),1)])]),e("div",Tl,[e("div",Hl,l(s.payment_mode),1),e("div",Ol,"Receipt: "+l(s.receipt_no),1)])]),s.remarks?(d(),i("div",Gl,[t[142]||(t[142]=e("div",{class:"text-xs text-gray-500 mb-1 font-medium"},"Remarks",-1)),e("div",Wl,l(s.remarks),1)])):g("",!0),e("div",ql,[e("div",Jl,[t[143]||(t[143]=h(" Received by: ")),e("span",Ql,l(s.received_by_name||"Admin"),1)]),e("div",Xl,l(Ge(s.payment_date))+" at "+l(ht(s.created_at)),1)])]))),128))]),!o(Pe)&&o(ce).length===0?(d(),i("div",Zl,[t[144]||(t[144]=e("div",{class:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[145]||(t[145]=e("h3",{class:"text-base font-bold text-gray-900 mb-2"},"No Payment History",-1)),t[146]||(t[146]=e("p",{class:"text-xs text-gray-500 mb-4"},"No payment records found for this student.",-1)),e("div",Il,[e("button",{onClick:t[32]||(t[32]=s=>Ye(o(m))),class:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-semibold rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-300"}," Make First Payment ")])])):g("",!0)]))])])):g("",!0)]),_:1},8,["modelValue"]),M(v,{modelValue:o(ee),"onUpdate:modelValue":t[37]||(t[37]=s=>b(ee)?ee.value=s:null),width:"700px","close-on-click-modal":!0,title:o(f)==="family"?"Selected Families":"Selected Students"},{default:P(()=>[e("div",tr,[e("div",sr,l(o(f)==="family"?"Selected Families for Payment":"Selected Students for Payment"),1),e("div",or,[e("div",ar,[t[150]||(t[150]=e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",lr,[t[149]||(t[149]=e("strong",null,"Note:",-1)),h(" Uncheck "+l(o(f)==="family"?"families":"students")+" ki full payment automatically submit ho jayegi. ",1)])])]),e("div",rr,[o(f)==="student"?(d(!0),i(N,{key:0},V(o(Te),s=>(d(),i("div",{key:s.grNo,class:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:bg-white transition-all"},[e("div",nr,[e("div",ir,l(s.name),1),e("div",dr,l(s.classSection),1),e("div",ur,"Total Fee: PKR "+l(Math.ceil(Number(s.total_fees||0))),1)]),e("div",cr,[e("button",{onClick:Y=>Ye(s),class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white text-sm font-medium rounded-full hover:from-blue-600 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105"}," Pay ",8,fr),e("button",{onClick:Y=>Oe(s),class:"px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-700 text-white text-sm font-medium rounded-full hover:from-teal-600 hover:to-teal-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105"}," Partial ",8,pr)])]))),128)):o(f)==="family"?(d(!0),i(N,{key:1},V(o(He),s=>(d(),i("div",{key:s.id,class:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:bg-white transition-all"},[e("div",mr,[e("div",xr,l(s.fatherName),1),e("div",gr,"Family Code: "+l(s.familyCode),1),e("div",vr,"Children: "+l(s.childrenCount)+" | Total Fee: PKR "+l(Math.ceil(Number(s.totalAmount||0))),1)]),e("div",yr,[e("button",{onClick:Y=>qe(s),class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white text-sm font-medium rounded-full hover:from-blue-600 hover:to-blue-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105"}," Pay ",8,hr),e("button",{onClick:Y=>Je(s),class:"px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-700 text-white text-sm font-medium rounded-full hover:from-teal-600 hover:to-teal-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105"}," Partial ",8,br)])]))),128)):g("",!0)]),o(_).filter(s=>s.status==="paid").length>0?(d(),i("div",wr,[e("div",_r,[t[152]||(t[152]=e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",kr,[e("strong",null,l(o(_).filter(s=>s.status==="paid").length)+" "+l(o(f)==="family"?"families":"students"),1),t[151]||(t[151]=h(" ki fee already paid hai. Unhe payment list se exclude kiya gaya hai. "))])])])):g("",!0),o(f)==="student"&&o(xe).length>0||o(f)==="family"&&o(ge).length>0?(d(),i("div",Cr,[e("div",Mr,[e("div",null,[t[153]||(t[153]=e("div",{class:"font-medium text-green-800"},"Auto Payment Summary",-1)),e("div",jr,l(o(f)==="student"?o(xe).length:o(ge).length)+" "+l(o(f)==="family"?"families":"students")+" ki full payment automatically submit hogi ",1)]),e("button",{onClick:t[35]||(t[35]=s=>o(f)==="student"?kt():Ct()),disabled:o(fe),class:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-700 text-white text-sm font-medium rounded-full hover:from-green-600 hover:to-green-800 transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 disabled:opacity-50"},[o(fe)?(d(),i("span",Nr)):g("",!0),t[154]||(t[154]=h(" Submit Auto Payments "))],8,Pr)])])):g("",!0),o(f)==="student"&&o(Te).length===0&&o(xe).length===0||o(f)==="family"&&o(He).length===0&&o(ge).length===0?(d(),i("div",Fr,[t[155]||(t[155]=e("div",{class:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("h3",Ar,"No "+l(o(f)==="family"?"Families":"Students")+" Selected",1),e("p",Sr,"Please select "+l(o(f)==="family"?"families":"students")+" from the table to proceed with payment.",1)])):g("",!0),e("div",$r,[M(S,{onClick:t[36]||(t[36]=s=>ee.value=!1)},{default:P(()=>t[156]||(t[156]=[h("Close")])),_:1,__:[156]})])])]),_:1},8,["modelValue","title"]),M(v,{modelValue:o(ie),"onUpdate:modelValue":t[39]||(t[39]=s=>b(ie)?ie.value=s:null),width:"900px","close-on-click-modal":!0,class:"enhanced-fee-modal",onClose:We},{header:P(()=>[e("div",Lr,[t[158]||(t[158]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])]),e("div",null,[e("h3",{class:"text-base font-bold text-white"},"Family Students"),e("p",{class:"text-xs text-white/80"},"View all students in this family")])],-1)),e("button",{onClick:t[38]||(t[38]=s=>ie.value=!1),class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all"},t[157]||(t[157]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),footer:P(()=>[e("div",{class:"flex gap-3 px-6 pb-6 justify-end"},[e("button",{onClick:We,class:"px-6 py-2 rounded-full bg-white text-xs font-bold text-gray-900 border border-gray-200 hover:bg-white transition-all duration-200 flex items-center justify-center gap-2"},t[175]||(t[175]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),h(" Close ")]))])]),default:P(()=>[o(R)?(d(),i("div",Br,[e("div",Vr,[e("div",Rr,[e("div",null,[t[164]||(t[164]=e("h4",{class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V5a2 2 0 012-2h4a2 2 0 012 2v2"})]),h(" Family Information ")],-1)),e("div",Yr,[e("div",Dr,[t[159]||(t[159]=e("span",{class:"text-sm text-gray-600"},"Family Code:",-1)),e("span",zr,l(o(R).family_code),1)]),e("div",Er,[t[160]||(t[160]=e("span",{class:"text-sm text-gray-600"},"Father Name:",-1)),e("span",Ur,l(o(R).father_name),1)]),e("div",Kr,[t[161]||(t[161]=e("span",{class:"text-sm text-gray-600"},"Mother Name:",-1)),e("span",Tr,l(o(R).mother_name||"N/A"),1)]),e("div",Hr,[t[162]||(t[162]=e("span",{class:"text-sm text-gray-600"},"Contact:",-1)),e("span",Or,l(o(R).contact_number||"N/A"),1)]),e("div",Gr,[t[163]||(t[163]=e("span",{class:"text-sm text-gray-600"},"Address:",-1)),e("span",Wr,l(o(R).address||"N/A"),1)])])]),e("div",null,[t[169]||(t[169]=e("h4",{class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),h(" Fee Summary ")],-1)),e("div",qr,[e("div",Jr,[t[165]||(t[165]=e("span",{class:"text-sm text-gray-600"},"Students Count:",-1)),e("span",Qr,l(o(R).students_count||0),1)]),e("div",Xr,[t[166]||(t[166]=e("span",{class:"text-sm text-gray-600"},"Total Amount:",-1)),e("span",Zr,"PKR "+l(o(R).total_amount||0),1)]),e("div",Ir,[t[167]||(t[167]=e("span",{class:"text-sm text-gray-600"},"Paid Amount:",-1)),e("span",en,"PKR "+l(o(R).total_paid||0),1)]),e("div",tn,[t[168]||(t[168]=e("span",{class:"text-sm text-gray-600"},"Remaining:",-1)),e("span",sn,"PKR "+l(o(R).total_remaining||0),1)])])])])]),e("div",on,[e("h4",an,[t[170]||(t[170]=e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),h(" Students ("+l(o(se).length)+") ",1)]),o(Ae)?(d(),i("div",ln,t[171]||(t[171]=[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading students...",-1)]))):o(se).length===0?(d(),i("div",rn,t[172]||(t[172]=[e("svg",{class:"w-12 h-12 text-gray-500 mx-auto mb-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),e("p",{class:"text-gray-500 text-sm"},"No students found in this family",-1)]))):(d(),i("div",nn,[e("table",dn,[t[174]||(t[174]=e("thead",null,[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"text-left py-3 px-4 font-semibold text-gray-900 text-sm"},"Student"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-900 text-sm"},"Class"),e("th",{class:"text-right py-3 px-4 font-semibold text-gray-900 text-sm"},"Fee"),e("th",{class:"text-right py-3 px-4 font-semibold text-gray-900 text-sm"},"Paid"),e("th",{class:"text-right py-3 px-4 font-semibold text-gray-900 text-sm"},"Remaining"),e("th",{class:"text-center py-3 px-4 font-semibold text-gray-900 text-sm"},"Status")])],-1)),e("tbody",null,[(d(!0),i(N,null,V(o(se),s=>(d(),i("tr",{key:s.id,class:"border-b border-gray-200 hover:bg-white transition-colors"},[e("td",un,[e("div",cn,[t[173]||(t[173]=e("div",{class:"w-10 h-10 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("div",fn,l(s.name),1),e("div",pn,"Roll: "+l(s.roll_number||"N/A"),1)])])]),e("td",mn,[e("span",xn,l(s.class_section),1)]),e("td",gn,[e("span",vn,"PKR "+l(s.final_amount||0),1)]),e("td",yn,[e("span",hn,"PKR "+l(s.paid_amount||0),1)]),e("td",bn,[e("span",wn,"PKR "+l(s.remaining_amount||0),1)]),e("td",_n,[e("span",{class:j(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.payment_status==="paid"?"bg-green-100 text-green-800":s.payment_status==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},l(s.payment_status==="paid"?"Paid":s.payment_status==="partial"?"Partial":"Unpaid"),3)])]))),128))])])]))])])):g("",!0)]),_:1},8,["modelValue"])])}}},jn=Pt(kn,[["__scopeId","data-v-65f9e4c1"]]);export{jn as default};
